{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/./node_modules/.framagit.org/Sesamath/sesajstools/ac6283ba39b63def7e316a1f1c813915656c401e/node_modules/sesajstools/dom/index.js","webpack://[name]/./node_modules/.framagit.org/Sesamath/sesajstools/ac6283ba39b63def7e316a1f1c813915656c401e/node_modules/sesajstools/index.js","webpack://[name]/./node_modules/.framagit.org/Sesamath/sesajstools/ac6283ba39b63def7e316a1f1c813915656c401e/node_modules/sesajstools/utils/dump.js","webpack://[name]/./node_modules/.framagit.org/Sesamath/sesajstools/ac6283ba39b63def7e316a1f1c813915656c401e/node_modules/sesajstools/utils/log.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/a-function.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/a-possible-prototype.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/add-to-unscopables.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/advance-string-index.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/an-instance.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/an-object.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/array-for-each.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/array-includes.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/array-iteration.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/array-method-has-species-support.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/array-species-create.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/bind-context.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/check-correctness-of-iteration.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/classof-raw.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/classof.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/copy-constructor-properties.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/correct-prototype-getter.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/create-html.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/create-iterator-constructor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/create-property-descriptor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/create-property.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/define-iterator.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/define-well-known-symbol.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/descriptors.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/document-create-element.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/dom-iterables.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/enum-bug-keys.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/export.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/fails.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/forced-string-html-method.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/forced-string-trim-method.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/function-to-string.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/get-built-in.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/get-iterator-method.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/global.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/has.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/hidden-keys.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/hide.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/host-report-errors.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/html.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/ie8-dom-define.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/indexed-object.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/inherit-if-required.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/internal-state.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-array-iterator-method.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-array.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-forced.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-object.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-pure.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/is-regexp.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/iterate.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/iterators-core.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/iterators.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/math-sign.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/microtask.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/native-promise-constructor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/native-symbol.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/native-weak-map.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/new-promise-capability.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/not-a-regexp.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-create.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-define-properties.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-define-property.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-get-own-property-names.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-get-prototype-of.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-keys-internal.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-keys.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-property-is-enumerable.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-set-prototype-of.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/object-to-string.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/own-keys.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/parse-float.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/parse-int.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/path.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/perform.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/promise-resolve.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/redefine-all.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/redefine.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/regexp-exec-abstract.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/regexp-exec.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/regexp-flags.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/require-object-coercible.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/same-value.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/set-global.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/set-species.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/set-to-string-tag.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/shared-key.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/shared.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/sloppy-array-method.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/species-constructor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/string-multibyte.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/string-repeat.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/string-trim.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/task.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-absolute-index.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-indexed-object.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-integer.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-length.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-object.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/to-primitive.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/uid.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/user-agent.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/well-known-symbol.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/whitespaces.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/internals/wrapped-well-known-symbol.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.array.concat.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.array.filter.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.array.includes.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.array.index-of.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.array.iterator.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.math.sign.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.number.constructor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.object.to-string.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.parse-float.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.parse-int.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.promise.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.regexp.constructor.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.regexp.to-string.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.bold.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.includes.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.italics.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.iterator.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.repeat.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.replace.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.search.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.split.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.string.trim.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.symbol.description.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.symbol.iterator.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/es.symbol.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/web.dom-collections.for-each.js","webpack://[name]/./node_modules/.registry.npmjs.org/core-js/3.2.1/node_modules/core-js/modules/web.dom-collections.iterator.js","webpack://[name]/./node_modules/.registry.npmjs.org/process/0.11.10/node_modules/process/browser.js","webpack://[name]/(webpack)/buildin/global.js","webpack://[name]/./sources_js/actions/actionAncetre.js","webpack://[name]/./sources_js/actions/actionCoucherCompas.js","webpack://[name]/./sources_js/actions/actionCreation.js","webpack://[name]/./sources_js/actions/actionEcarterCompas.js","webpack://[name]/./sources_js/actions/actionEcrireTexte.js","webpack://[name]/./sources_js/actions/actionGlisser.js","webpack://[name]/./sources_js/actions/actionLeverCompas.js","webpack://[name]/./sources_js/actions/actionMasquer.js","webpack://[name]/./sources_js/actions/actionMasquerInstrument.js","webpack://[name]/./sources_js/actions/actionModifierLongueur.js","webpack://[name]/./sources_js/actions/actionModifierRayon.js","webpack://[name]/./sources_js/actions/actionMontrer.js","webpack://[name]/./sources_js/actions/actionMontrerGraduations.js","webpack://[name]/./sources_js/actions/actionMontrerInstrument.js","webpack://[name]/./sources_js/actions/actionMontrerNombres.js","webpack://[name]/./sources_js/actions/actionNommerPoint.js","webpack://[name]/./sources_js/actions/actionPause.js","webpack://[name]/./sources_js/actions/actionRetourner.js","webpack://[name]/./sources_js/actions/actionRotationInstrument.js","webpack://[name]/./sources_js/actions/actionRotationObjet.js","webpack://[name]/./sources_js/actions/actionTranslationInstrument.js","webpack://[name]/./sources_js/actions/actionTranslationObjet.js","webpack://[name]/./sources_js/actions/actionZoomInstrument.js","webpack://[name]/./sources_js/actions/actionZoomObjet.js","webpack://[name]/./sources_js/app/IepApp.js","webpack://[name]/./sources_js/app/IepDoc.js","webpack://[name]/./sources_js/global/global.js","webpack://[name]/./sources_js/iep.js","webpack://[name]/./sources_js/instruments/compas.js","webpack://[name]/./sources_js/instruments/compasLeve.js","webpack://[name]/./sources_js/instruments/crayon.js","webpack://[name]/./sources_js/instruments/equerre.js","webpack://[name]/./sources_js/instruments/instrumentAncetre.js","webpack://[name]/./sources_js/instruments/rapporteur.js","webpack://[name]/./sources_js/instruments/regle.js","webpack://[name]/./sources_js/instruments/requerre.js","webpack://[name]/./sources_js/mathjaxLoader.js","webpack://[name]/./sources_js/objets/Imag.js","webpack://[name]/./sources_js/objets/angle.js","webpack://[name]/./sources_js/objets/angleDroit.js","webpack://[name]/./sources_js/objets/arc.js","webpack://[name]/./sources_js/objets/axe.js","webpack://[name]/./sources_js/objets/demiDroite.js","webpack://[name]/./sources_js/objets/droite.js","webpack://[name]/./sources_js/objets/droiteAncetre.js","webpack://[name]/./sources_js/objets/gabarit.js","webpack://[name]/./sources_js/objets/ligneContinue.js","webpack://[name]/./sources_js/objets/marqueSegment.js","webpack://[name]/./sources_js/objets/nomPoint.js","webpack://[name]/./sources_js/objets/objetBase.js","webpack://[name]/./sources_js/objets/objetLigne.js","webpack://[name]/./sources_js/objets/point.js","webpack://[name]/./sources_js/objets/polygone.js","webpack://[name]/./sources_js/objets/quadrillage.js","webpack://[name]/./sources_js/objets/repere.js","webpack://[name]/./sources_js/objets/segment.js","webpack://[name]/./sources_js/objets/texte.js","webpack://[name]/./sources_js/types/vecteur.js"],"names":["module","exports","ActionAncetre","doc","tempo","arguments","length","parseInt","isReady","prototype","setReady","creegElement","actionVisible","require","ActionCoucherCompas","call","execute","immediat","compas","compasLeve","leve","montre","setPosition","x","y","angle","visible","actionSuivante","getInstrumentVisibility","indice","getCompasStatus","Texte","ActionCreation","id","objet","vitesse","ob","getElement","objetRemplace","Math","abs","parseFloat","addElement","pushElement","xinit","yinit","creationAnimee","lanceAnimation","finAction","creeg","positionne","g","setAttribute","svg","appendChild","ActionEcarterCompas","ecartement","ec10","lanceAnimationEcartement","ecart","kernel","mathjaxLoader","ActionEcrireTexte","couleur","taille","texte","style","couleurFond","opaciteFond","couleurCadre","epaisseurCadre","marge","margeGauche","margeDroite","margeHaut","margeBas","txt","replace","remplaceAccentsHtml","remplaceBalises","remplaceCarSpe","estLatex","estAffichageLatex","traduitCaracteresGrecs","necessiteLatex","traiteMaths","traiteAccents","updateg","charAt","ch","i","search","ta","caracteresGrecs","indexOf","RegExp","caracteresGrecsUtf8","ch2","bStyletTexte","a","split","getMaths","res","prepare","div","document","createElement","String","prelatex","substring","createTextNode","body","self","then","MathJax","Hub","Queue","creegLatex","catch","error","console","Error","w","h","createElementNS","svgsn","c1","childNodes","c2","s","tagName","clientWidth","clientHeight","t","clone","cloneNode","removeChild","rectAff","epc","height","getBBox","width","creeRectangle","e","indbalise","tspan","ind","indexp","indind","mini","bexp","tailleind","stylespan","sp","debutLigne","an","dy","inf","debexp","debind","hautlig","decblp","decalage","min","infoBalise","indiceFinBalise","traiteBalise","analyseExposantOuIndice","erreur","operande","exposant","contientBalisesItaliqueOuUnderlineOuFontOuBold","test","coulFond","r","insertBefore","ActionGlisser","abscisseFin","pix10","requerre","lanceAnimationGlissement","setAbs","CompasLeve","ActionLeverCompas","ActionMasquer","idel","nature","el","getObjectVisibility","ActionMasquerInstrument","instrument","ActionModifierLongueur","longueur","regle","vis","oldg","replaceChild","translate","ActionModificationRayon","rayFin","type","lanceAnimationModificationRayon","donneRayon","ActionMontrer","ActionMontrerGraduations","bmontrer","montreGraduations","ActionMontrerInstrument","ActionMontrerNombres","rapporteur","montreGraduationsExternes","ActionNommerPoint","nomPoint","nom","point","ActionPause","activeIconeContinuer","animationEnCours","ActionRetourner","retourne","ActionRotationInstrument","anglefin","deg10","lanceAnimationRotation","ActionRotationObjet","ActionTranslationInstrument","xfin","yfin","isNaN","lanceAnimationTranslation","ActionTranslationObjet","ActionZoomInstrument","zoomfin","lanceAnimationZoom","zoomfactor","ActionZoomObjet","IepDoc","IepApp","options","debug","Boolean","log","docs","window","addEventListener","closeAllXMLWindows","addDoc","chDoc","autoStart","getElementById","localName","push","iepDoc","windowxml","close","Vect","Compas","Equerre","Rapporteur","Regle","Requerre","Crayon","ActionModifierRayon","Angle","AngleDroit","Arc","Gabarit","Axe","DemiDroite","Droite","Imag","LigneContinue","MarqueSegment","NomPoint","Point","Polygone","Quadrillage","Repere","Segment","outils","chdoc","elimineDoublonsXML","codexml","ind1","ind2","ind3","actions","elements","compasRetourne","equerre","crayon","xmldoc","parseXMLDoc","tabact","getElementsByTagName","started","indiceActionEnCours","creeActions","ev","onmousemove","clientX","clientY","onmouseup","onmouseleave","touches","pageX","pageY","waitForReadyState","ready","verifyReadyState","start","setTimeout","pasPretes","filter","action","every","creeElementsGraphiques","forEach","initialiseOutils","outil","initialisePosition","recreeOutils","creeIcones","InitialiseIcones","onPlay","montreIcone","nbIcones","barreIcones","creeElementsPourIcones","iconGoBegin","iconeGoBegin","iconGoBeginGris","onclick","onGoBegin","iconStepPrev","iconeStepPrev","iconStepPrevGris","onStepPrev","iconPause","iconePause","iconPauseGris","onPause","iconPlay","iconePlay","iconPlayGris","iconPlay2","onPlayContinuer","iconRestart","iconeRestart","iconRestartGris","onRestart","iconStepNext","iconeStepNext","iconStepNextGris","onStepNext","iconGoEnd","iconeGoEnd","iconGoEndGris","onGoEnd","iconXML","iconeXML","iconXMLGris","onXML","hauteurBarre","demiLargeurBarre","xbarre","ybarre","isDraggingBarre","onmousedownbarre","onmousemovebarre","deltax","deltay","xmouse","ymouse","xcapturebarre","ycapturebarre","cursor","getAttribute","dx","xpos","ypos","preventDefault","popup","focus","nomIcone","bvisible","initialise","executeJusque","nbActions","indiceProchaineActionVisible","derniereAction","indicePrecedenteActionVisible","premiereAction","indaction","object","couche","montreInstrumentsEtape","n","indfin","element","setElement","ajouteAction","at","ato","forme","xcrayon","ycrayon","sens","ord","cibles","coord","len","v1","echelle","cible","getId","abscisse_bas_droite","ecartAngle","getAbs","getOrd","getCouleur","getEpaisseur","getOpaciteFond","ordonnee_bas_droite","abscisse_haut_gauche","ordonnee_haut_gauche","getCouleurFond","getOpaciteTrait","estInstrument","xcons","ycons","getStyleTrait","getStyle","getCoord","getAngle","presqueNul","norme","prepareAction","getCouleurFondTexte","getCouleurCadre","alert","imm","passageActionSuivante","coul","ep","op","st","elt","sep","obj","attribute","teinte","circ","filtre","pol","rect","path","text","defs","radialGradiant","markerArrow","filtreEclairageIcone","clair","fonce","rg","stop","marker","pathm","dl","pointLight","fc","open","title","form","fontSize","scrollIntoView","select","convDegRad","PI","convRadDeg","sin30","zero","zeroAngle","mesurePrincDeg","ang","q","floor","ret","parser","xmlDoc","DOMParser","parseFromString","ActiveXObject","async","loadXML","bal","balf","indf","balisefont","chaine","trim","indvirg","indparf","indiceParentheseFermante","deb","p","somme","chiffre","car","valeur_approchee","nombre","precision","prec","pow","round","mettre_en_pixels","nbr","borne1","borne2","borne_pix1","borne_pix2","coeff_dir","ordo_orig","j","li","b","liste","bold","italic","underline","fontface","t1","t2","cha","chb","accoladeFermante","pdebut","contientBaliseLaTeX","cos30","cos","cc1","cc2","toString","colineaires","u","v","n1","n2","colineairesMemeSens","indiceVirgule","nb","indpf","k","determiner_graduations","maxi","unite","debut_trace","ceil","LN10","indfb","fonte","inddeb","info","some","code","includes","ch1","btexte","indv","indv1","indv2","indv3","repeat","getMathsForName","car2","bool","c","iepApp","InstrumentAncetre","bretourne","lon","longpointe","d","alp","asin","decbh","retb","rayb","epm","dlb","dlm","ylm","ylm2","dlh","ylh","dltop","ytop","bg","bd","rayx","rayy","styleli","haut","zoom","scale","bretroune","ecartfin","pasecart","distecart","timer","setInterval","actionPourEcartement","ec","dis","clearInterval","f","dh","angleInit","path1","lg","demlarg","longmine","demlargmine","rx","ry","path2","largeur","hauteur","largeurbas","largeurgauche","largeurint","hauteurint","largeurbande","l","pix","dist","vect","vecteurColineaire","actionPourTranslation","angfin","ang1","ang2","pasdeg","distang","actionPourRotation","pas","senspos","actionPourZoom","z","graduationExterneVisible","graduationInterneVisible","hauteurPolice","hauteurPoliceInterne","largeurBarre","ray","rayon","rayInt","rayonInt","raytraitint","rayonMire","gradext","dep","gradint","graduationVisible","longint","larg","line","graduations","abscisse","pathtrou","longd","longg","dectroud","dectroub","raytrou","ytrou","gequerre","absfin","actionPourGlissement","addJs","mathJaxUrl","configCode","loadDelay","firstLoadingPromise","Promise","resolve","reject","head","eltConfig","clearTimeout","timeout","ObjetBase","url","img","Image","owner","onload","own","src","image","setAttributeNS","ObjetLigne","epaisseur","opacite","motif","opaciteRemplissage","direct","v2","xc1","yc1","xmilieu","ymilieu","ang3","demilong","a1","a2","u1","sin","u2","xd","yd","xf","yf","remplis","style1","rond","uc","tourne","xc","yc","u3","u4","nbtraits","xsommet","ysommet","xinter","yinter","sqrt","points","debut","fin","styleTrait","xdeb","ydeb","actionPourAnimation","pente","gauche","distanceBord","xgrad","xmin","xmax","cadre","droite","bas","nb_grad_x","bord","debut_trace_x","tracer_abscisses","Number","tracer_ordonnees","unite_x","ordo_etiquettes","tailleEtiquettes","mettre_x_en_pixels","stylet","debut_trace_y","unite_y","nb_grad_y","abs_etiquettes","ordonnee","mettre_y_en_pixels","x1","y1","x2","y2","calcule","horsFenetre","xext1","yext1","xext2","yext2","DroiteAncetre","xa","ya","xb","yb","indicePoint","cray","rayInit","dif","dray","sign","actionPourModificationRayon","sauveabs","sauveord","demlong","dec","diam","ratio","undefined","parentNode","xp","yp","rap","longcote","tracer_grille","ecart_x","ecart_y","debut_x","debut_y","fin_x","fin_y","pointille","alpha","ygrad","ymin","ymax","grille","axes","etiquettes","clip","rect2","stylefleche","longFleche","u0","normeSouhaitee","norm","kc","ks","atan"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY;;AAEZ,UAAU,mBAAO,CAAC,sJAAc;AAChC,cAAc,mBAAO,CAAC,8IAAU;;AAEhC;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY;;AAEZ;AACA;AACA,2CAA2C;AAC3C,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,cAAc;AACd;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB,YAAY,UAAU;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA,0CAA0C;AAC1C,kDAAkD,gCAAgC;AAClF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,aAAa;AACb,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW;AACX,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc,YAAY;AACrC,aAAa;AACb;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,gDAAgD,oBAAoB,yBAAyB,aAAa;AAC1G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,YAAY,mBAAO,CAAC,8IAAU;AAC9B;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,0BAA0B,uEAAuE;AACjG,8DAA8D;AAC9D;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY;;AAEZ,WAAW,mBAAO,CAAC,iJAAQ;AAC3B,YAAY,mBAAO,CAAC,8IAAU;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACnRA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACJA,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACNA,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,aAAa,mBAAO,CAAC,oIAA4B;AACjD,WAAW,mBAAO,CAAC,kHAAmB;;AAEtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AChBa;AACb,aAAa,mBAAO,CAAC,0IAA+B;;AAEpD;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACJA,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;ACNa;AACb,eAAe,mBAAO,CAAC,wIAA8B;AACrD,wBAAwB,mBAAO,CAAC,gJAAkC;;AAElE;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/BA,WAAW,mBAAO,CAAC,kIAA2B;AAC9C,oBAAoB,mBAAO,CAAC,sIAA6B;AACzD,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,yBAAyB,mBAAO,CAAC,kJAAmC;;AAEpE;;AAEA,qBAAqB,qDAAqD;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,eAAe;AACzB;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,8BAA8B;AAC9B,+BAA+B;AAC/B,+BAA+B;AAC/B,2CAA2C;AAC3C,SAAS,iCAAiC;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChEA,YAAY,mBAAO,CAAC,oHAAoB;AACxC,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACdA,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,cAAc,mBAAO,CAAC,0HAAuB;AAC7C,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACnBA,gBAAgB,mBAAO,CAAC,8HAAyB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;AA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AACH;;;;;;;;;;;;ACVA,YAAY,mBAAO,CAAC,oHAAoB;;AAExC;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;;;;;;ACLD,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACTA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,+BAA+B,mBAAO,CAAC,8KAAiD;AACxF,WAAW,mBAAO,CAAC,kHAAmB;AACtC,eAAe,mBAAO,CAAC,0HAAuB;AAC9C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,gCAAgC,mBAAO,CAAC,gKAA0C;AAClF,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,mDAAmD;AACnD,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrDA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;;ACNa;AACb,WAAW,mBAAO,CAAC,kHAAmB;AACtC,eAAe,mBAAO,CAAC,0HAAuB;AAC9C,YAAY,mBAAO,CAAC,oHAAoB;AACxC,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,iBAAiB,mBAAO,CAAC,gIAA0B;;AAEnD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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;AAChD,gBAAgB,mBAAO,CAAC,kHAAmB;AAC3C,gBAAgB,mBAAO,CAAC,8HAAyB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,+CAA+C,sBAAsB,EAAE;AACvE;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;AC7EA,aAAa,mBAAO,CAAC,sHAAqB;;AAE1C;;;;;;;;;;;;ACFA,YAAY,mBAAO,CAAC,oHAAoB;;AAExC;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACND,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,6BAA6B,mBAAO,CAAC,8IAAiC;;AAEtE;;AAEA;;;;;;;;;;;;;ACLa;AACb,gBAAgB,mBAAO,CAAC,8HAAyB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACjBA,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACNA,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,uBAAuB,mBAAO,CAAC,0JAAuC;AACtE,kBAAkB,mBAAO,CAAC,oIAA4B;AACtD,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,WAAW,mBAAO,CAAC,kHAAmB;AACtC,4BAA4B,mBAAO,CAAC,wJAAsC;AAC1E,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD;;AAEA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;;;;;;AChDA,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,2BAA2B,mBAAO,CAAC,sJAAqC;AACxE,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,iBAAiB,mBAAO,CAAC,gIAA0B;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACfA,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,qBAAqB,mBAAO,CAAC,sIAA6B;AAC1D,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,kBAAkB,mBAAO,CAAC,kIAA2B;;AAErD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,gBAAgB;AACnB;AACA;AACA;AACA;;;;;;;;;;;;ACnBA,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,iCAAiC,mBAAO,CAAC,oKAA4C;AACrF,+BAA+B,mBAAO,CAAC,8JAAyC;AAChF,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,kBAAkB,mBAAO,CAAC,kIAA2B;AACrD,UAAU,mBAAO,CAAC,gHAAkB;AACpC,qBAAqB,mBAAO,CAAC,sIAA6B;;AAE1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,gBAAgB;AACnB;AACA;;;;;;;;;;;;ACnBA,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,gCAAgC,mBAAO,CAAC,oKAA4C;;AAEpF,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA,yBAAyB,mBAAO,CAAC,kJAAmC;AACpE,kBAAkB,mBAAO,CAAC,oIAA4B;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACTA;;;;;;;;;;;;ACAA,UAAU,mBAAO,CAAC,gHAAkB;AACpC,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,+BAA+B,mBAAO,CAAC,0JAAuC;;AAE9E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;AChBA,UAAU,mBAAO,CAAC,gHAAkB;AACpC,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,cAAc,mBAAO,CAAC,sIAA6B;AACnD,iBAAiB,mBAAO,CAAC,gIAA0B;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA,yBAAyB,mBAAO,CAAC,kJAAmC;AACpE,kBAAkB,mBAAO,CAAC,oIAA4B;;AAEtD;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPa;AACb,mCAAmC;AACnC;;AAEA;AACA,gFAAgF,OAAO;;AAEvF;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACZD,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,yBAAyB,mBAAO,CAAC,kJAAmC;;AAEpE;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACvBY;AACb,cAAc,mBAAO,CAAC,wHAAsB;AAC5C,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACbD,iBAAiB,mBAAO,CAAC,kIAA2B;AACpD,gCAAgC,mBAAO,CAAC,oKAA4C;AACpF,kCAAkC,mBAAO,CAAC,wKAA8C;AACxF,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,WAAW,mBAAO,CAAC,gIAA0B;AAC7C,kBAAkB,mBAAO,CAAC,gIAA0B;;AAEpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACbD,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,WAAW,mBAAO,CAAC,gIAA0B;AAC7C,kBAAkB,mBAAO,CAAC,gIAA0B;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACbD,iBAAiB,mBAAO,CAAC,sHAAqB;;;;;;;;;;;;ACA9C;AACA;AACA,YAAY;AACZ,GAAG;AACH,YAAY;AACZ;AACA;;;;;;;;;;;;ACNA,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,2BAA2B,mBAAO,CAAC,sJAAqC;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACXA,eAAe,mBAAO,CAAC,0HAAuB;;AAE9C;AACA;AACA;AACA;;;;;;;;;;;;ACLA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,WAAW,mBAAO,CAAC,kHAAmB;AACtC,UAAU,mBAAO,CAAC,gHAAkB;AACpC,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,6BAA6B,mBAAO,CAAC,8IAAiC;AACtE,0BAA0B,mBAAO,CAAC,sIAA6B;;AAE/D;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;;;;;;;;;;;ACtCD,cAAc,mBAAO,CAAC,qHAAe;AACrC,iBAAiB,mBAAO,CAAC,qHAAe;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;ACpBa;AACb,kBAAkB,mBAAO,CAAC,uHAAgB;;AAE1C;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACrDa;AACb,eAAe,mBAAO,CAAC,4HAAwB;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,WAAW,mBAAO,CAAC,kHAAmB;;AAEtC;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;;;;;;;;;;;;ACTa;AACb,iBAAiB,mBAAO,CAAC,kIAA2B;AACpD,2BAA2B,mBAAO,CAAC,sJAAqC;AACxE,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,kBAAkB,mBAAO,CAAC,gIAA0B;;AAEpD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,KAAK;AACL;AACA;;;;;;;;;;;;AClBA,qBAAqB,mBAAO,CAAC,sJAAqC;AAClE,UAAU,mBAAO,CAAC,gHAAkB;AACpC,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;;AAEA;AACA;AACA,uCAAuC,iCAAiC;AACxE;AACA;;;;;;;;;;;;ACVA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,UAAU,mBAAO,CAAC,gHAAkB;;AAEpC;;AAEA;AACA;AACA;;;;;;;;;;;;ACPA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,cAAc,mBAAO,CAAC,wHAAsB;;AAE5C;AACA,kDAAkD;;AAElD;AACA,qEAAqE;AACrE,CAAC;AACD;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACbY;AACb,YAAY,mBAAO,CAAC,oHAAoB;;AAExC;AACA;AACA;AACA;AACA,+CAA+C,SAAS,EAAE;AAC1D,GAAG;AACH;;;;;;;;;;;;ACTA,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,6BAA6B,mBAAO,CAAC,0JAAuC;;AAE5E,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1Ba;AACb,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,6BAA6B,mBAAO,CAAC,0JAAuC;;AAE5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,MAAM;AACd;AACA;;;;;;;;;;;;ACbA,6BAA6B,mBAAO,CAAC,0JAAuC;AAC5E,kBAAkB,mBAAO,CAAC,gIAA0B;;AAEpD;AACA;AACA;;AAEA,sBAAsB,gDAAgD;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3BA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,YAAY,mBAAO,CAAC,oHAAoB;AACxC,cAAc,mBAAO,CAAC,gIAA0B;AAChD,WAAW,mBAAO,CAAC,kIAA2B;AAC9C,WAAW,mBAAO,CAAC,kHAAmB;AACtC,oBAAoB,mBAAO,CAAC,wJAAsC;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AAC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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,6BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,wCAAwC,+CAA+C;AACvF;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,GAAG,2CAA2C;AAC9C;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA;AACA,GAAG,8CAA8C;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,GAAG,yDAAyD;AAC5D;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,GAAG,2DAA2D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AClXD,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,wBAAwB,mBAAO,CAAC,gJAAkC;AAClE,qBAAqB,mBAAO,CAAC,sJAAqC;AAClE,0BAA0B,mBAAO,CAAC,oKAA4C;AAC9E,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,kIAA2B;AAClD,eAAe,mBAAO,CAAC,0HAAuB;AAC9C,YAAY,mBAAO,CAAC,oHAAoB;AACxC,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,0BAA0B,EAAE;AACpD,0BAA0B,wBAAwB;AAClD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC3Da;AACb,eAAe,mBAAO,CAAC,0HAAuB;AAC9C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,YAAY,mBAAO,CAAC,oHAAoB;AACxC,YAAY,mBAAO,CAAC,kIAA2B;;AAE/C;AACA;AACA;;AAEA,qCAAqC,6BAA6B,0BAA0B,YAAY,EAAE;AAC1G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,eAAe;AACrB;;;;;;;;;;;;;ACxBa;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,6BAA6B,mBAAO,CAAC,4JAAwC;;AAE7E;AACA;AACA,GAAG,wEAAwE;AAC3E;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACXY;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,iBAAiB,mBAAO,CAAC,kIAA2B;AACpD,6BAA6B,mBAAO,CAAC,0JAAuC;AAC5E,2BAA2B,mBAAO,CAAC,wJAAsC;;AAEzE;AACA;AACA,GAAG,2EAA2E;AAC9E;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACbY;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,6BAA6B,mBAAO,CAAC,4JAAwC;;AAE7E;AACA;AACA,GAAG,2EAA2E;AAC9E;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACXY;AACb,aAAa,mBAAO,CAAC,0IAA+B;AACpD,0BAA0B,mBAAO,CAAC,sIAA6B;AAC/D,qBAAqB,mBAAO,CAAC,wIAA8B;;AAE3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;AC5BD,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,aAAa,mBAAO,CAAC,oIAA4B;;AAEjD;AACA;AACA,GAAG,gCAAgC;AACnC;AACA,CAAC;;;;;;;;;;;;;ACPY;AACb,oCAAoC,mBAAO,CAAC,8KAAiD;AAC7F,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,6BAA6B,mBAAO,CAAC,0JAAuC;AAC5E,yBAAyB,mBAAO,CAAC,kJAAmC;AACpE,iBAAiB,mBAAO,CAAC,kJAAmC;;AAE5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,oBAAoB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;;;;;;;AC7HY;AACb,oCAAoC,mBAAO,CAAC,8KAAiD;AAC7F,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,6BAA6B,mBAAO,CAAC,0JAAuC;AAC5E,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,iBAAiB,mBAAO,CAAC,kJAAmC;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACjCY;AACb,oCAAoC,mBAAO,CAAC,8KAAiD;AAC7F,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,6BAA6B,mBAAO,CAAC,0JAAuC;AAC5E,yBAAyB,mBAAO,CAAC,gJAAkC;AACnE,yBAAyB,mBAAO,CAAC,kJAAmC;AACpE,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,qBAAqB,mBAAO,CAAC,kJAAmC;AAChE,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,YAAY,mBAAO,CAAC,oHAAoB;;AAExC;AACA;AACA;;AAEA;AACA,qCAAqC,iCAAiC,EAAE;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACrIY;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,YAAY,mBAAO,CAAC,gIAA0B;AAC9C,6BAA6B,mBAAO,CAAC,4JAAwC;;AAE7E;AACA;AACA,GAAG,wEAAwE;AAC3E;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACXD;AACA;AACa;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,UAAU,mBAAO,CAAC,gHAAkB;AACpC,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,qBAAqB,mBAAO,CAAC,sJAAqC;AAClE,gCAAgC,mBAAO,CAAC,gKAA0C;;AAElF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,KAAK,6BAA6B;AAClC;AACA,GAAG;AACH;;;;;;;;;;;;ACjDA,4BAA4B,mBAAO,CAAC,0JAAuC;;AAE3E;AACA;AACA;;;;;;;;;;;;;ACJa;AACb,QAAQ,mBAAO,CAAC,sHAAqB;AACrC,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,cAAc,mBAAO,CAAC,wHAAsB;AAC5C,kBAAkB,mBAAO,CAAC,gIAA0B;AACpD,oBAAoB,mBAAO,CAAC,oIAA4B;AACxD,YAAY,mBAAO,CAAC,oHAAoB;AACxC,UAAU,mBAAO,CAAC,gHAAkB;AACpC,cAAc,mBAAO,CAAC,0HAAuB;AAC7C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,eAAe,mBAAO,CAAC,4HAAwB;AAC/C,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,kBAAkB,mBAAO,CAAC,kIAA2B;AACrD,+BAA+B,mBAAO,CAAC,8JAAyC;AAChF,yBAAyB,mBAAO,CAAC,oIAA4B;AAC7D,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,gCAAgC,mBAAO,CAAC,oKAA4C;AACpF,kCAAkC,mBAAO,CAAC,sLAAqD;AAC/F,kCAAkC,mBAAO,CAAC,wKAA8C;AACxF,qCAAqC,mBAAO,CAAC,8KAAiD;AAC9F,2BAA2B,mBAAO,CAAC,sJAAqC;AACxE,iCAAiC,mBAAO,CAAC,oKAA4C;AACrF,WAAW,mBAAO,CAAC,kHAAmB;AACtC,eAAe,mBAAO,CAAC,0HAAuB;AAC9C,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,gBAAgB,mBAAO,CAAC,8HAAyB;AACjD,iBAAiB,mBAAO,CAAC,gIAA0B;AACnD,UAAU,mBAAO,CAAC,gHAAkB;AACpC,sBAAsB,mBAAO,CAAC,4IAAgC;AAC9D,mCAAmC,mBAAO,CAAC,4JAAwC;AACnF,4BAA4B,mBAAO,CAAC,0JAAuC;AAC3E,qBAAqB,mBAAO,CAAC,4IAAgC;AAC7D,0BAA0B,mBAAO,CAAC,sIAA6B;AAC/D,eAAe,mBAAO,CAAC,wIAA8B;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD;AACnD,sBAAsB,yCAAyC,WAAW,IAAI;AAC9E,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF;AACzF;AACA,KAAK;AACL;AACA,mDAAmD,iDAAiD;AACpG,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,kCAAkC;AAChH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gFAAgF,eAAe;AAC/F;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG,yEAAyE;AAC5E;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED,GAAG,qDAAqD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,mBAAmB,EAAE;AAC/C,0BAA0B,oBAAoB;AAC9C,CAAC;;AAED,GAAG,2EAA2E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,GAAG,uDAAuD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,GAAG,0DAA0D,kCAAkC,EAAE,GAAG;AACpG;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,4BAA4B,YAAY,QAAQ;AAChD;AACA,iDAAiD;AACjD,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC1SA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,mBAAmB,mBAAO,CAAC,oIAA4B;AACvD,cAAc,mBAAO,CAAC,sIAA6B;AACnD,WAAW,mBAAO,CAAC,kHAAmB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACdA,aAAa,mBAAO,CAAC,sHAAqB;AAC1C,mBAAmB,mBAAO,CAAC,oIAA4B;AACvD,2BAA2B,mBAAO,CAAC,wIAA8B;AACjE,WAAW,mBAAO,CAAC,kHAAmB;AACtC,sBAAsB,mBAAO,CAAC,4IAAgC;;AAE9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9BA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;ACnBA;;;;;AAKAA,MAAM,CAACC,OAAP,GAAiBC,aAAjB;AACA;;;;;;;;AAOA,SAASA,aAAT,CAAwBC,GAAxB,EAA6BC,KAA7B,EAAoC;AAClC,MAAIC,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,OAAKH,GAAL,GAAWA,GAAX;AACA,OAAKC,KAAL,GAAcA,KAAK,KAAK,IAAX,GAAmB,IAAnB,GAA0BG,QAAQ,CAACH,KAAD,CAAR,GAAkB,GAAzD,CAHkC,CAG2B;;AAC7D,OAAKI,OAAL,GAAe,KAAf,CAJkC,CAIb;AACtB;AACD;;;;;;;AAKAN,aAAa,CAACO,SAAd,CAAwBC,QAAxB,GAAmC,YAAY;AAC7C,OAAKF,OA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","file":"iepjsmax.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * This file is part of Sesatheque.\n *   Copyright 2014-2015, Association SÃ©samath\n *\n * Sesatheque is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License version 3\n * as published by the Free Software Foundation.\n *\n * Sesatheque is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Sesatheque (LICENCE.txt).\n * @see http://www.gnu.org/licenses/agpl.txt\n *\n *\n * Ce fichier fait partie de l'application SÃ©sathÃ¨que, crÃ©Ã©e par l'association SÃ©samath.\n *\n * SÃ©sathÃ¨que est un logiciel libre ; vous pouvez le redistribuer ou le modifier suivant\n * les termes de la GNU Affero General Public License version 3 telle que publiÃ©e par la\n * Free Software Foundation.\n * SÃ©sathÃ¨que est distribuÃ© dans l'espoir qu'il sera utile, mais SANS AUCUNE GARANTIE,\n * sans mÃªme la garantie tacite de QUALITÃ‰ MARCHANDE ou d'ADÃ‰QUATION Ã  UN BUT PARTICULIER.\n * Consultez la GNU Affero General Public License pour plus de dÃ©tails.\n * Vous devez avoir reÃ§u une copie de la GNU General Public License en mÃªme temps que SÃ©sathÃ¨que\n * (cf LICENCE.txt et http://vvlibri.org/fr/Analyse/gnu-affero-general-public-license-v3-analyse\n * pour une explication en franÃ§ais)\n */\n'use strict'\n\nvar log = require('../utils/log')\nvar hasProp = require('../index').hasProp\n\n/**\n * Ajoute une css dans le <head> de la page\n *\n * DÃ©clarÃ© par init (dÃ¨s son chargement)\n * @param {string}  file Chemin du fichier css (mis dans href tel quel)\n */\nfunction addCss (file) {\n  var head = window.document.getElementsByTagName('head')[0]\n  var links = head.getElementsByTagName('link')\n  var dejala = false\n  for (var i = 0; i < links.length; i++) {\n    if (links[i].href === file) {\n      dejala = true\n      break\n    }\n  }\n\n  if (dejala) {\n    log(file + \" Ã©tait dÃ©jÃ  prÃ©sent, on ne l'ajoute pas\")\n  } else {\n    var elt = window.document.createElement('link')\n    elt.rel = 'stylesheet'\n    elt.type = 'text/css'\n    elt.href = file\n    head.appendChild(elt)\n  }\n}\n\n/**\n * Ajoute un js Ã  la fin du body et appelle la callback quand il est chargÃ©\n * @param {string}  file Chemin du fichier jss (mis dans src tel quel)\n */\nfunction addJs (file, cb) {\n  function callCb () {\n    cb()\n    elt.removeEventListener('load', callCb)\n  }\n  /**\n   * @private\n   * @type {HTMLElement}\n   */\n  var body = window.document.getElementsByTagName('body')[0]\n  var elt = window.document.createElement('script')\n  elt.type = 'text/javascript'\n  // pour que Ã§a marche mieux partout, il vaut mieux mettre le listener onload aprÃ¨s avoir mis l'Ã©lÃ©ment dans le dom\n  body.appendChild(elt)\n  elt.addEventListener('load', callCb)\n  // et ensuite indiquer le fichier Ã  charger\n  elt.src = file\n}\n\n/**\n * Ajoute un Ã©lÃ©ment html de type tag Ã  parent\n * @param {HTMLElement} parent\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} content\n * @returns {HTMLElement} L'Ã©lÃ©ment ajoutÃ©\n */\nfunction addElement (parent, tag, attrs, content) {\n  var elt = getElement(tag, attrs, content)\n  parent.appendChild(elt)\n\n  return elt\n}\n\n/**\n * Ajoute un Ã©lÃ©ment html juste aprÃ¨s element\n * @param {HTMLElement} element\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} content\n * @returns {HTMLElement} L'Ã©lÃ©ment ajoutÃ©\n */\nfunction addElementAfter (element, tag, attrs, content) {\n  var newElt = getElement(tag, attrs, content)\n  var parent = element.parentNode\n  // pas de insertAfter, si nextSibling est null Ã§a le mettra Ã  la fin, cf https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n  if (parent) parent.insertBefore(newElt, element.nextSibling)\n  else log.error(new Error(\"Navigateur incompatible (pas de parentNode), impossible d'ajouter l'Ã©lÃ©ment\"))\n\n  return newElt\n}\n\n/**\n * Ajoute un Ã©lÃ©ment html juste avant element\n * @param {HTMLElement} element\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} content\n * @returns {HTMLElement} L'Ã©lÃ©ment ajoutÃ©\n */\nfunction addElementBefore (element, tag, attrs, content) {\n  var newElt = getElement(tag, attrs, content)\n  var parent = element.parentNode\n  if (parent) parent.insertBefore(newElt, element)\n  else log.error(new Error(\"Navigateur incompatible (pas de parentNode), impossible d'insÃ©rer l'Ã©lÃ©ment\"))\n\n  return newElt\n}\n\n/**\n * Ajoute un Ã©lÃ©ment html comme premier enfant de parent\n * @param {HTMLElement} parent\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} content\n * @returns {HTMLElement} L'Ã©lÃ©ment ajoutÃ©\n */\nfunction addElementFirstChild (parent, tag, attrs, content) {\n  var newElt = getElement(tag, attrs, content)\n  parent.insertBefore(newElt, parent.firstChild)\n\n  return newElt\n}\n\n/**\n * Ajoute un Ã©lÃ©ment html comme frÃ¨re aÃ®nÃ© de elementRef\n * @param {HTMLElement} elementRef\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} content\n * @returns {HTMLElement} L'Ã©lÃ©ment ajoutÃ©\n */\nfunction addElementFirstSibling (elementRef, tag, attrs, content) {\n  var newElt = getElement(tag, attrs, content)\n  elementRef.parentNode.insertBefore(newElt, elementRef.parentNode.firstChild)\n\n  return newElt\n}\n\n/**\n * Ajoute du texte dans un Ã©lÃ©ment\n *\n * DÃ©clarÃ© par init (dÃ¨s son chargement)\n * @param {HTMLElement} elt\n * @param {string} text\n */\nfunction addText (elt, text) {\n  elt.appendChild(window.document.createTextNode(text))\n}\n\n/**\n * Vide un Ã©lÃ©ment html de tous ses enfants\n *\n * DÃ©clarÃ© par init (dÃ¨s son chargement)\n * @param {HTMLElement} element\n */\nfunction empty (element) {\n  if (element && element.firstChild) {\n    while (element.firstChild) element.removeChild(element.firstChild)\n  }\n}\n\n/**\n * Retourne un Ã©lÃ©ment html de type tag (non insÃ©rÃ© dans le dom)\n *\n * DÃ©clarÃ© par init (dÃ¨s son chargement)\n * @param {string} tag\n * @param {Object=} attrs Les attributs\n * @param {string=} txtContent\n */\nfunction getElement (tag, attrs, txtContent) {\n  var elt = window.document.createElement(tag)\n  var attr\n  try {\n    if (attrs) {\n      for (attr in attrs) {\n        if (hasProp(attrs, attr)) {\n          if (attr === 'class') elt.className = attrs.class\n          else if (attr === 'className') elt.className = attrs.className\n          else if (attr === 'style') setStyles(elt, attrs.style)\n          else elt.setAttribute(attr, attrs[attr])\n        }\n      }\n    }\n  } catch (error) {\n    log('plantage dans getElement ' + tag + ' avec les attributs ', attrs, error)\n  }\n\n  if (txtContent) addText(elt, txtContent)\n\n  return elt\n}\n\n/**\n * Retourne la taille de la fenÃªtre\n * @returns {{width: number, height: number}}\n */\nfunction getSize () {\n  // suivant que l'on est en mode standard ou quirk faut prendre l'un ou l'autre\n  var body = (window.document.compatMode === 'CSS1Compat') ? window.document.documentElement : window.document.body\n  // en cas de zoom, window.innerWidth est plus petit, et c'est la bonne valeur\n  return {\n    width: Math.floor(Math.min(body.clientWidth, window.innerWidth)),\n    height: Math.floor(Math.min(body.clientHeight, window.innerHeight))\n  }\n}\n\n/**\n * Retourne un id qui n'existe pas encore dans le dom (mais ne le crÃ©Ã© pas)\n */\nvar getNewId = (function () {\n  // au dela de 10000 id dans un dom y'a un pb !\n  var max = 10000\n  // une closure pour conserver la valeur de cette variable privÃ©e entre 2 appels\n  var lastId = 0\n  var id = 'sesa' + lastId\n  return function getNewId () {\n    while (window.document.getElementById(id) && lastId < max) {\n      lastId++\n      id = 'sesa' + lastId\n    }\n    if (lastId === max) throw Error('Max de ' + max + ' id gÃ©nÃ©rÃ©s atteint')\n\n    return id\n  }\n})()\n\n/**\n * Affecte des styles Ã  un Ã©lÃ©ment html (on peut pas affecter elt.style directement car read only, faut faire du elt.style.foo = bar)\n * sans planter en cas de pb (on le signale juste en console)\n *\n * DÃ©clarÃ© par init (dÃ¨s son chargement)\n * @param {HTMLElement} elt\n * @param {string|object} styles\n */\nfunction setStyles (elt, styles) {\n  try {\n    if (elt && elt.style) {\n      if (typeof styles === 'string') {\n        styles = styles.split(';')\n        styles.forEach(function (paire) {\n          paire = /([\\w]+):(.+)/.exec(paire)\n          if (paire && paire.length === 3) {\n            var key = paire[1]\n            elt.style[key] = paire[2]\n          }\n        })\n      } else if (typeof styles === 'object') {\n        for (var prop in styles) {\n          if (hasProp(styles, prop)) {\n            elt.style[prop] = styles[prop]\n          }\n        }\n      }\n    }\n  } catch (error) {\n    log.error(error)\n  }\n}\n\n/**\n * Fonctions gÃ©nÃ©riques pour manipuler le dom\n * @service sesajstools/dom\n */\nmodule.exports = {\n  // faut rester en es5 :-/ (uglifyJs aime pas si on rÃ©pÃ¨te pas `prop: prop`)\n  addCss: addCss,\n  addJs: addJs,\n  addElement: addElement,\n  addElementAfter: addElementAfter,\n  addElementBefore: addElementBefore,\n  addElementFirstChild: addElementFirstChild,\n  addElementFirstSibling: addElementFirstSibling,\n  addText: addText,\n  empty: empty,\n  getElement: getElement,\n  getSize: getSize,\n  getNewId: getNewId,\n  setStyles: setStyles\n}\n","/**\n * This file is part of Sesatheque.\n *   Copyright 2014-2015, Association SÃ©samath\n *\n * Sesatheque is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License version 3\n * as published by the Free Software Foundation.\n *\n * Sesatheque is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Sesatheque (LICENCE.txt).\n * @see http://www.gnu.org/licenses/agpl.txt\n *\n *\n * Ce fichier fait partie de l'application SÃ©sathÃ¨que, crÃ©Ã©e par l'association SÃ©samath.\n *\n * SÃ©sathÃ¨que est un logiciel libre ; vous pouvez le redistribuer ou le modifier suivant\n * les termes de la GNU Affero General Public License version 3 telle que publiÃ©e par la\n * Free Software Foundation.\n * SÃ©sathÃ¨que est distribuÃ© dans l'espoir qu'il sera utile, mais SANS AUCUNE GARANTIE,\n * sans mÃªme la garantie tacite de QUALITÃ‰ MARCHANDE ou d'ADÃ‰QUATION Ã  UN BUT PARTICULIER.\n * Consultez la GNU Affero General Public License pour plus de dÃ©tails.\n * Vous devez avoir reÃ§u une copie de la GNU General Public License en mÃªme temps que SÃ©sathÃ¨que\n * (cf LICENCE.txt et http://vvlibri.org/fr/Analyse/gnu-affero-general-public-license-v3-analyse\n * pour une explication en franÃ§ais)\n */\n'use strict'\n\n// ajoute du forEach sur les Array si le navigateur connait pas Ã§a\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function (fn) { // eslint-disable-line no-extend-native\n    for (var i = 0; i < this.length; i++) {\n      // on passe en argument (eltDuTableau, index, tableau)\n      fn(this[i], i, this)\n    }\n  }\n}\n\nvar specialHtmlChars = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#039;'\n}\n\n/**\n * Retourne le nb de slash dans la string\n * @param {sting} str\n * @return {number} le nombre de slashes dans str\n * @throws {TypeError} Si str n'Ã©tait pas une string\n */\nfunction countSlash (str) {\n  if (typeof str !== 'string') throw new TypeError('countSlash nâ€™accepte quâ€™une string en paramÃ¨tre')\n  return str.replace(/[^/]+/g, '').length\n}\n\n/**\n * Ã‰chappe les caractÃ¨res spÃ©ciaux en les remplaÃ§ant par leur Ã©quivalent html\n * Merci Ã  jbo5112 https://stackoverflow.com/a/4835406\n * cf https://jsperf.com/escape-html-special-chars/11\n * @param {string} str\n * @param {boolean} [all] passer true pour remplacer les 5 caractÃ¨res \"&<>' (sinon Ã§a ne remplace que <), attention dans ce cas ce n'est plus invariant (il ne faut pas rappeler la fct sur une chaÃ®ne qui y serait dÃ©jÃ  passÃ©e)\n * @return {void|string|*}\n */\nfunction escapeForHtml (str, all) {\n  if (!all) return str.replace(/</g, '&lt;')\n  return str.replace(/[&<>\"']/g, function (char) { return specialHtmlChars[char] })\n}\n\n/**\n * Formate une date, en retournant format avec les %x interprÃ©tÃ©s (si x est connu, laissÃ© tel quel sinon).\n * Attention, pas la mÃªme syntaxe que an-format-date (Â©arNumÃ©ral).\n *\n * Formats gÃ©rÃ©s comme la commande unix date\n * - %% symbole %\n * - %F YYYY-mm-dd\n * - %T HH:MM:SS\n * - %d jour du mois (01 Ã  31)\n * - %m nÂ° du mois (01 Ã  12)\n * - %Y annÃ©e sur 4 chiffres\n * - %y annÃ©e sur 2 chiffres\n * - %H heure (00 Ã  23)/\n * - %M minutes (00 Ã  59)\n * - %S secondes (00 Ã  59)\n * - %s timestamp (secondes depuis 01/01/1970/)\n * Formats ajoutÃ©s (o Ã©tait la seule lettre dispo)\n * - %o millisecondes (000 Ã  999)\n * - %O heure avec ms (idem %T.%o ou %H:%M:%S.%o)\n * @param {string} format\n * @param {Date} [date] La date Ã  formater (now si non fourni)\n * @return {string}\n */\nfunction formatDate (format, date) {\n  function pad0 (val, nb) {\n    return pad(val, '0', nb)\n  }\n  if (!date) date = new Date()\n  else if (!(date instanceof Date)) throw new TypeError('date is not a Date')\n  if (typeof format !== 'string') throw new TypeError('format is not a string')\n  return format.replace(/%(.)/g, function (capture, formatChar) {\n    switch (formatChar) {\n      case 'd': return pad0(date.getDate())\n      case 'F': return String(date.getFullYear()) + '-' + pad0(date.getMonth() + 1) + '-' + pad0(date.getDate()) // '%Y-%m-%d'\n      case 'H': return pad0(date.getHours())\n      case 'm': return pad0(date.getMonth() + 1)\n      case 'M': return pad0(date.getMinutes())\n      case 'o': return pad0(date.getMilliseconds(), 3)\n      case 'O': return pad0(date.getHours()) + ':' + pad0(date.getMinutes()) + ':' + pad0(date.getSeconds()) + '.' + pad0(date.getMilliseconds(), 3) // '%H:%M:%S.%o'\n      case 's': return pad0(Math.round(date.getTime() / 1000))\n      case 'S': return pad0(date.getSeconds())\n      case 'T': return pad0(date.getHours()) + ':' + pad0(date.getMinutes()) + ':' + pad0(date.getSeconds()) // '%H:%M:%S'\n      case 'y': return String(date.getFullYear()).substr(2)\n      case 'Y': return date.getFullYear()\n      case '%': return '%' // pour remplacer %% par %\n      // On change rien si on connait pas le format demandÃ©\n      default: return '%' + formatChar\n    }\n  })\n}\n\n/**\n * Renvoie un token alÃ©atoire de 22 caractÃ¨res\n * Pas aussi random ni unique que l'usage de crypto ou d'un module uuid\n * mais suffisant dans pas mal de cas (utiliser an-uuid sinon)\n * @returns {string}\n */\nfunction getToken () {\n  return Math.random().toString(36).substr(2) + Math.random().toString(36).substr(2)\n}\n\n/**\n * Retourne true si object est un objet avec la propriÃ©tÃ© prop\n * @param object\n * @param prop\n * @return {boolean}\n */\nfunction hasProp (object, prop) {\n  if (typeof object === 'object') return Object.prototype.hasOwnProperty.call(object, prop)\n  return false\n}\n\n/**\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isArray (arg) {\n  return Array.isArray(arg)\n}\n\n/**\n * true si value est un array vide (mais false s'il contient un Ã©lÃ©ment false|undefined)\n * @param value\n * @returns {boolean}\n */\nfunction isArrayEmpty (value) {\n  return Boolean(Array.isArray(value) && value.length === 0)\n}\n\n/**\n * true si value est un array non vide (mÃªme s'il contient un seul Ã©lÃ©ment false|undefined|null|'')\n * @param value\n * @returns {boolean}\n */\nfunction isArrayNotEmpty (value) {\n  return Boolean(Array.isArray(value) && value.length)\n}\n\n/**\n * @param arg\n * @returns {boolean}\n */\nfunction isDate (arg) {\n  return typeof arg === 'object' && Object.prototype.toString.call(arg) === '[object Date]'\n}\n\n/**\n * Thanks to bugsnag-js\n * @param {*} value\n * @return {boolean}\n */\nfunction isError (value) {\n  switch (Object.prototype.toString.call(value)) {\n    case '[object Error]':\n      return true\n    case '[object Exception]':\n      return true\n    case '[object DOMException]':\n      return true\n    default:\n      return value instanceof Error\n  }\n}\n\n/**\n * Retourne true si l'argument est une fonction\n * cf https://github.com/lodash/lodash/blob/4.11.2/lodash.js#L10826\n * cette implÃ©mentation plus simple sur typeof bug dans phandomJs 1.9 qui retourne function pour typeof NodeList\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isFunction (arg) {\n  return (typeof arg === 'function')\n}\n\n/**\n * Indique si un array contient un Ã©lÃ©ment\n * @param {Array} ar  Le tableau dans lequel chercher\n * @param {*}     elt L'Ã©lÃ©ment Ã  chercher (type natif, marche pas si c'est un objet littÃ©ral)\n * @returns {boolean}\n * @throws {Error} si on lui passe pas un Array en 1er argument\n */\nfunction isInArray (ar, elt) {\n  if (!Array.isArray(ar)) throw new Error('isInArray veut un tableau en 1er argument')\n  return ar.indexOf(elt) !== -1\n}\n\n/**\n * Retourne true si c'est un entier (utiliser Number.isInteger si c'est dispo)\n * @param arg\n * @param {boolean} [isStringAllowed=false] Passer true pour accepter les strings comme \"42\"\n * @returns {boolean}\n */\nfunction isInt (arg, isStringAllowed) {\n  switch (typeof arg) {\n    case 'number':\n      return Math.floor(arg) === arg\n    case 'string':\n      return Boolean(isStringAllowed && arg && Math.floor(arg) == arg) // eslint-disable-line eqeqeq\n    default:\n      return false\n  }\n}\n\n/**\n * Retourne true pour un entier (number) positif\n * @param arg\n * @param {boolean} [strict=false] passer true pour que 0 renvoie false\n * @param {boolean} [isStringAllowed=false] Passer true pour accepter les strings comme \"42\"\n * @returns {boolean}\n */\nfunction isIntPos (arg, strict, isStringAllowed) {\n  return isInt(arg, isStringAllowed) && (strict ? arg > 0 : arg >= 0)\n}\n\n/**\n * Retourne true sur un objet (donc aussi une fonction, mais pas null)\n * PiquÃ© Ã  lodash (https://github.com/lodash/lodash/blob/4.11.2/lodash.js#L10921)\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isObject (arg) {\n  var type = typeof arg\n  return !!arg && (type === 'object' || type === 'function')\n}\n\n/**\n * Retourne true pour les objets qui n'ont pas d'autre constructeur qu'object (ni null, ni fonction ni regexp ni date ni arrayâ€¦)\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isObjectPlain (arg) {\n  return !!arg && typeof arg === 'object' && Object.prototype.toString.call(arg) === '[object Object]'\n}\n\n/**\n * Retourne true pour les RegExp\n * @param arg\n * @returns {boolean}\n */\nfunction isRegExp (arg) {\n  return !!arg && typeof arg === 'object' && Object.prototype.toString.call(arg) === '[object RegExp]'\n}\n\n/**\n * Retourne true si l'argument est une string\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isString (arg) {\n  return (typeof arg === 'string')\n}\n\n/**\n * @param arg\n * @returns {boolean}\n */\nfunction isUndefined (arg) {\n  return typeof arg === 'undefined'\n}\n\n/**\n * Retourne true si l'argument est une url absolue\n * @param {*} arg\n * @returns {boolean}\n */\nfunction isUrlAbsolute (arg) {\n  return (typeof arg === 'string' && /^https?:\\/\\/[a-z0-9\\-._]+(:[0-9]+)?(\\/|$)/.test(arg))\n}\n\n/**\n * Complete la valeur avec des caractÃ¨res initiaux pour atteindre la longueur voulue\n * @param {number|string} value\n * @param {string} [char=0| ] Le caractÃ¨re Ã  ajouter au dÃ©but (par dÃ©faut 0 si value est un nombre, espace sinon)\n * @param {number) [nb=2] Nb de caractÃ¨res finaux voulus\n * @return {string} padded value\n */\nfunction pad (value, char, nb) {\n  // check char\n  if (char) {\n    if (typeof char !== 'string') char = String(char)\n    if (char.length !== 1) {\n      console.error(new Error('char invalide ' + char))\n      char = undefined\n    }\n  }\n  // init char\n  if (!char) {\n    char = typeof value === 'number' ? '0' : ' '\n  }\n  // cast value\n  if (typeof value !== 'string') value = String(value)\n  // default nb\n  if (!nb) nb = 2\n  // padding\n  while (value.length < nb) value = char + value\n  return value\n}\n\n/**\n * Idem JSON.parse mais renvoie undefined en cas de plantage\n * @param jsonString La string Ã  parser\n * @return {Object}\n */\nfunction parse (jsonString) {\n  var obj\n  if (typeof jsonString === 'string') {\n    try {\n      obj = JSON.parse(jsonString)\n    } catch (e) {\n      if (!isUndefined(console) && console.error) console.error(e)\n    }\n  }\n  return obj\n}\n\n/**\n * split une chaine et fait un trim sur chaque Ã©lÃ©ment\n * @param str\n * @param {string|RegExp} [delim=/[,;\\s]+/] DÃ©limiteur, par dÃ©faut  virgule, point virgule ou n'importe quel espace (incluant tab, \\n & co)\n * @returns {*}\n */\nfunction splitAndTrim (str, delim) {\n  if (typeof str === 'string') {\n    if (!delim) delim = /[,;\\s]+/\n    // split + trim + filter au cas oÃ¹ il y aurait un dÃ©limiteur au dÃ©but ou Ã  la fin\n    // serait plus lisible en es6 mais on peut Ãªtre utilisÃ© par qqun sans babelâ€¦\n    return str.split(delim).map(function (elt) { return elt.trim() }).filter(function (elt) { return elt })\n  }\n  return []\n}\n\n/**\n * Idem JSON.stringify mais sans planter, en cas de ref circulaire sur une propriÃ©tÃ© on renvoie quand mÃªme les autres\n * (avec le message d'erreur de JSON.stringify sur la propriÃ©tÃ© Ã  pb)\n * @param obj\n * @param {number} [indent]  Le nb d'espaces d'indentation\n * @returns {string}\n */\nfunction stringify (obj, indent) {\n  var buffer\n  try {\n    // Ã§a peut planter en cas de ref circulaire\n    buffer = indent ? JSON.stringify(obj, null, indent) : JSON.stringify(obj)\n  } catch (error) {\n    // on a un objet avec ref circulaire\n    var key\n    var value\n    var pile = []\n    for (key in obj) {\n      // on veut le mÃªme comportement que JSON.stringify qui omet les valeurs undefined et les fct\n      // et met du {} pour regexp et function\n      if (hasProp(obj, key) && !isUndefined(obj[key]) && !isFunction(obj[key])) {\n        value = obj[key]\n        buffer = '\"' + key + '\":'\n        try {\n          buffer += indent ? JSON.stringify(value, null, indent) : JSON.stringify(value)\n        } catch (error) {\n          buffer += '\"' + error.toString() + '\"'\n        }\n        pile.push(buffer)\n      }\n    }\n    var sep = ','\n    buffer = '{'\n    if (indent) {\n      var sepSup = '\\n' + ' '.repeat(indent)\n      sep += sepSup\n      buffer += sepSup\n    }\n    buffer += pile.join(sep)\n    if (indent) buffer += '\\n'\n    buffer += '}'\n  }\n  return buffer\n}\n\n/**\n * Retire les accents d'une chaÃ®ne\n * @param {string} string\n * @return {string} la mÃªme dÃ©saccentuÃ©e\n */\nfunction toAscii (string) {\n  function reducer (acc, r) {\n    return acc.replace(r[0], r[1])\n  }\n  if (typeof string === 'string') {\n    // si c'est dÃ©jÃ  sans accent on retourne\n    if (/^[\\w]*$/.test(string)) return string\n    // faut inspecter\n    var toReplace = [\n      [/[Ã¡Ã Ã¢Ã¤Ã£Ã¥]/g, 'a'],\n      [/[ÃÃ€Ã‚Ã„ÃƒÃ…]/g, 'A'],\n      ['Ã§', 'c'],\n      ['Ã‡', 'C'],\n      [/[Ã©Ã¨ÃªÃ«]/g, 'e'],\n      [/[Ã‰ÃˆÃŠÃ‹]/g, 'E'],\n      [/[Ã­Ã¬Ã®Ã¯]/g, 'i'],\n      [/[ÃÃŒÃŽÃ]/g, 'I'],\n      ['Ã±', 'n'],\n      ['Ã‘', 'N'],\n      [/[Ã³Ã²Ã´Ã¶Ãµ]/g, 'o'],\n      [/[Ã“Ã’Ã”Ã–Ã•]/g, 'O'],\n      [/[ÃºÃ¹Ã»Ã¼]/g, 'u'],\n      [/[ÃšÃ™Ã›Ãœ]/g, 'U'],\n      [/[Ã½Ã¿]/g, 'y'],\n      [/[ÃÅ¸]/g, 'Y'],\n      ['Ã¦', 'ae'],\n      ['Ã†', 'AE'],\n      ['Å“', 'oe'],\n      ['Å’', 'OE']\n    ]\n    return toReplace.reduce(reducer, string)\n  }\n  console.error(new TypeError('not a string'), string)\n  return ''\n}\n\n/**\n * Quasi alias de Math.round, cast en entier mais retourne NaN pour tout ce qui\n * ne ressemble pas Ã  un nombre (chaine vide, boolean, null) lÃ  ou round retourne 0 (ou 1 pour true)\n * @param arg\n * @returns {number}\n */\nfunction toInt (arg) {\n  switch (typeof arg) {\n    case 'number':\n      return Math.round(arg)\n    case 'string':\n      if (arg === '') return NaN\n      else return Math.round(arg)\n    default:\n      return NaN\n  }\n}\n\n/**\n * Notre module pour toutes nos fonctions gÃ©nÃ©riques\n * (cf aussi les extensions sesajstools/http/xhr, sesajstools/dom, etc.)\n * @module sesajstools\n */\nmodule.exports = {\n  countSlash: countSlash,\n  escapeForHtml: escapeForHtml,\n  formatDate: formatDate,\n  getToken: getToken,\n  hasProp: hasProp,\n  isArray: isArray,\n  isArrayEmpty: isArrayEmpty,\n  isArrayNotEmpty: isArrayNotEmpty,\n  isDate: isDate,\n  isError: isError,\n  isFunction: isFunction,\n  isInArray: isInArray,\n  isInt: isInt,\n  isIntPos: isIntPos,\n  isObject: isObject,\n  isObjectPlain: isObjectPlain,\n  isRegExp: isRegExp,\n  isString: isString,\n  isUndefined: isUndefined,\n  isUrlAbsolute: isUrlAbsolute,\n  pad: pad,\n  parse: parse,\n  splitAndTrim: splitAndTrim,\n  stringify: stringify,\n  toAscii: toAscii,\n  toInt: toInt\n}\n","/**\n * This file is part of SesaJsTools.\n *   Copyright 2014-2015, Association SÃ©samath\n *\n * SesaJsTools is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License version 3\n * as published by the Free Software Foundation.\n *\n * SesaJsTools is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with SesaJsTools (LICENCE.txt).\n * @see http://www.gnu.org/licenses/agpl.txt\n *\n *\n * Ce fichier fait partie de l'application SÃ©sathÃ¨que, crÃ©Ã©e par l'association SÃ©samath.\n *\n * SÃ©sathÃ¨que est un logiciel libre ; vous pouvez le redistribuer ou le modifier suivant\n * les termes de la GNU Affero General Public License version 3 telle que publiÃ©e par la\n * Free Software Foundation.\n * SÃ©sathÃ¨que est distribuÃ© dans l'espoir qu'il sera utile, mais SANS AUCUNE GARANTIE,\n * sans mÃªme la garantie tacite de QUALITÃ‰ MARCHANDE ou d'ADÃ‰QUATION Ã  UN BUT PARTICULIER.\n * Consultez la GNU Affero General Public License pour plus de dÃ©tails.\n * Vous devez avoir reÃ§u une copie de la GNU General Public License en mÃªme temps que SÃ©sathÃ¨que\n * (cf LICENCE.txt et http://vvlibri.org/fr/Analyse/gnu-affero-general-public-license-v3-analyse\n * pour une explication en franÃ§ais)\n */\n\n'use strict'\n\nvar tools = require('../index')\nvar hasProp = tools.hasProp\n\n/**\n * dump un objet de maniÃ¨re plus complÃ¨te qu'un stringify\n * @param obj\n * @param indent\n * @returns {*}\n */\nmodule.exports = function dump (obj, indent) {\n  // on traite dÃ©jÃ  null\n  if (obj === null) return 'null'\n  // puis les types natifs basiques\n  var type = typeof obj\n  switch (type) {\n    case 'undefined':\n      return obj\n    case 'number':\n    case 'boolean':\n      return String(obj)\n    case 'string':\n      return '\"' + obj.replace('\"', '\\\\\"') + '\"'\n    case 'symbol':\n      return '[Symbol ' + obj.toString() + ']'\n\n    default:\n      if (!indent) indent = 0\n      // decalage de base\n      var prefix = (' ').repeat(indent)\n      indent += 2\n      var innerPrefix = prefix + '  '\n      var pile = []\n      var buffer\n      // object et symbol\n      // on regarde d'abord si on a une mÃ©thode toSource toute prÃªte qui existe sur cet objet\n      // (sauf pour les date qui posent pb sous node)\n      if (tools.isDate(obj)) {\n        return JSON.stringify(obj)\n      } else if (tools.isArray(obj)) {\n        buffer = '[\\n'\n        obj.forEach(function (elt, index) {\n          buffer += innerPrefix + dump(elt, indent) + (index === obj.length - 1 ? '\\n' : ',\\n')\n        })\n        if (obj.length) buffer += prefix + ']'\n        else buffer += ']'\n        return buffer\n      } else if (tools.isRegExp(obj) || tools.isFunction(obj)) {\n        // dans un navigateur toSource existe pour eux, mais pas dans node\n        return (typeof obj.toSource === 'function') ? obj.toSource() : obj.toString()\n      } else if (tools.isObject(obj)) {\n        var nbp = 0\n        for (var p in obj) {\n          if (hasProp(obj, p)) {\n            nbp++\n            // pour dÃ©tecter les refs circulaires, on regarde si JSON.stringify plante,\n            // pas gÃ©nial mais Ã©vite de lancer une rÃ©cursion infinie, Ã  pas si cher (et dump est vraiment rarement utilisÃ© en prod)\n            try {\n              JSON.stringify(obj[p])\n              pile.push(p + ': ' + dump(obj[p], indent))\n            } catch (error) {\n              pile.push(p + ': \"' + error.toString().replace('\"', '\\\\\"') + '\"')\n            }\n          }\n        }\n        if (nbp) return '{\\n' + innerPrefix + pile.join(',\\n' + innerPrefix) + '\\n' + prefix + '}'\n        else if (tools.isObjectPlain(obj)) return prefix + '{}'\n        else return prefix + obj.toString()\n      } else {\n        console.error('dump est tombÃ© sur un truc qui ne ressemble Ã  rien de connu', obj)\n        return tools.stringify(obj, 2)\n      }\n  }\n}\n","/**\n * This file is part of Sesatheque.\n *   Copyright 2014-2015, Association SÃ©samath\n *\n * Sesatheque is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License version 3\n * as published by the Free Software Foundation.\n *\n * Sesatheque is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Sesatheque (LICENCE.txt).\n * @see http://www.gnu.org/licenses/agpl.txt\n *\n *\n * Ce fichier fait partie de l'application SÃ©sathÃ¨que, crÃ©Ã©e par l'association SÃ©samath.\n *\n * SÃ©sathÃ¨que est un logiciel libre ; vous pouvez le redistribuer ou le modifier suivant\n * les termes de la GNU Affero General Public License version 3 telle que publiÃ©e par la\n * Free Software Foundation.\n * SÃ©sathÃ¨que est distribuÃ© dans l'espoir qu'il sera utile, mais SANS AUCUNE GARANTIE\n * sans mÃªme la garantie tacite de QUALITÃ‰ MARCHANDE ou d'ADÃ‰QUATION Ã  UN BUT PARTICULIER.\n * Consultez la GNU Affero General Public License pour plus de dÃ©tails.\n * Vous devez avoir reÃ§u une copie de la GNU General Public License en mÃªme temps que SÃ©sathÃ¨que\n * (cf LICENCE.txt et http://vvlibri.org/fr/Analyse/gnu-affero-general-public-license-v3-analyse\n * pour une explication en franÃ§ais)\n */\n'use strict'\n\nvar dump = require('./dump')\nvar tools = require('../index')\nvar formatDate = tools.formatDate\nvar hasProp = tools.hasProp\n\n// attention, on duplique plus bas pour l'export\nvar levels = {\n  debug: 0,\n  info: 1,\n  notice: 1,\n  warn: 2,\n  warning: 2,\n  error: 3,\n  alert: 4,\n  critical: 4\n}\nvar prefixes = [\n  '[debug]',\n  '[info]',\n  '[warning]',\n  '[error]',\n  '[CRITICAL]'\n]\nvar loggers = [\n  console.info || console.log, // 0 => debug\n  console.log, // 1 => info|notice\n  console.warn || console.error || console.log, // 2 => warning\n  console.error || console.log, // 3 => error\n  console.error || console.log // 4 => critical|alert\n]\n\n// valeurs par dÃ©faut\n/**\n * Niveau minimum requis pour affichage (un niveau 2 affiche warning, error et critical)\n * @private\n * @type {number}\n */\nvar logLevel = levels.info\n// on peut tourner sous node comme dans un navigateur\nvar isNode = typeof process !== 'undefined' && process.env\nvar isCluster = isNode && hasProp(process.env, 'NODE_APP_INSTANCE')\n/**\n * Flag pour savoir s'il faut ajouter la date en prÃ©fixe (false par dÃ©faut dans un navigateur et true ailleurs)\n * @private\n * @type {boolean}\n */\nvar hasDatePrefix = isNode && !isCluster // en mode cluster c'est pm2 qui met le prÃ©fixe de date\nvar datePrefix = '[%O]'\n\n// idem pour le process\nvar hasProcessPrefix = isCluster\n// NODE_APP_INSTANCE est une string, donc '0' ne sera pas falsy\nvar processPrefix = (isCluster && process.env.NODE_APP_INSTANCE) || 'N/A'\n\n/**\n * Ã‰crit en console en ajoutant les prÃ©fixes\n * @param {Array} args arguments d'une autre fct (pseudo Array)\n * @param {number} level\n * @private\n */\nfunction _log (args, level) {\n  try {\n    var logger = loggers[level] || console.log\n    var prefix = ''\n    // date en 1er\n    if (hasDatePrefix) prefix = formatDate(datePrefix)\n    // puis processId\n    if (hasProcessPrefix) {\n      if (prefix) prefix += ' '\n      prefix += '[' + processPrefix + ']'\n    }\n    // puis logLevel\n    if (prefix) prefix += ' '\n    prefix += prefixes[level]\n    // avec le 1er argument sur la mÃªme ligne, mais on rÃ¢le si yâ€™en a pas (pour avoir la trace et retrouver l'appelant)\n    if (args.length < 1) args = [Error('fonction de log appelÃ©e sans contenu')]\n    logger(prefix, args[0])\n    // puis les autres sans prÃ©fixe\n    if (args.length > 1) for (var i = 1; i < args.length; i++) logger(args[i])\n  } catch (e) {\n    // rien, fallait un environnement dÃ©cent avec console...\n  }\n}\n\n/**\n * Un console.log qui plante pas sur les anciens IE (ou d'autres navigateurs qui n'auraient pas de console.log)\n * @param {...*} arguments Nombre variable d'arguments, chacun sera passÃ© Ã  console.log ou console.error si c'est une erreur\n * @service sesajstools/utils/log\n */\nfunction log () {\n  if (logLevel < levels.warning) {\n    _log(arguments, levels.info)\n  }\n}\n// les logger des â‰  niveaux\nlog.debug = function debug () {\n  if (logLevel < levels.info) {\n    _log(arguments, levels.debug)\n  }\n}\nlog.info = function info () {\n  if (logLevel < levels.warning) {\n    _log(arguments, levels.info)\n  }\n}\nlog.warn = function warn () {\n  if (logLevel < levels.error) {\n    _log(arguments, levels.warning)\n  }\n}\nlog.ifError = function error () {\n  if (error && logLevel < levels.critical) {\n    _log(arguments, levels.error)\n  }\n}\nlog.error = function error () {\n  if (logLevel < levels.critical) {\n    _log(arguments, levels.error)\n  }\n}\nlog.critical = function critical () {\n  _log(arguments, levels.critical)\n}\n\n/**\n * Passe logLevel au niveau error (dÃ©sactive donc seulement les infos et warningsâ€¦)\n * Pour comptatibilitÃ© ascendante, Ã  remplacer par log.setLevel(log.levels.error)\n * @deprecated\n */\nlog.disable = function disable () {\n  logLevel = levels.error\n}\n/**\n * Supprime le prÃ©fixe de date\n */\nlog.disableDatePrefix = function disableDatePrefix () {\n  hasDatePrefix = false\n}\n/**\n * Supprime le prÃ©fixe de process\n */\nlog.disableProcessPrefix = function disableProcessPrefix () {\n  hasProcessPrefix = false\n}\n/**\n * Dump un objet en console si le niveau de log est <= Ã  celui indiquÃ©\n * @param {string} message affichÃ© avant le dump\n * @param {*} objToDump peut Ãªtre n'importe quoi\n * @param {object} [options]\n * @param {string|number} [options.max=1000] le nb max de caractÃ¨res affichÃ©s du dump\n * @param {string|number} [options.level=debug] le niveau d'affichage souhaitÃ©\n */\nlog.dump = function (message, objToDump, options) {\n  if (typeof options !== 'object') options = {}\n  var level = options.level || levels.debug\n  if (typeof level === 'string') level = levels[level] || levels.debug\n  var dumped = dump(objToDump)\n  var max = options.max || 1000\n  if (dumped.length > max) dumped = dumped.substr(0, max) + 'â€¦'\n  if (logLevel <= level) _log([message, dumped], level)\n}\n/**\n * Passe logLevel au niveau info (qui le rend plus bavard)\n * Pour comptatibilitÃ© ascendante, Ã  remplacer par log.setLevel(log.levels.info)\n * @deprecated\n */\nlog.enable = function enable () {\n  logLevel = levels.info\n}\n/**\n * Active le prÃ©fixe de date\n */\nlog.enableDatePrefix = function enableDatePrefix () {\n  hasDatePrefix = true\n}\n/**\n * Active le prÃ©fixe de process\n */\nlog.enableProcessPrefix = function enableProcessPrefix () {\n  if (typeof process === 'undefined') console.error('process not available')\n  else hasProcessPrefix = true\n}\n/**\n * Modifie le prÃ©fixe de date (cf formats gÃ©rÃ©s par formatDate)\n * @param prefix\n */\nlog.setDatePrefix = function setDatePrefix (prefix) {\n  if (typeof prefix === 'string') datePrefix = prefix\n  else log.error(new Error('Le prÃ©fixe de log doit Ãªtre une string'))\n}\n/**\n * Modifie le niveau de log\n * @param {number|string} level\n */\nlog.setLogLevel = function setLogLevel (level) {\n  switch (level) {\n    case 0:\n    case '0':\n    case 'debug':\n      logLevel = levels.debug\n      break\n    case 1:\n    case '1':\n    case 'info':\n    case 'notice':\n      logLevel = levels.notice\n      break\n    case 2:\n    case '2':\n    case 'warn':\n    case 'warning':\n      logLevel = levels.warning\n      break\n    case 3:\n    case '3':\n    case 'err':\n    case 'error':\n      logLevel = levels.error\n      break\n    case 4:\n    case '4':\n    case 'alert':\n    case 'crit':\n    case 'critical':\n      logLevel = levels.critical\n      break\n    default:\n      log.error('niveau dâ€™erreur ' + level)\n  }\n}\n// et on ajoute les levels, mais sans ref pour empÃªcher de modifier nos constantes locale de l'extÃ©rieur\nlog.levels = {\n  debug: 0,\n  info: 1,\n  notice: 1,\n  warn: 2,\n  warning: 2,\n  error: 3,\n  alert: 4,\n  critical: 4\n}\n// ce serait plus Ã©lÃ©gant de cloner (quoi que, en es5 Ã§a reste moche) mais Ã§a empÃªche l'autocompletion\n\nmodule.exports = log\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar hide = require('../internals/hide');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  hide(ArrayPrototype, UNSCOPABLES, create(null));\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.github.io/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = sloppyArrayMethod('forEach') ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var bind = require('../internals/bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  return !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          hide(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    hide(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/wrapped-well-known-symbol');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      hide(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n    re.exec = function () { execCalled = true; return null; };\n\n    if (KEY === 'split') {\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n    }\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !REPLACE_SUPPORTS_NAMED_GROUPS) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n    if (sham) hide(RegExp.prototype[SYMBOL], 'sham', true);\n  }\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var shared = require('../internals/shared');\n\nmodule.exports = shared('native-function-to-string', Function.toString);\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var O = 'object';\nvar check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == O && globalThis) ||\n  check(typeof window == O && window) ||\n  check(typeof self == O && self) ||\n  check(typeof global == O && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = {};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar hide = require('../internals/hide');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    hide(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar iterate = module.exports = function (iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {\n  var boundFunction = bind(fn, that, AS_ENTRIES ? 2 : 1);\n  var iterator, iterFn, index, length, result, step;\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = AS_ENTRIES\n          ? boundFunction(anObject(step = iterable[index])[0], step[1])\n          : boundFunction(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  while (!(step = iterator.next()).done) {\n    result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);\n    if (result && result instanceof Result) return result;\n  } return new Result(false);\n};\n\niterate.stop = function (result) {\n  return new Result(true, result);\n};\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar hide = require('../internals/hide');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","module.exports = {};\n","// `Math.sign` method implementation\n// https://tc39.github.io/ecma262/#sec-math.sign\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar classof = require('../internals/classof-raw');\nvar macrotask = require('../internals/task').set;\nvar userAgent = require('../internals/user-agent');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar IS_NODE = classof(process) == 'process';\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  } else if (MutationObserver && !/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    then = promise.then;\n    notify = function () {\n      then.call(promise, flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var global = require('../internals/global');\nvar nativeFunctionToString = require('../internals/function-to-string');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(nativeFunctionToString.call(WeakMap));\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar PROTOTYPE = 'prototype';\nvar Empty = function () { /* empty */ };\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var length = enumBugKeys.length;\n  var lt = '<';\n  var script = 'script';\n  var gt = '>';\n  var js = 'java' + script + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  iframe.src = String(js);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + script + gt + 'document.F=Object' + lt + '/' + script + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (length--) delete createDict[PROTOTYPE][enumBugKeys[length]];\n  return createDict();\n};\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n\nhiddenKeys[IE_PROTO] = true;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return nativeGetOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : nativeGetOwnPropertyNames(toIndexedObject(it));\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar classof = require('../internals/classof');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\n// `Object.prototype.toString` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nmodule.exports = String(test) !== '[object z]' ? function toString() {\n  return '[object ' + classof(this) + ']';\n} : test.toString;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar nativeParseFloat = global.parseFloat;\nvar FORCED = 1 / nativeParseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = nativeParseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : nativeParseFloat;\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar nativeParseInt = global.parseInt;\nvar hex = /^[+-]?0[Xx]/;\nvar FORCED = nativeParseInt(whitespaces + '08') !== 8 || nativeParseInt(whitespaces + '0x16') !== 22;\n\n// `parseInt` method\n// https://tc39.github.io/ecma262/#sec-parseint-string-radix\nmodule.exports = FORCED ? function parseInt(string, radix) {\n  var S = trim(String(string));\n  return nativeParseInt(S, (radix >>> 0) || (hex.test(S) ? 16 : 10));\n} : nativeParseInt;\n","module.exports = require('../internals/global');\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hide = require('../internals/hide');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar nativeFunctionToString = require('../internals/function-to-string');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(nativeFunctionToString).split('toString');\n\nshared('inspectSource', function (it) {\n  return nativeFunctionToString.call(it);\n});\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) hide(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else hide(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || nativeFunctionToString.call(this);\n});\n","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.github.io/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n","'use strict';\nvar regexpFlags = require('./regexp-flags');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + re.source + '$(?!\\\\s)', regexpFlags.call(re));\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(re, str);\n\n    if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var global = require('../internals/global');\nvar hide = require('../internals/hide');\n\nmodule.exports = function (key, value) {\n  try {\n    hide(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\nvar IS_PURE = require('../internals/is-pure');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.2.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: 'Â© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.github.io/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\nvar bind = require('../internals/bind-context');\nvar html = require('../internals/html');\nvar createElement = require('../internals/document-create-element');\n\nvar location = global.location;\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function (id) {\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(id + '', location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (classof(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts && !fails(post)) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nvar Symbol = global.Symbol;\nvar store = shared('wks');\n\nmodule.exports = function (name) {\n  return store[name] || (store[name] = NATIVE_SYMBOL && Symbol[name]\n    || (NATIVE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","exports.f = require('../internals/well-known-symbol');\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\nvar IS_CONCAT_SPREADABLE_SUPPORT = !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !arrayMethodHasSpeciesSupport('filter') }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar SLOPPY_METHOD = sloppyArrayMethod('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var $ = require('../internals/export');\nvar sign = require('../internals/math-sign');\n\n// `Math.sign` method\n// https://tc39.github.io/ecma262/#sec-math.sign\n$({ target: 'Math', stat: true }, {\n  sign: sign\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\nvar ObjectPrototype = Object.prototype;\n\n// `Object.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nif (toString !== ObjectPrototype.toString) {\n  redefine(ObjectPrototype, 'toString', toString, { unsafe: true });\n}\n","var $ = require('../internals/export');\nvar parseFloatImplementation = require('../internals/parse-float');\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != parseFloatImplementation }, {\n  parseFloat: parseFloatImplementation\n});\n","var $ = require('../internals/export');\nvar parseIntImplementation = require('../internals/parse-int');\n\n// `parseInt` method\n// https://tc39.github.io/ecma262/#sec-parseint-string-radix\n$({ global: true, forced: parseInt != parseIntImplementation }, {\n  parseInt: parseIntImplementation\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar path = require('../internals/path');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar isObject = require('../internals/is-object');\nvar aFunction = require('../internals/a-function');\nvar anInstance = require('../internals/an-instance');\nvar classof = require('../internals/classof-raw');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar userAgent = require('../internals/user-agent');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar PromiseConstructor = NativePromise;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar $fetch = global.fetch;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar IS_NODE = classof(process) == 'process';\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  // correct subclassing with @@species support\n  var promise = PromiseConstructor.resolve(1);\n  var empty = function () { /* empty */ };\n  var FakePromise = (promise.constructor = {})[SPECIES] = function (exec) {\n    exec(empty, empty);\n  };\n  // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n  return !((IS_NODE || typeof PromiseRejectionEvent == 'function')\n    && (!IS_PURE || promise['finally'])\n    && promise.then(empty) instanceof FakePromise\n    // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // we can't detect it synchronously, so just check versions\n    && v8.indexOf('6.6') !== 0\n    && userAgent.indexOf('Chrome/66') === -1);\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (promise, state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0;\n    // variable length - can't use forEach\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(promise, state);\n            state.rejection = HANDLED;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(promise, state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (handler = global['on' + name]) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (promise, state) {\n  task.call(global, function () {\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (promise, state) {\n  task.call(global, function () {\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, promise, state, unwrap) {\n  return function (value) {\n    fn(promise, state, value, unwrap);\n  };\n};\n\nvar internalReject = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(promise, state, true);\n};\n\nvar internalResolve = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          then.call(value,\n            bind(internalResolve, promise, wrapper, state),\n            bind(internalReject, promise, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(promise, wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(promise, state, false);\n    }\n  } catch (error) {\n    internalReject(promise, { done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromiseConstructor, PROMISE);\n    aFunction(executor);\n    Internal.call(this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, this, state), bind(internalReject, this, state));\n    } catch (error) {\n      internalReject(this, state, error);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromiseConstructor.prototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      state.reactions.push(reaction);\n      if (state.state != PENDING) notify(this, state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, promise, state);\n    this.reject = bind(internalReject, promise, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && typeof NativePromise == 'function') {\n    nativeThen = NativePromise.prototype.then;\n\n    // wrap native Promise#then for native async functions\n    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var that = this;\n      return new PromiseConstructor(function (resolve, reject) {\n        nativeThen.call(that, resolve, reject);\n      }).then(onFulfilled, onRejected);\n    });\n\n    // wrap fetch result\n    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {\n      // eslint-disable-next-line no-unused-vars\n      fetch: function fetch(input) {\n        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));\n      }\n    });\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = path[PROMISE];\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.github.io/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    capability.reject.call(undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.github.io/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.github.io/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        $promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.github.io/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      iterate(iterable, function (promise) {\n        $promiseResolve.call(C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    return !thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined ? pattern\n      : inheritIfRequired(CORRECT_NEW\n        ? new NativeRegExp(patternIsRegExp && !flagsAreUndefined ? pattern.source : pattern, flags)\n        : NativeRegExp((patternIsRegExp = pattern instanceof RegExpWrapper)\n          ? pattern.source\n          : pattern, patternIsRegExp && flagsAreUndefined ? getFlags.call(pattern) : flags)\n      , thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/forced-string-html-method');\n\n// `String.prototype.bold` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.bold\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('bold') }, {\n  bold: function bold() {\n    return createHTML(this, 'b', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/forced-string-html-method');\n\n// `String.prototype.italics` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.italics\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {\n  italics: function italics() {\n    return createHTML(this, 'i', '', '');\n  }\n});\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\nvar floor = Math.floor;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d\\d?)/g;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative) {\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n\n  // https://tc39.github.io/ecma262/#sec-getsubstitution\n  function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {\n    var tailPos = position + matched.length;\n    var m = captures.length;\n    var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n    if (namedCaptures !== undefined) {\n      namedCaptures = toObject(namedCaptures);\n      symbols = SUBSTITUTION_SYMBOLS;\n    }\n    return nativeReplace.call(replacement, symbols, function (match, ch) {\n      var capture;\n      switch (ch.charAt(0)) {\n        case '$': return '$';\n        case '&': return matched;\n        case '`': return str.slice(0, position);\n        case \"'\": return str.slice(tailPos);\n        case '<':\n          capture = namedCaptures[ch.slice(1, -1)];\n          break;\n        default: // \\d\\d?\n          var n = +ch;\n          if (n === 0) return match;\n          if (n > m) {\n            var f = floor(n / 10);\n            if (f === 0) return match;\n            if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n            return match;\n          }\n          capture = captures[n - 1];\n      }\n      return capture === undefined ? '' : capture;\n    });\n  }\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', 1, function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative(nativeSearch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/forced-string-trim-method');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// `Symbol.prototype.description` getter\n// https://tc39.github.io/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.github.io/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/wrapped-well-known-symbol');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar JSON = global.JSON;\nvar nativeJSONStringify = JSON && JSON.stringify;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = NATIVE_SYMBOL && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.github.io/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.github.io/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.github.io/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.github.io/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.github.io/ecma262/#sec-json.stringify\nJSON && $({ target: 'JSON', stat: true, forced: !NATIVE_SYMBOL || fails(function () {\n  var symbol = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  return nativeJSONStringify([symbol]) != '[null]'\n    // WebKit converts symbol values to JSON as null\n    || nativeJSONStringify({ a: symbol }) != '{}'\n    // V8 throws on boxed symbols\n    || nativeJSONStringify(Object(symbol)) != '{}';\n}) }, {\n  stringify: function stringify(it) {\n    var args = [it];\n    var index = 1;\n    var replacer, $replacer;\n    while (arguments.length > index) args.push(arguments[index++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return nativeJSONStringify.apply(JSON, args);\n  }\n});\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) hide($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar hide = require('../internals/hide');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    hide(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar hide = require('../internals/hide');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      hide(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) hide(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        hide(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nmodule.exports = ActionAncetre\n/**\n * Action ancetre de toutes les actions de la figure\n * @constructor\n * @param {iep.iepDoc} doc : le document contenant les objets\n * @param {string} tempo : Le tempo Ã  attendre Ã  la fin de l'action en dixiÃ¨mes de seconde\n * avant de passer Ã  l'action suivante. Si null on passe directement Ã  l'action suivante.\n */\nfunction ActionAncetre (doc, tempo) {\n  if (arguments.length === 0) return\n  this.doc = doc\n  this.tempo = (tempo === null) ? null : parseInt(tempo) * 100 // tempo est en diziÃ¨mes de seconde\n  this.isReady = false // Sera mis Ã  true une fois qu'on est sÃ»r que l'Ã©lÃ©ment est bien chargÃ© et prÃªt.\n}\n/**\n * Fonction renvoyant lorsque l'action a Ã©tÃ© chargÃ© et prÃªte.\n * Est redÃ©fini pour les actions dont le chargement est asynchrone : images et actions\n * d'Ã©criture de texte nÃ©cessitant l'utilisation du LaTeX.\n */\nActionAncetre.prototype.setReady = function () {\n  this.isReady = true\n}\n/**\n * Fonction qui n'aura une action que pour les actions de crÃ©ation d'objet et crÃ©era l'Ã©lÃ©ment graphique\n * du DOM associÃ© Srea redÃ©fini pour les actions de crÃ©ation d'objet\n */\nActionAncetre.prototype.creegElement = function () {\n}\n/**\n * Fonction renvoyant true seulement si l'action a une action visible sur la figure.\n * Lors de l'appel de iepDoc.ajouteAction, chaque action se voit attribuer un membre indice\n * qui est son indice dans la liste des actions crÃ©Ã©es..\n * Renvoie true par dÃ©faut.\n * @returns {boolean}\n */\nActionAncetre.prototype.actionVisible = function () {\n  return true\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionCoucherCompas\n/**\n * Action couchant le compas.\n * @extends ActionAncetre\n * @constructor\n * @param {iepDoc} doc\n */\nfunction ActionCoucherCompas (doc, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n}\nActionCoucherCompas.prototype = new ActionAncetre()\n\n/**\n * Fonction couchant le compas et le montrant si immediat est false\n * @param {boolean} immediat\n */\nActionCoucherCompas.prototype.execute = function (immediat) {\n  const compas = this.doc.compas\n  const compasLeve = this.doc.compasLeve\n  if (compas.leve) {\n    compasLeve.montre(false)\n    compas.setPosition(compasLeve.x, compasLeve.y, compasLeve.angle)\n  }\n  if (!immediat && compas.visible) compas.montre(true)\n  compas.leve = false\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionCoucherCompas.prototype.actionVisible = function () {\n  const visible = this.doc.getInstrumentVisibility(this.doc.compas.compas, this.indice - 1)\n  if (!visible) return false\n  else return this.doc.getCompasStatus(this.indice - 1) === 'leve'\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nconst Texte = require('../objets/texte')\nmodule.exports = ActionCreation\n/**\n * Action de crÃ©ation de l'objet objet d'id id dans le document doc\n * @extends ActionAncetre\n * @constructor\n * @param {type} doc\n * @param {type} id\n * @param {type} objet\n */\nfunction ActionCreation (doc, id, objet, tempo, vitesse) {\n  ActionAncetre.call(this, doc, tempo)\n  this.id = id\n  const ob = this.doc.getElement(id, objet.objet)\n  this.objetRemplace = (ob === null) ? null : ob\n  this.objet = objet\n  // Ci-dessous un parseFloat car dans certains scripts j'ai vu des sens = \"-0.3\"\n  if (arguments.length >= 5) this.vitesse = (vitesse != null) ? Math.abs(parseFloat(vitesse)) : 8\n  else this.vitesse = 8\n  if (this.objetRemplace !== null) this.doc.addElement(this.objet)\n  else this.doc.pushElement(this.objet)\n}\nActionCreation.prototype = new ActionAncetre()\n/**\n * Fonction lanÃ§ant l'animation de crÃ©ation de l'objet objet si la crÃ©ation de l'objet nÃ©cessite une animation\n * et si immediat est Ã  false et sinon affichant immÃ©diatement l'objet\n * @param {boolean} immediat\n */\nActionCreation.prototype.execute = function (immediat) {\n  // Pour un texte on a mÃ©morisÃ© sa position initiale car il peut avoir Ã©tÃ© translatÃ©.\n  // et quand on relance la figure il doit remprendre sa place initiale\n\n  if (this.objet instanceof Texte) {\n    this.objet.x = this.objet.xinit\n    this.objet.y = this.objet.yinit\n  }\n  // this.doc.svg.appendChild(this.objet.g);\n  if (this.objetRemplace !== null) {\n    this.objetRemplace.montre(false)\n    // this.doc.svg.replaceChild(this.objet.g,this.objetRemplace.g);\n  }\n  if (this.objet.creationAnimee() && !immediat) {\n    this.objet.lanceAnimation(this.vitesse)\n  } else {\n    this.objet.montre(true)\n    if (immediat) this.objet.finAction()\n    else this.doc.actionSuivante(immediat)\n  }\n}\n/**\n * Fonction crÃ©ant l'Ã©lÃ©ment graphique du DOM associÃ© Ã  une action de crÃ©ation d'objet\n * L'objet est calculÃ© par positionne() et cachÃ©\n */\nActionCreation.prototype.creegElement = function () {\n  const doc = this.doc\n  const objet = this.objet\n  objet.creeg()\n  objet.positionne()\n  objet.g.setAttribute('visibility', 'hidden')\n  doc.svg.appendChild(objet.g)\n}\n/** @inheritDoc */\nActionCreation.prototype.actionVisible = function () {\n  return !(this.objet instanceof Texte)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionEcarterCompas\n/**\n * Ã‰carte le compas\n * @extends iep.actionAncetre\n * @constructor\n * @param doc\n * @param ecartement\n * @param tempo\n * @param ec10\n */\nfunction ActionEcarterCompas (doc, ecartement, tempo, ec10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.ecartement = ecartement\n  this.ec10 = (ec10 === null) ? 16 : parseFloat(ec10)\n  // this.doc.compas.ecart = this.ecartement;\n}\nActionEcarterCompas.prototype = new ActionAncetre()\n/**\n * Fonction lanÃ§ant l'animation d'Ã©cartement du compas sauf si immediat est true\n * @param {boolean} immediat\n */\nActionEcarterCompas.prototype.execute = function (immediat) {\n  if (!immediat) this.doc.compas.lanceAnimationEcartement(this.ecartement, this.ec10)\n  else {\n    this.doc.compas.ecart = this.ecartement\n    this.doc.compas.positionne()\n  }\n}\n/** @inheritDoc */\nActionEcarterCompas.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.doc.compas, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ActionAncetre = require('./actionAncetre')\nconst mathjaxLoader = require('../mathjaxLoader')\n\nmodule.exports = ActionEcrireTexte\n\n/**\n * Action d'Ã©criture d'un texte. Le texte doit avoir Ã©tÃ© crÃ©Ã© auparavant.\n * @constructor\n * @extends iep.actionAncetre\n * @param {iepDoc} doc            le document propriÃ©taire\n * @param {string} id             l'id du texte sur lequel Ã©crire\n * @param {string} couleur        la couleur du texte\n * @param {string} taille         la taille du texte\n * @param {string} texte          Le texte Ã  afficher\n * @param {string} marge          la marge Ã©ventuelle\n * @param {string} margeGauche    la marge gauche Ã©ventuelle\n * @param {string} margeDroite    la marge droite Ã©ventuelle\n * @param {string} margeHaut      la marge haute Ã©ventuelle\n * @param {string} margeBas       la marge basse Ã©ventuelle\n * @param {string} tempo          le tempo\n */\nfunction ActionEcrireTexte (doc, id, couleur, taille, texte, style, couleurFond,\n  opaciteFond, couleurCadre, epaisseurCadre, marge, margeGauche, margeDroite, margeHaut, margeBas, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.txt = this.doc.getElement(id, 'texte')\n  this.id = id\n  this.couleur = couleur\n  // On remplace dans la taille les lettres O mises par les Ã©tourdis Ã  la place de 0\n  this.taille = (taille == null) ? '20' : taille.replace(/O/g, '0')\n  this.texte = kernel.remplaceAccentsHtml(kernel.remplaceBalises(kernel.remplaceCarSpe(texte)))\n  this.style = (style === null) ? 'texte' : style\n  this.couleurFond = couleurFond\n  this.opaciteFond = (opaciteFond == null) ? '0.6' : parseFloat(opaciteFond) / 100\n  // Modification version 5.0.2. Causait des problÃ¨mes avec explorer\n  // this.couleurCadre = (couleurCadre == null) ? couleur : couleurCadre;\n  this.couleurCadre = couleurCadre\n  if ((epaisseurCadre !== null) && (couleurCadre === null)) this.couleurCadre = couleur\n  //\n  this.epaisseurCadre = (epaisseurCadre != null) ? epaisseurCadre : ((couleurCadre == null) ? 0 : 1)\n  this.marge = (marge == null) ? 0 : parseFloat(marge)\n  this.margeGauche = (margeGauche == null) ? 0 : parseFloat(margeGauche)\n  this.margeDroite = (margeDroite == null) ? 0 : parseFloat(margeDroite)\n  this.margeHaut = (margeHaut == null) ? 0 : parseFloat(margeHaut)\n  this.margeBas = (margeBas == null) ? 0 : parseFloat(margeBas)\n  this.estLatex = this.estAffichageLatex()\n  this.texte = this.traduitCaracteresGrecs(this.texte)\n  if (!this.estLatex) {\n    this.texte = this.texte.replace(/\\*/g, 'Ã—')\n    if (kernel.necessiteLatex(texte)) {\n      this.texte = '$' + this.traiteMaths(this.texte) + '$'\n      this.estLatex = true\n    } else this.texte = kernel.traiteAccents(this.texte)\n  }\n}\n\nActionEcrireTexte.prototype = new ActionAncetre()\n/**\n * Action Ã©crivant le contenu du texte sur la figure\n * @param {Boolean} immediat\n * @returns {undefined}\n */\nActionEcrireTexte.prototype.execute = function (immediat) {\n  if (this.txt != null) { // Pour Ã©viter les erreurs des auteurs\n    this.angle = 0 // Car on peut dans la version js faire toruner un texte\n    const txt = this.txt\n    txt.couleur = this.couleur\n    txt.taille = this.taille\n    txt.texte = this.texte\n    txt.couleurFond = this.couleurFond\n    txt.couleurCadre = this.couleurCadre\n    txt.epaisseurCadre = this.epaisseurCadre\n    txt.updateg(this.g)\n    txt.positionne()\n  }\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n\n/**\n * Fonction renvoyant true si l'affichage de texte utilise le LaTeX de faÃ§on dÃ©libÃ©rÃ©e\n * en encadrant alors le code LaTeX par deux caractÃ¨res $\n * A priori ne sera utilisÃ© que pour une prochaine version\n * @returns {boolean}\n */\nActionEcrireTexte.prototype.estAffichageLatex = function () {\n  return ((this.texte.charAt(0) === '$') && (this.texte.charAt(this.texte.length - 1) === '$'))\n}\n\n/**\n * Fonction remplaÃ§ant les codes du type Â£...Â£ reprÃ©sentant des caractÃ¨res grecs\n * par les caractÃ¨res UTF8 correspondants\n * @param {string} ch\n * @returns {string}\n */\nActionEcrireTexte.prototype.traduitCaracteresGrecs = function (ch) {\n  let i, search\n  const ta = kernel.caracteresGrecs\n  if (ch.indexOf('Â£') !== -1) {\n    for (i = 0; i < ta.length; i++) {\n      search = 'Â£' + ta[i] + 'Â£'\n      if (ch.indexOf(search) !== -1) ch = ch.replace(new RegExp(search, 'g'), kernel.caracteresGrecsUtf8[i])\n    }\n  }\n  return ch\n}\n/**\n * Fonction traitant la chaÃ®ne ch pour la transcrire en code LaTeX\n * Renvoie la chaÃ®ne LaTeX correspondante.\n * Si la chaÃ®ne contient des balises <br>, un tableau LaTeX est utilisÃ© pour rendre le contenu\n * @param {string} ch : la chaÃ®ne Ã  traiter\n * @returns {string} la chaÃ®ne LaTeX correpondante une fois ch traduite\n */\nActionEcrireTexte.prototype.traiteMaths = function (ch) {\n  let i\n  const ch2 = ch\n  const bStyletTexte = this.style === 'texte'\n  const a = ch2.split(new RegExp('<br>|</br>', 'gi')) // On recherche les codes <br> et on remplace les lignes par une matrice\n  if (a.length <= 1) return kernel.traiteAccents(kernel.getMaths(ch, bStyletTexte)) // True pour mode texte par dÃ©faut\n  let res = '\\\\begin{array}{l}'\n  for (i = 0; i < a.length; i++) {\n    if (i !== 0) res += '\\\\\\\\'\n    res += kernel.traiteAccents(kernel.getMaths(a[i], bStyletTexte)) // true pour mode texte par dÃ©faut\n  }\n  res += '\\\\end{array}'\n  return res\n}\n/**\n * Fonction appelÃ©e lors de l'appel de iepDoc.creeActions()\n * Si l'Ã©criture du texte ne nÃ©cessite pas l'emploi du LaTeX, on crÃ©e l'Ã©lÃ©ment grapique qui sera\n * dÃ©masquÃ© quand l'action sera exÃ©cutÃ©e\n * Sinon, on charge mathjax si besoin et on crÃ©e un div provisoire dans la figure\n * dans lequel on met la formule et on demande Ã  MathJax via sa pile d'appels\n * de traiter ce div pour le remplacer par un svg\n * Via la pile d'appel de MathJax, setReady sera appelÃ©e\n * une fois le svg reprÃ©sentant la figure prÃªt . Cette fonction de callback appelera ensuite\n * iepDoc.waitForReadyState qui est la fonction attendant que tout les objets asynchrones soient prÃªts\n * (images et affichages de texte utilisant le LaTeX)\n */\nActionEcrireTexte.prototype.prepare = function () {\n  if (this.estLatex) {\n    this.div = document.createElement('div')\n    // On diminue la taille pour le LaTeX eet on ne spÃ©cifie pas la taille en px\n    // diffÃ©rence par rapport Ã  MathGraph32\n    this.div.setAttribute('style', 'top:0px;left:0px;position:absolute;font-family: \"Times New Roman\", Times, serif;font-size:' +\n      String(this.taille - 2) + 'px;visibility:hidden;')\n    this.div.setAttribute('id', this.id + 'iepprov')\n    const ch = '$$' + this.prelatex() + this.texte.substring(1) + '$'\n    this.div.appendChild(document.createTextNode(ch))\n    document.body.appendChild(this.div)\n    const self = this\n    mathjaxLoader().then(() => {\n      /* global MathJax */\n      // MathJax.Hub.Typeset(this.div);\n      MathJax.Hub.Queue(['Typeset', MathJax.Hub, self.div])\n      MathJax.Hub.Queue([function () {\n        self.creegLatex()\n        self.setReady()\n      }])\n    }).catch(error => {\n      console.error(Error('Mathjax nâ€™a pas Ã©tÃ© chargÃ© correctement, impossible dâ€™afficher du texte en LaTeX'), error)\n    })\n  } else {\n    this.creeg()\n    this.setReady()\n  }\n}\n\n/**\n * Fonction renvoyant l'en-tÃªte Ã  rajouter pour que, dans le cas d'utilisation du\n * LaTeX, l'affichage soit de la bonne couleur.\n */\nActionEcrireTexte.prototype.prelatex = function () {\n  return '\\\\color{' + this.couleur + '}'\n}\n\n/**\n * Fonction appelÃ©e par prepare() qui rÃ©cupÃ¨re l'Ã©lement svg graphique reprÃ©sentant\n * la formule dans le div provisoire prÃ©cÃ©demment crÃ©Ã©, dÃ©truit ensuite ce div provisoire\n * Rajoute les Ã©lÃ©ments graphiques correspondant Ã  un cadre si une couleur de fond\n * et un cadre ont Ã©tÃ© demandÃ©s\n */\nActionEcrireTexte.prototype.creegLatex = function () {\n  let w, h\n  try {\n    const g = document.createElementNS(kernel.svgsn, 'g')\n    const c1 = this.div.childNodes[1]\n    if (!c1) return document.createElementNS(kernel.svgsn, 'g')\n    const c2 = c1.childNodes[0]\n    if (!c2) return document.createElementNS(kernel.svgsn, 'g')\n    let s = c2.childNodes[0]\n    if (!s) return document.createElementNS(kernel.svgsn, 'g')\n    // Pour gÃ©rer Chrome\n    while (s.tagName === 'SPAN') s = s.childNodes[0]\n    // Le test suivant est du Ã  la compatibilitÃ© avec l'explorer\n    if ((s.clientWidth !== 0) && (s.clientHeight !== 0)) {\n      w = s.clientWidth\n      h = s.clientHeight\n    } else {\n      w = c2.clientWidth\n      h = c2.clientHeight\n    }\n    const t = this.taille\n    if (h < t) h = t\n    /* ModifiÃ© version 5.0.2 pour assurer compatibilitÃ© avec explorer\n    s.setAttribute(\"x\",\"0\");\n    s.setAttribute(\"y\", String(-this.taille)); // DiffÃ©rent de MathGraph32\n    s.setAttribute(\"width\", w+\"px\");\n    s.setAttribute(\"height\",h+\"px\");\n    g.appendChild(s.parentNode.removeChild(s));\n    */\n    const clone = s.cloneNode(true)\n    clone.setAttribute('x', '0')\n    clone.setAttribute('y', String(-this.taille)) // DiffÃ©rent de MathGraph32\n    clone.setAttribute('width', w + 'px')\n    clone.setAttribute('height', h + 'px')\n    g.appendChild(clone)\n    document.body.removeChild(this.div)\n    g.setAttribute('visibility', 'hidden')\n    // g.setAttribute(\"id\",this.id);\n    if ((this.couleurFond !== null) || (this.couleurCadre !== null)) {\n      g.setAttribute('visibility', 'hidden')\n      this.doc.svg.appendChild(g)\n      this.rectAff = {}\n      const epc = parseFloat(this.epaisseurCadre)\n      this.rectAff.height = g.getBBox().height + 2 * epc + 4 + 2 * this.marge + this.margeHaut + this.margeBas\n      this.rectAff.width = g.getBBox().width + 2 * epc + 2 + 2 * this.marge + this.margeGauche + this.margeDroite\n      this.rectAff.x = g.getBBox().x - epc - 1 - this.marge - this.margeGauche\n      this.rectAff.y = g.getBBox().y - epc - 1 - this.marge - this.margeHaut\n      g.setAttribute('visibility', 'visible')\n      this.doc.svg.removeChild(g)\n      this.creeRectangle(g, (this.couleurFond == null) ? 'white' : this.couleurFond)\n    }\n    this.g = g\n  } catch (e) {\n    if (this.div != null) document.body.removeChild(this.div)\n    this.g = document.createElementNS(kernel.svgsn, 'g') // CrÃ©e un g vide en cas de problÃ¨me\n  }\n}\n\n/**\n * Retourne l'Ã©lÃ©ment graphique associÃ© dans le cas oÃ¹ l'affichage n'utilise pas le LaTeX\n * Avant appel, this.text doit voir Ã©tÃ© affectÃ©\n */\nActionEcrireTexte.prototype.creeg = function () {\n  let indbalise, tspan, ch, ch2, style, txt, ind, indexp, indind, mini, bexp, tailleind, stylespan,\n    y, sp, i, debutLigne, an\n  let dy = 0 // Le baselineshift de chaque tspan\n  const inf = '<' // Equivalent du symbole <\n  const debexp = 'Â£e('\n  const debind = 'Â£i('\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  const hautlig = parseFloat(this.taille) + 2\n  let decblp = 0 // DÃ©calage vers le bas de la ligne prÃ©cÃ©dente\n  const decalage = parseFloat(this.taille) * 0.4 // DÃ©calage vers le bas ou le haut en cas d'indice ou d'exposant\n\n  if (this.texte !== '') {\n    txt = document.createElementNS(kernel.svgsn, 'text')\n    txt.setAttribute('pointer-events', 'none')\n    txt.setAttribute('x', 0)\n    txt.setAttribute('y', 0)\n    style = 'text-anchor:left;font-size:' + this.taille + 'px;' + 'fill:' + this.couleur + ';'\n    txt.setAttribute('style', style)\n    // On remplace les espaces par des espaces insÃ©cables\n    ch2 = this.texte.replace(new RegExp(' ', 'g'), '\\u00A0')\n    // Affecter une longueur ne peut Ãªtre efficace que pour du texte simpel sans balise\n    if ((this.texte.indexOf(inf) === -1) && (this.texte.indexOf(debexp) === -1) && (this.texte.indexOf(debind) === -1) &&\n      (this.texte.indexOf('<br>') === -1)) {\n      txt.appendChild(document.createTextNode(ch2))\n    } else {\n      sp = ch2.split(/<br>/gi)\n      y = -hautlig\n      for (i = 0; i < sp.length; i++) {\n        debutLigne = true\n        ch = sp[i]\n        while (ch !== '') {\n          indbalise = ch.indexOf(inf)\n          indexp = ch.indexOf(debexp)\n          indind = ch.indexOf(debind)\n          if (debutLigne) y += hautlig + decblp\n          if (indexp !== -1) y += decalage\n          if ((indbalise === -1) && (indexp === -1) && (indind === -1)) {\n            // txt.appendChild(document.createTextNode(this.texte));\n            tspan = document.createElementNS(kernel.svgsn, 'tspan')\n            tspan.setAttribute('pointer-events', 'none')\n            tspan.setAttribute('dy', dy)\n            if (debutLigne) {\n              tspan.setAttribute('x', 0)\n              tspan.setAttribute('y', y)\n              debutLigne = false\n            }\n            dy = 0 // On est revenu au niveau 0\n            tspan.appendChild(document.createTextNode(ch))\n            txt.appendChild(tspan)\n            break\n          } else {\n            while ((ch.indexOf(inf) !== -1) || (ch.indexOf(debexp) !== -1) ||\n                    (ch.indexOf(debind) !== -1)) {\n              indbalise = ch.indexOf(inf)\n              indexp = ch.indexOf(debexp)\n              indind = ch.indexOf(debind)\n              if (indbalise === -1) {\n                if (indexp === -1) mini = indind\n                else mini = (indind === -1) ? indexp : Math.min(indind, indexp)\n              } else {\n                if (indexp === -1) mini = (indind === -1) ? indbalise : Math.min(indbalise, indind)\n                else {\n                  if (indind === -1) mini = Math.min(indbalise, indexp)\n                  else mini = Math.min(indbalise, indind, indexp)\n                }\n              }\n              if (mini > 0) { // Il y a du texte avant les balises\n                tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                tspan.setAttribute('pointer-events', 'none')\n                tspan.setAttribute('dy', dy)\n                if (debutLigne) {\n                  tspan.setAttribute('x', 0)\n                  tspan.setAttribute('y', y)\n                  debutLigne = false\n                }\n                dy = 0 // On est revenu au niveau 0\n                tspan.appendChild(document.createTextNode(ch.substring(0, mini)))\n                txt.appendChild(tspan)\n                ch = ch.substring(mini)\n              } else {\n                if (indbalise === 0) {\n                  const infoBalise = new kernel.infoBalise(false, false, false, this.couleur, '', this.taille)\n                  ind = kernel.indiceFinBalise(ch)\n                  if (ind === -1) kernel.traiteBalise(ch, infoBalise, txt, debutLigne, y)\n                  else kernel.traiteBalise(ch.substring(0, ind), infoBalise, txt, debutLigne, y)\n                  debutLigne = false\n                  if (ind !== -1) ch = ch.substring(ind); else ch = ''\n                  dy = 0 // On est revenu au niveau 0\n                } else { // mini est Ã©gal Ã  0\n                  bexp = mini === indexp\n                  an = kernel.analyseExposantOuIndice(ch)\n                  tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                  tspan.setAttribute('pointer-events', 'none')\n                  tspan.setAttribute('dy', dy + 'px')\n                  if (debutLigne) {\n                    tspan.setAttribute('x', 0)\n                    tspan.setAttribute('y', y)\n                    debutLigne = false\n                  }\n                  if (an.erreur) tspan.appendChild(document.createTextNode(ch))\n                  else {\n                    tspan.appendChild(document.createTextNode(an.operande))\n                    txt.appendChild(tspan)\n                    tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                    tspan.setAttribute('pointer-events', 'none')\n                    tspan.appendChild(document.createTextNode(an.exposant))\n                    dy = decalage\n                    if (bexp) dy = -dy\n                    else decblp = dy\n                    tspan.setAttribute('dy', dy + 'px')\n                    tailleind = parseFloat(this.taille) * 0.6\n                    stylespan = 'font-size:' + tailleind + 'px;'\n                    tspan.setAttribute('style', stylespan)\n                    txt.appendChild(tspan)\n                    dy = -dy // Car sinon la suite sera dÃ©calÃ©e aussi en hauteur\n                  }\n                  ch = an.texte\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    g.appendChild(txt)\n  }\n  g.setAttribute('visibility', 'hidden')\n  // g.setAttribute(\"id\",this.id);\n  if ((this.couleurFond != null) || (this.couleurCadre != null)) {\n    g.setAttribute('visibility', 'hidden')\n    this.doc.svg.appendChild(g)\n    this.rectAff = {}\n    const epc = parseFloat(this.epaisseurCadre)\n    this.rectAff.height = g.getBBox().height + 2 * epc + 3 + 2 * this.marge + this.margeHaut + this.margeBas\n    this.rectAff.width = g.getBBox().width + 2 * epc + 2 + 2 * this.marge + this.margeGauche + this.margeDroite\n    this.rectAff.x = g.getBBox().x - epc - 1 - this.marge - this.margeGauche\n    this.rectAff.y = g.getBBox().y - epc - 1 - this.marge - this.margeHaut\n    g.setAttribute('visibility', 'visible')\n    this.doc.svg.removeChild(g)\n    this.creeRectangle(g, (this.couleurFond == null) ? 'white' : this.couleurFond)\n  }\n  this.g = g\n}\n\n/**\n * Renvoie true si la chaÃ®ne ch contient des balises &lt;u\\> ou \\<i\\>\n * @param {string} ch\n * @returns {boolean}\n */\nActionEcrireTexte.prototype.contientBalisesItaliqueOuUnderlineOuFontOuBold = function (ch) {\n  return new RegExp(/<(u|b|i|font[^>]+)>/, 'gi').test(ch)\n}\n\n/**\n * Fonction appelÃ©e dans le cas oÃ¹ l'affihcage de texte a une couleur de fond ou doit Ãªtre encadrÃ©e.\n * Elle rajoute le rectangle au g Ã©lÃ©ment avant l'afficgae correspondant au texte (de faaÃ§on Ã  pouvoir\n * le cas Ã©chÃ©ant effacer le fond avant l'affichage du texte\n * @param {svg.g} : le svg.g Ã©lÃ©ment qui contient l'affichae de texte (normal ou svg dans le cas du LaTeX\n */\nActionEcrireTexte.prototype.creeRectangle = function (g, coulFond) {\n  const r = document.createElementNS(kernel.svgsn, 'rect')\n  const style = 'stroke-width:' + this.epaisseurCadre + 'px;' + 'stroke:' + this.couleurCadre + ';' +\n    'fill:' + coulFond + ';fill-opacity:' + this.opaciteFond + ';'\n  r.setAttribute('style', style)\n  r.setAttribute('x', this.rectAff.x)\n  r.setAttribute('y', this.rectAff.y)\n  r.setAttribute('width', this.rectAff.width)\n  r.setAttribute('height', this.rectAff.height)\n  r.setAttribute('pointer-events', 'none')\n  g.insertBefore(r, g.childNodes[0])\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionGlisser\n/**\n * Action faisant glisser l'Ã©querre de la rÃ¨gle Ã©querre\n * @constructor\n * @extends iep.actionAncetre\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {int} abscisseFin : l'abscisse de fin de dÃ©placement\n * @param {string} tempo : le tempo en dixiÃ¨me de seconde (ou null)\n * @param {string} pix10 : le nombre de pixels de dÃ©placement Ã  chaque dixiÃ¨me de seconde\n */\nfunction ActionGlisser (doc, abscisseFin, tempo, pix10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.abscisseFin = parseFloat(abscisseFin)\n  this.pix10 = (pix10 === null) ? 8 : String(Math.abs(pix10))\n}\nActionGlisser.prototype = new ActionAncetre()\n/**\n * Fonction lanÃ§ant une animation de glissement de la rÃ¨gle Ã©querre sauf si immediat est true\n * @param {type} immediat\n */\nActionGlisser.prototype.execute = function (immediat) {\n  if (!immediat) this.doc.requerre.lanceAnimationGlissement(this.abscisseFin, this.pix10)\n  else {\n    this.doc.requerre.setAbs(this.abscisseFin)\n    this.doc.requerre.positionne()\n    // this.doc.actionSuivante(immediat);\n  }\n}\n/** @inheritDoc */\nActionGlisser.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.doc.requerre, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nconst CompasLeve = require('../instruments/compasLeve')\nmodule.exports = ActionLeverCompas\n/**\n * Action levant le compas\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n */\nfunction ActionLeverCompas (doc, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n}\nActionLeverCompas.prototype = new ActionAncetre()\n\n/**\n * Fonction cachant le compas normal et crÃ©ant un compas couchÃ© qui est ensuite affichÃ©\n * si le compas est visible\n * @param {string} immediat : true dans le cas d'une exÃ©cution sans passage Ã  l'action suivante\n */\nActionLeverCompas.prototype.execute = function (immediat) {\n  const compas = this.doc.compas\n  if (compas.visible) {\n    compas.montre(false)\n    compas.visible = true // Car a Ã©tÃ© modifiÃ© par montre()\n  }\n  this.doc.compasLeve = new CompasLeve(this.doc, compas.x, compas.y,\n    compas.angle, compas.ecart)\n  if (!immediat && compas.visible) this.doc.compasLeve.montre(true)\n  compas.leve = true\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionLeverCompas.prototype.actionVisible = function () {\n  const visible = this.doc.getInstrumentVisibility(this.doc.compas, this.indice - 1)\n  if (!visible) return false\n  else return this.doc.getCompasStatus(this.indice - 1) === 'couche'\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMasquer\n/**\n * Action masquant un objet.\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.objetBase} objet : l'objet Ã  masquer\n */\nfunction ActionMasquer (doc, idel, nature, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.objet = this.doc.getElement(idel, nature)\n}\nActionMasquer.prototype = new ActionAncetre()\n/**\n * Fonction exÃ©cutant le masque de l'objet objet\n * @param {boolean} immediat : true en cas d'exÃ©cution immÃ©diate sans passage\n * Ã  l'action suivante\n */\nActionMasquer.prototype.execute = function (immediat) {\n  const el = this.objet\n  if (el != null) el.montre(false)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMasquer.prototype.actionVisible = function () {\n  return this.doc.getObjectVisibility(this.objet, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMasquerInstrument\n/**\n * Action masquant un instrument.\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.instrumentAncetre} instrument : l'instrument Ã  masquer\n */\nfunction ActionMasquerInstrument (doc, instrument, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.instrument = instrument\n}\nActionMasquerInstrument.prototype = new ActionAncetre()\n/**\n * Fonction exÃ©cutant l'action et masquanf l'instrument instrument\n * @param {type} immediat\n */\nActionMasquerInstrument.prototype.execute = function (immediat) {\n  const compas = this.doc.compas\n  this.instrument.montre(false)\n  if (compas.leve) this.doc.compasLeve.montre(false)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMasquerInstrument.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionModifierLongueur\n/*\n * Action modifiant la longueur d'un instrument.\n * Pour le moment seulement implÃ©mentÃ© pour la rÃ¨gle.\n */\n\n/**\n * Action modifiant la longueur d'un instrument.\n * Pour le moment seulement implÃ©mentÃ© pour la rÃ¨gle.\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} Le document propriÃ©taire\n * @param {iep.instrumentAncetre} instrument : L'istrument sur lequel a lieu l'action\n * @param {string} longueur : La nouvelle longueur\n * @param {string} tempo : Le tempo de temporisation\n */\nfunction ActionModifierLongueur (doc, instrument, longueur, tempo) {\n  ActionAncetre.call(this, doc, tempo) // null car action immÃ©diate\n  this.instrument = instrument\n  this.longueur = longueur\n}\nActionModifierLongueur.prototype = new ActionAncetre()\n/**\n * Fonction exÃ©cutant l'action et modifiant la longueur de l'instrument\n * @param {boolean} immediat : true si l'action est immdiate et on ne passe\n * pas ensuite Ã  l'action suivante\n */\nActionModifierLongueur.prototype.execute = function (immediat) {\n  if (this.instrument === this.doc.regle) {\n    const vis = this.instrument.visible\n    this.instrument.longueur = this.longueur\n    const oldg = this.instrument.g\n    this.instrument.creeg()\n    this.instrument.g.setAttribute('visibility', vis ? 'visible' : 'hidden')\n    this.doc.svg.replaceChild(this.instrument.g, oldg)\n    this.instrument.translate(this.instrument.x, this.instrument.y)\n  }\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionModifierLongueur.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\r\n * Visualiseur InstrumenPoche en Javascript et SVG\r\n * @Author Yves Biton (yves.biton@sesamath.net)\r\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\r\n */\r\nconst ActionAncetre = require('./actionAncetre')\r\nmodule.exports = ActionModificationRayon\r\n\r\n/**\r\n * Action modifiant le rayon d'un arc de cercle.\r\n * A ma connaissance n'a Ã©tÃ© utilisÃ© que pour l'objet Gabarit\r\n * @param {iep.iepDoc} doc\r\n * @param {string} idel : L'id de l'objet dont il faut modifier le rayon\r\n * @param {string} rayFin : Le rayon Ã  la fin de l'animation\r\n * @param {string} type : le type de l'objet\r\n * @param {string} tempo : Le tempo de temporisation\r\n * @param {string} pix10 : Le nombre de pixels pour la translation par dixiÃ¨me de seconde. Peut Ãªtre null\r\n * @constructor\r\n */\r\nfunction ActionModificationRayon (doc, idel, rayFin, type, tempo, pix10) {\r\n  ActionAncetre.call(this, doc, tempo)\r\n  this.rayFin = parseFloat(rayFin)\r\n  this.pix10 = (pix10 == null) ? 8 : parseFloat(pix10)\r\n  this.type = type\r\n  this.objet = this.doc.getElement(idel, type)\r\n}\r\nActionModificationRayon.prototype = new ActionAncetre()\r\n\r\n/**\r\n * Fonction lanÃ§ant la translation de objet sauf si immediat est false\r\n * @param {type} immediat\r\n */\r\nActionModificationRayon.prototype.execute = function (immediat) {\r\n  const objet = this.objet\r\n  if (objet == null) {\r\n    this.doc.actionSuivante(immediat)\r\n    return\r\n  }\r\n  if (!immediat) objet.lanceAnimationModificationRayon(this.rayFin, this.pix10)\r\n  else {\r\n    objet.donneRayon(this.rayFin)\r\n  }\r\n}\r\n/** @inheritDoc */\r\nActionModificationRayon.prototype.actionVisible = function () {\r\n  return this.doc.getObjectVisibility(this.objet, this.indice - 1)\r\n}\r\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMontrer\n/**\n * Action montrant un objet.\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.objetBase} objet : l'objet Ã  dÃ©masquer\n */\nfunction ActionMontrer (doc, idel, nature, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.objet = this.doc.getElement(idel, nature)\n}\nActionMontrer.prototype = new ActionAncetre()\n/**\n * Fonction dÃ©masquant l'Ã©lÃ©ment graphique de l'objet objet\n * @param {type} immediat\n */\nActionMontrer.prototype.execute = function (immediat) {\n  const el = this.objet\n  if (el !== null) el.montre(true)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMontrer.prototype.actionVisible = function () {\n  return !this.doc.getObjectVisibility(this.objet, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMontrerGraduations\n/**\n * Action montrant ou masquant les graduations de l'instrument instrument\n * Attention : Pour la rÃ¨le, cette action s'exerce sur la graduation\n * et pour le rapporteur, sur la graduation interne\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.instrumentAncetre} instrument : l'instrument possÃ©dant les graduations\n * @param {boolean} bmontrer : true pour montrer les graduations, false pour les cacher\n * @param {type} tempo\n */\nfunction ActionMontrerGraduations (doc, instrument, bmontrer, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.instrument = instrument\n  this.bmontrer = bmontrer\n}\nActionMontrerGraduations.prototype = new ActionAncetre()\n/**\n * Fonction exÃ©cutant l'action donc montrant ou masquant les graduations de instrument\n * @param {boolean} immediat Si true,pas de passage Ã  l'action suivante\n */\nActionMontrerGraduations.prototype.execute = function (immediat) {\n  this.instrument.montreGraduations(this.bmontrer)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMontrerGraduations.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMontrerInstrument\n/**\n * Action montrant un instrument.\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.instrumentAncetre} instrument : l'instrument Ã  montrer\n */\nfunction ActionMontrerInstrument (doc, instrument, x, y, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.x = (x === null) ? null : parseFloat(x)\n  this.y = (y === null) ? null : parseFloat(y)\n  this.instrument = instrument\n}\nActionMontrerInstrument.prototype = new ActionAncetre()\n/**\n * Fonction montrant l'instrument instrument\n * @param {boolean} immediat : si rrue on ne passe pas Ã  l'action suivante\n */\nActionMontrerInstrument.prototype.execute = function (immediat) {\n  const compas = this.doc.compas\n  if ((this.x !== null) && (this.y !== null)) this.instrument.translate(this.x, this.y)\n  if ((this.instrument === compas) && !immediat) {\n    if (!compas.leve) compas.montre(true)\n    else this.doc.compasLeve.montre(true)\n    compas.visible = true\n  } else this.instrument.montre(true)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMontrerInstrument.prototype.actionVisible = function () {\n  return !this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionMontrerNombres\n// Cette action agit sur les graduations externes du rapporteur\n/**\n * Action montrant changeant le statut des gradiations externes du rapporteur\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {boolean} bmontrer : true si on montre les graduations, false sinon\n * @param {type} tempo\n */\nfunction ActionMontrerNombres (doc, bmontrer, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.bmontrer = bmontrer\n}\nActionMontrerNombres.prototype = new ActionAncetre()\n/**\n * ExÃ©cution de l'action changeant le statut des gradiations externes du rapporteur\n * @param {boolean} immediat : si true on ne passe pas Ã  l'action suivante\n */\nActionMontrerNombres.prototype.execute = function (immediat) {\n  this.doc.rapporteur.montreGraduationsExternes(this.bmontrer)\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionMontrerNombres.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.doc.rapporteur, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nconst mathjaxLoader = require('../mathjaxLoader')\n\nmodule.exports = ActionNommerPoint\n\n/**\n * Action donnant un nom Ã  un point\n * @extends iep.actionAncetre\n * @constructor\n * @param {ie.iepDoc} doc : le doculent propriÃ©taire\n * @param {iep.nomPoint} objet :  l'objet reprÃ©sentant le nom\n * @param {string} tempo : le tempk en dixiÃ¨mes de seconde (ou null)\n */\nfunction ActionNommerPoint (doc, objet, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n  this.nomPoint = objet\n}\nActionNommerPoint.prototype = new ActionAncetre()\n\n/**\n * AppelÃ©e par creeActions, prÃ©charge Mathjax si besoin et prÃ©pare son div de rendu\n */\nActionNommerPoint.prototype.prepare = function () {\n  if (this.nomPoint.estLatex) {\n    this.nomPoint.div = document.createElement('div')\n    // On diminue la taille pour le LaTeX eet on ne spÃ©cifie pas la taille en px\n    // diffÃ©rence par rapport Ã  MathGraph32\n    this.nomPoint.div.setAttribute('style', 'top:0px;left:0px;position:absolute;font-size:' +\n      String(this.nomPoint.taille - 2) + 'px;visibility:hidden;')\n    this.nomPoint.div.setAttribute('id', this.nomPoint.id + 'iepprov')\n    const ch = '$$' + this.nomPoint.nom.substring(1) + '$'\n    this.nomPoint.div.appendChild(document.createTextNode(ch))\n    document.body.appendChild(this.nomPoint.div)\n    // la suite est async\n    const self = this\n    mathjaxLoader().then(() => {\n      /* global MathJax */\n      // MathJax.Hub.Typeset(this.div);\n      MathJax.Hub.Queue(['Typeset', MathJax.Hub, self.nomPoint.div])\n      MathJax.Hub.Queue([function () {\n        self.nomPoint.creegLatex()\n        self.setReady()\n      }])\n    }).catch(error => {\n      console.error(Error('Mathjax nâ€™a pas Ã©tÃ© chargÃ© correctement, impossible dâ€™afficher le point en LaTeX'), error)\n    })\n  } else {\n    this.nomPoint.creeg()\n    this.setReady()\n  }\n}\n\n/**\n * ExÃ©cutant de l'action donnant un nom au point\n * @param {boolean} immediat : Si true pas de passage Ã  l'action suivante\n */\nActionNommerPoint.prototype.execute = function (immediat) {\n  // if ((this.nomPoint.objet === \"point\") && !this.nomPoint.nomCree) {\n  if (this.nomPoint.objet === 'point') {\n    // this.nomPoint.creeg();\n    this.nomPoint.positionne()\n    const point = this.nomPoint.point\n    if (point.nom !== null) { this.doc.svg.replaceChild(this.nomPoint.g, point.nom.g) } else this.doc.svg.appendChild(this.nomPoint.g)\n    point.nom = this.nomPoint\n  }\n  this.nomPoint.g.setAttribute('visibility', 'visible')\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n\n/** @inheritDoc */\nActionNommerPoint.prototype.actionVisible = function () {\n  return this.doc.getObjectVisibility(this.nomPoint.point, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionPause\n/**\n * Action faisant une pause dans l'animation de la figure\n * Pour continuer l'action  l'utilisation doit cliquer sur le bouton rouge dans\n * la barre d'icÃ´nes\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {string} tempo : le tempo de temporisation (ou null)\n */\nfunction ActionPause (doc, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n}\nActionPause.prototype = new ActionAncetre()\n/**\n * ExÃ©cute l'action en suspendant l'animation en cours.\n * Pour continuer, l'utilisateur doit cliquer sur le bouton roouge.\n * @param {type} immediat\n */\nActionPause.prototype.execute = function (immediat) {\n  if (!immediat) {\n    this.doc.activeIconeContinuer()\n    this.doc.animationEnCours = false\n  }\n}\n/** @inheritDoc */\nActionPause.prototype.actionVisible = function () {\n  return false\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionRetourner\n/**\n * Action de retournement du compas\n * @extends iep.actionAncetre\n * @constructor\n * @param {iepDoc} doc\n * @param {Integer} tempo\n */\nfunction ActionRetourner (doc, tempo) {\n  ActionAncetre.call(this, doc, tempo)\n}\nActionRetourner.prototype = new ActionAncetre()\n\n/**\n * ExÃ©cution de l'action de retournement du compas\n * @param {boolean} immediat : Si true on ne passe pas Ã  l'action suivante\n */\nActionRetourner.prototype.execute = function (immediat) {\n  this.doc.compas.retourne()\n  if (!immediat) this.doc.actionSuivante(immediat)\n}\n/** @inheritDoc */\nActionRetourner.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.doc.compas, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionRotationInstrument\n/**\n * Action de rotation d'un instrument\n * A noter que le paramÃ¨tre correspondant Ã  la vitesse s'appelle sens\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.instrementAncetre} instrument : l'instrument Ã  tourner\n * @param {string} anglefin : l'angle de fin\n * @param {string} tempo :  le tempo de temporisation (ou null)\n * @param {string} deg10 : le nombre de degrÃ©s Ã  tourner Ã  chaque diziÃ¨me de seconde\n * ou null( sera alors de 8)\n */\nfunction ActionRotationInstrument (doc, instrument, anglefin, tempo, deg10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.instrument = instrument\n  this.anglefin = parseFloat(anglefin)\n  this.deg10 = (deg10 == null) ? 8 : Math.abs(parseFloat(deg10))\n}\n\nActionRotationInstrument.prototype = new ActionAncetre()\n/**\n * Fonction lanÃ§ant l'animation de rotation de l'instrument si immediat est false\n * @param {boolean} immediat\n */\nActionRotationInstrument.prototype.execute = function (immediat) {\n  if (!immediat) this.instrument.lanceAnimationRotation(this.anglefin, this.deg10)\n  else {\n    this.instrument.angle = this.anglefin\n    this.instrument.positionne()\n    if (!immediat) this.doc.actionSuivante(immediat)\n  }\n}\n/** @inheritDoc */\nActionRotationInstrument.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionRotationObjet\n/**\n * Action de rotation d'un objet\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document proprÃ©taire\n * @param {string} idel : l'id de l'objet Ã  faire tourner\n * @param {string} anglefin : l'angle de fin de rotation\n * @param {string} type : le type de l'objet Ã  faire tourner \"image\"\n * ou \"texte\" (la possibilitÃ© de tourner un texte n'Ã©tait pas prÃ©snete\n * dans la version Flash)\n * car seules les images ont des objets que l'on peut faire tourner)\n * @param {string} tempo :  le tempo de temporisation (peut Ãªtre null)\n * @param {string} deg10 : Le pas d'incrÃ©mentation de l'angle par dixiÃ¨me de seconde\n * Vaudra 8 si  null\n */\nfunction ActionRotationObjet (doc, idel, anglefin, type, tempo, deg10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.anglefin = parseFloat(anglefin)\n  this.deg10 = (deg10 == null) ? 8 : Math.abs(parseFloat(deg10))\n  this.objet = this.doc.getElement(idel, type)\n}\nActionRotationObjet.prototype = new ActionAncetre()\n\n/**\n * Fonction lanÃ§ant l'animation de l'objet seulement si immediat est false;\n * @param {boolean} immediat\n */\nActionRotationObjet.prototype.execute = function (immediat) {\n  const objet = this.objet\n  if (objet == null) {\n    if (!immediat) this.doc.actionSuivante(immediat)\n    return\n  }\n  if (!immediat) objet.lanceAnimationRotation(this.anglefin, this.deg10, this.tempo)\n  else {\n    objet.angle = this.anglefin\n    objet.positionne()\n    // this.doc.actionSuivante(immediat);\n  }\n}\n/** @inheritDoc */\nActionRotationObjet.prototype.actionVisible = function () {\n  return this.doc.getObjectVisibility(this.objet, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionTranslationInstrument\n/**\n * Action de translation d'un instrument\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {iep.instrumentAncetre} instrument : l'instrument Ã  translater\n * @param {string} xfin : l'abscisse de fin de translation\n * @param {string} yfin : l'ordonnÃ©e de fin de translation\n * @param {type} tempo : le tempo (peut Ãªtre null)\n * @param {type} pix10 : Le nombre de pixels par dixiÃ¨me de seconde pour la translation\n * Sera\n */\nfunction ActionTranslationInstrument (doc, instrument, xfin, yfin, tempo, pix10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.instrument = instrument\n  this.xfin = parseFloat(xfin)\n  this.yfin = parseFloat(yfin)\n  this.pix10 = (pix10 == null) ? 8 : parseFloat(pix10)\n}\nActionTranslationInstrument.prototype = new ActionAncetre()\n\nActionTranslationInstrument.prototype.execute = function (immediat) {\n  if (isNaN(this.xfin) || isNaN(this.yfin)) this.doc.actionSuivante(immediat)\n  else {\n    if (immediat) this.instrument.translate(this.xfin, this.yfin)\n    else this.instrument.lanceAnimationTranslation(this.xfin, this.yfin, this.pix10)\n  }\n}\n/** @inheritDoc */\nActionTranslationInstrument.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionTranslationObjet\n/**\n * Action translatant un objet\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc\n * @param {string} idel : L'id de l'objet Ã  translater\n * @param {string} xfin : l'abscisse de fin de translation\n * @param {string} yfin : L'ordonnÃ©e de fin de translation\n * @param {string} type : le type de l'objet\n * @param {string} tempo : Le tempo de temporisation\n * @param {string} pix10 : Le nombre de pixels pour la translation par dixiÃ¨me de seconde. Peut Ãªtre null\n */\nfunction ActionTranslationObjet (doc, idel, xfin, yfin, type, tempo, pix10) {\n  ActionAncetre.call(this, doc, tempo)\n  this.xfin = parseFloat(xfin)\n  this.yfin = parseFloat(yfin)\n  this.pix10 = (pix10 == null) ? 8 : parseFloat(pix10)\n  this.type = type\n  this.objet = this.doc.getElement(idel, type)\n}\nActionTranslationObjet.prototype = new ActionAncetre()\n\n/**\n * Fonction lanÃ§ant la translation de objet sauf si immediat est false\n * @param {type} immediat\n */\nActionTranslationObjet.prototype.execute = function (immediat) {\n  const objet = this.objet\n  if (objet == null) {\n    this.doc.actionSuivante(immediat)\n    return\n  }\n  if (!immediat) objet.lanceAnimationTranslation(this.xfin, this.yfin, this.pix10)\n  else {\n    objet.translate(this.xfin, this.yfin)\n  }\n}\n/** @inheritDoc */\nActionTranslationObjet.prototype.actionVisible = function () {\n  return this.doc.getObjectVisibility(this.objet, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionZoomInstrument\n/**\n * Action zoomant sur un instrument\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc\n * @param {iep.instrumentAncetre} instrument\n * @param {string} zoomfin : Le zoom de fin (de 0 Ã  100)\n * @param {string} tempo : Le tempo de factorisation\n * @param {string} vitesse : Facteur de rapiditÃ© de l'animation\n */\nfunction ActionZoomInstrument (doc, instrument, zoomfin, tempo, vitesse) {\n  ActionAncetre.call(this, doc, tempo)\n  this.instrument = instrument\n  this.zoomfin = parseFloat(zoomfin) / 100\n  this.vitesse = parseInt(vitesse)\n}\nActionZoomInstrument.prototype = new ActionAncetre()\n\nActionZoomInstrument.prototype.execute = function (immediat) {\n  if (!immediat) this.instrument.lanceAnimationZoom(this.zoomfin, this.vitesse)\n  else {\n    this.instrument.zoomfactor = this.zoomfin\n    this.instrument.positionne()\n    // this.doc.actionSuivante(immediat);\n  }\n}\n/** @inheritDoc */\nActionZoomInstrument.prototype.actionVisible = function () {\n  return this.doc.getInstrumentVisibility(this.instrument, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ActionAncetre = require('./actionAncetre')\nmodule.exports = ActionZoomObjet\n/**\n * Action zoomant sur un objet\n * @extends iep.actionAncetre\n * @constructor\n * @param {iep.iepDoc} doc : Le document propriÃ©taire\n * @param {Stirng} idel\n * @param {string} zoomfin : L'id de l'objet sur lequel on zoome\n * @param {string} type : Le type de l'objet\n * @param {string} tempo : Le tempo de factorisation\n * @param {string} vitesse : Facteur de vitesse pour l'animation\n */\nfunction ActionZoomObjet (doc, idel, zoomfin, type, tempo, vitesse) {\n  ActionAncetre.call(this, doc, tempo)\n  this.objet = this.doc.getElement(idel, type)\n  this.zoomfin = parseFloat(zoomfin) / 100\n  this.vitesse = vitesse\n  this.type = type\n}\nActionZoomObjet.prototype = new ActionAncetre()\n/**\n * Fonction lanÃ§ant l'animation de zoom de l'objet sauf si immediat est false\n * @param {type} immediat\n */\nActionZoomObjet.prototype.execute = function (immediat) {\n  const objet = this.objet\n  if (objet == null) {\n    this.doc.actionSuivante(immediat)\n    return\n  }\n  if (!immediat) objet.lanceAnimationZoom(this.zoomfin, this.vitesse)\n  else {\n    objet.zoomfactor = this.zoomfin\n    objet.positionne()\n    // this.doc.actionSuivante(immediat);\n  }\n}\n/** @inheritDoc */\nActionZoomObjet.prototype.actionVisible = function () {\n  return this.doc.getObjectVisibility(this.objet, this.indice - 1)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst IepDoc = require('./IepDoc')\nmodule.exports = IepApp\n\n/**\n * Fonction crÃ©ant un objet permettant de gÃ©rer plusieurs figures instrumenPoche\n * dans des svg diffÃ©rents\n * @param {Object} [options]\n * @param {boolean} [options.debug] passer true pour avoir des infos de debug en console\n * @constructor\n */\nfunction IepApp (options) {\n  this.debug = Boolean(options && options.debug)\n  if (this.debug) console.log('Mode debug activÃ©')\n  this.docs = []\n  const self = this\n  window.addEventListener('unload', () => self.closeAllXMLWindows())\n}\n\n/**\n * Fonction ajoutant un document Ã  un iepApp\n * @param {string|Element} svg : Le svg (l'Ã©lÃ©ment du dom ou son id) dans lequel vont se faire les affichages.\n * @param {string} chDoc : La chaÃ®ne XML dÃ©crivant le document.\n * @param {boolean} [autoStart=true] Passer false pour ne pas dÃ©marrer l'animation dÃ¨s le chargement\n */\nIepApp.prototype.addDoc = function (svg, chDoc, autoStart = true) {\n  if (typeof svg === 'string') svg = document.getElementById(svg)\n  if (!svg) return new Error('svg manquant')\n  if (svg.localName !== 'svg') return new Error('svg incorrect')\n  const options = {\n    autoStart,\n    debug: this.debug\n  }\n  const doc = new IepDoc(svg, chDoc, options)\n  this.docs.push(doc)\n  svg.iepDoc = doc // Pour que les boutons accÃ¨dent au document.\n  return doc\n}\n\n/**\n * Fonction utilisÃ©e lors de la fermeture d'une fenÃªtre contenant des figures\n * InstrumenPoche dans des SVG.\n * Elle provoque la fermeture des Ã©ventuelles fenÃªtres popup contenant le code\n * XML d'une figure (obtenues en cliquant sur une icÃ´ne XML)\n */\nIepApp.prototype.closeAllXMLWindows = function () {\n  for (let i = 0; i < this.docs.length; i++) {\n    const doc = this.docs[i]\n    if (doc.windowxml != null) doc.windowxml.close()\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst Vect = require('../types/vecteur')\nconst Compas = require('../instruments/compas')\nconst Equerre = require('../instruments/equerre')\nconst Rapporteur = require('../instruments/rapporteur')\nconst Regle = require('../instruments/regle')\nconst Requerre = require('../instruments/requerre')\nconst Crayon = require('../instruments/crayon')\nconst ActionCoucherCompas = require('../actions/actionCoucherCompas')\nconst ActionCreation = require('../actions/actionCreation')\nconst ActionEcarterCompas = require('../actions/actionEcarterCompas')\nconst ActionEcrireTexte = require('../actions/actionEcrireTexte')\nconst ActionGlisser = require('../actions/actionGlisser')\nconst ActionLeverCompas = require('../actions/actionLeverCompas')\nconst ActionMasquer = require('../actions/actionMasquer')\nconst ActionMasquerInstrument = require('../actions/actionMasquerInstrument')\nconst ActionModifierLongueur = require('../actions/actionModifierLongueur')\nconst ActionMontrer = require('../actions/actionMontrer')\nconst ActionMontrerGraduations = require('../actions/actionMontrerGraduations')\nconst ActionMontrerInstrument = require('../actions/actionMontrerInstrument')\nconst ActionMontrerNombres = require('../actions/actionMontrerNombres')\nconst ActionNommerPoint = require('../actions/actionNommerPoint')\nconst ActionPause = require('../actions/actionPause')\nconst ActionRotationInstrument = require('../actions/actionRotationInstrument')\nconst ActionRetourner = require('../actions/actionRetourner')\nconst ActionRotationObjet = require('../actions/actionRotationObjet')\nconst ActionTranslationInstrument = require('../actions/actionTranslationInstrument')\nconst ActionTranslationObjet = require('../actions/actionTranslationObjet')\nconst ActionZoomInstrument = require('../actions/actionZoomInstrument')\nconst ActionZoomObjet = require('../actions/actionZoomObjet')\nconst ActionModifierRayon = require('../actions/actionModifierRayon')\nconst Angle = require('../objets/angle')\nconst AngleDroit = require('../objets/angleDroit')\nconst Arc = require('../objets/arc')\nconst Gabarit = require('../objets/gabarit')\nconst Axe = require('../objets/axe')\nconst DemiDroite = require('../objets/demiDroite')\nconst Droite = require('../objets/droite')\nconst Imag = require('../objets/Imag')\nconst LigneContinue = require('../objets/ligneContinue')\nconst MarqueSegment = require('../objets/marqueSegment')\nconst NomPoint = require('../objets/nomPoint')\nconst Point = require('../objets/point')\nconst Polygone = require('../objets/polygone')\nconst Quadrillage = require('../objets/quadrillage')\nconst Repere = require('../objets/repere')\nconst Segment = require('../objets/segment')\nconst Texte = require('../objets/texte')\n\nmodule.exports = IepDoc\n\n// la liste des outils\nconst outils = ['compas', 'equerre', 'rapporteur', 'regle', 'requerre', 'crayon']\n\n/**\n * Document reprÃ©sentant une figure affichÃ©e dans le SVG d'id idDoc\n * @constructor\n * @param {Element} svg  Le SVG contenant la figure\n * @param {string} chdoc La chaÃ®ne contenant le code XML dÃ©crivant la figure.\n * @param {boolean} [autoStart=false] : Si true l'animation dÃ©marre automatiquement\n * @param {Object} [options]\n * @param {boolean} [options.debug] passer true pour avoir des infos de debug en console\n * @param {boolean} [options.autoStart=false] passer true pour dÃ©marrer l'animation dÃ¨s le chargement\n */\nfunction IepDoc (svg, chdoc, options) {\n  /*\n   * L'Ã©lÃ©ment html du svg\n   * @type Element\n   */\n  this.svg = svg\n  // pour la compatibilitÃ© ascendante, on traite le 3e argument boolÃ©en comme autostart\n  if (typeof options === 'boolean') {\n    this.autoStart = options\n    options = {}\n  } else {\n    if (typeof options !== 'object') options = {}\n    this.autoStart = Boolean(options.autoStart)\n  }\n  this.debug = Boolean(options.debug)\n  /**\n   * Pointera sur la fenÃªtre contenant le code xml\n   * @type Window\n   */\n  this.windowxml = null\n  let ch = chdoc\n  // On ajoute l'en-tÃªte xml si elle a Ã©tÃ© ommise.\n  if (ch.search(/<?xml/gi) === -1) ch = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + ch\n  // On Ã©limine les <action_ suivis de chiffres\n  ch = ch.replace(/<action[_]\\d*/gi, '<action')\n  // On Ã©limine les remarques html\n  ch = ch.replace(/<!--.*-->/g, '')\n  // On corrige les oublis d'espaces et les -- dans les attributs\n  ch = ch.replace(/(=\"[^\"]*\")([^ ])/g, '$1 $2').replace(/--/g, '')\n  // On corrige les Ã©ventuels << ou >>\n  ch = ch.replace(/<</g, '<').replace(/>>/g, '>')\n  // Certains auteurs ont mis des <actiontempo= sans espace ou autre\n  ch = ch.replace(/<action(\\w)/gi, '<action $1')\n  // Les commentaires peuvent un attribut texte ce qui pose des problÃ¨mes dans elimineDoublonsXML\n  // On les remplace par un attribut texteCommentaire\n  ch = ch.replace(/<commentaire\\s*texte\\s*=/gi, '<commentaire texteCommentaire =')\n  // On corrige les attributs en doublon\n  ch = kernel.elimineDoublonsXML(ch)\n  // On Ã©limine l'en-tÃªte qui contient parfois des caractÃ¨res bizarres\n  /**\n   * La string xml du doc\n   * @type string\n   */\n  this.codexml = ch // MÃ©morisÃ© pour pouvoir Ãªtre affiche quand on clique sur le bouton XML\n\n  // on corrige le tag ouvrant et fermant, parfois folklorique dans les scripts existants\n  const ind1 = ch.search(/<\\s*INSTRUMENPOCHE/gi)\n  const ind2 = ch.indexOf('>', ind1)\n  const ind3 = ch.search(new RegExp('<\\\\s*/INSTRUMENPOCHE', 'gi')) // Pas de > dans la recherche car certains auteurs se sont trompÃ©s sur la balise de fin\n  this.chdoc = '<INSTRUMENPOCHE>' + ch.substring(ind2 + 1, ind3) + '</INSTRUMENPOCHE>'\n\n  this.actions = [] // Un tableau qui contiendra toutes les actions de la figure.\n  // Une liste des Ã©lÃ©ments graphiques de type objet graphique traitÃ©s par la figure.\n  // Chaque Ã©lÃ©ment sera identifiÃ© par un nÂ° d'id et par son type\n  // Lorsqu'un Ã©lÃ©ment de mÃªme id et de mÃªme nature qu'un Ã©lÃ©ment dÃ©jÃ  existant est crÃ©Ã©, lors de l'exÃ©cution\n  // de l'action de crÃ©ation, son Ã©lÃ©ment graphique remplacera celui de l'Ã©lement dÃ©jÃ  existant\n  // dans le DOM du svg de la figure\n  this.elements = []\n  this.compasRetourne = false\n  // On crÃ©e les instruments dÃ¨s le dÃ©but car Ã  chaque fois qu'un instrument est translatÃ©, tournÃ©, zoomÃ©,\n  // certains objet crÃ©Ã©s ont besoin de connaÃ®tre l'Ã©tat des instruments pour leur crÃ©ation\n  this.compasLeve = null\n  this.compas = new Compas(this)\n  this.equerre = new Equerre(this)\n  this.rapporteur = new Rapporteur(this)\n  this.regle = new Regle(this)\n  this.requerre = new Requerre(this)\n  this.crayon = new Crayon(this)\n  // On parse le xml\n  this.xmldoc = kernel.parseXMLDoc(this.chdoc)\n  this.tabact = this.xmldoc.getElementsByTagName('action')\n  this.started = false\n  this.animationEnCours = true // Sera mis Ã  false pour le pas Ã  pas\n  // indiceActionEnCours est l'indice de la premiÃ¨re future action qui devra Ãªtre exÃ©cutÃ©e\n  this.indiceActionEnCours = 0\n  this.creeActions()\n  const t = this\n  // Les Ã©vÃ©nements souris pour pouvoir gÃ©rer les dÃ©placements de la barre d'icÃ´nes\n  svg.addEventListener('mousemove', function (ev) { t.onmousemove(ev, ev.clientX, ev.clientY) }, false)\n  svg.addEventListener('mouseup', function () { t.onmouseup() }, false)\n  svg.addEventListener('mouseleave', function () { t.onmouseleave() }, false)\n  svg.addEventListener('touchmove', function (ev) { t.onmousemove(ev, ev.touches[0].pageX, ev.touches[0].pageY) }, false)\n  svg.addEventListener('touchend', function () { t.onmouseup() }, false)\n  svg.addEventListener('touchcancel', function () { t.onmouseup() }, false)\n  svg.addEventListener('touchleave', function () { t.onmouseleave() }, false)\n  if (this.debug) console.log('iepDoc instanciÃ© :', this)\n};\n\n/**\n * Fontion apppelÃ©e Ã  la fin du chargement de certains onjets dont le chargement est asynchrone : les images\n * et les textes dont l'Ã©criture nÃ©cessite l'utilisation du LaTeX.\n * Renvoie true si tous les objets de la figure sont bien chargÃ©s.\n * Au bout de 10 secondes Ã©coulÃ©es affiche un message d'erreur\n * @returns\n */\nIepDoc.prototype.waitForReadyState = function () {\n  if (this.started) return\n  const ready = this.verifyReadyState()\n  if (ready) {\n    this.start()\n  } else {\n    const self = this\n    setTimeout(function () {\n      self.waitForReadyState()\n    }, 200) // On vÃ©rifie toutes les 200ms\n  }\n}\n\n/**\n * Fonction renvoyant true seulement si tous les objets de la figure sont bien chargÃ©s\n * @returns {boolean}\n */\nIepDoc.prototype.verifyReadyState = function () {\n  if (this.debug) {\n    const pasPretes = this.actions.filter(action => !action.ready)\n    if (pasPretes.length) console.log(`${pasPretes.length} actions pas encore prÃªtes (sur ${this.actions.length})`)\n    else console.log(`Les ${this.actions.length} actions sont prÃªtes`)\n  }\n  return this.actions.every(action => action.isReady)\n}\n\n/**\n * Fonction crÃ©ant tous les Ã©lÃ©ments graphiques des aactions de crÃ©ation de la figure.\n * Seules les actions de crÃ©ations d'objets ont une fonction creegElement faisant quelquechose\n */\nIepDoc.prototype.creeElementsGraphiques = function () {\n  this.actions.forEach(action => action.creegElement())\n}\n\n/**\n * Fonction rÃ©initilisant la position initiale de tous les instruments et les cachant.\n */\nIepDoc.prototype.initialiseOutils = function () {\n  outils.forEach(outil => {\n    this[outil].initialisePosition()\n    this[outil].montre(false)\n  })\n  this.compas.leve = false\n}\n\n/**\n * Fonction retirnat du DOM du SVG les Ã©lÃ©ments graphiques des outils et les recrÃ©ant\n * de faÃ§on Ã  ce que les outils soient crÃ©Ã©es dans le DOM aprÃ¨s les Ã©lÃ©ments graphiques\n * des objets de la figure.\n */\nIepDoc.prototype.recreeOutils = function () {\n  outils.forEach(outil => {\n    this[outil].updateg()\n    this[outil].montre(false)\n  })\n  this.compasLeve = null\n}\n\n/**\n * Fonction lancÃ©e aprÃ¨s le chargement complet de la figure.\n * Toutes les actions de crÃ©ation d'objet de la figure crÃ©ent leur propre Ã©lÃ©ment graphique dans le DOM du svg\n * qu'elles stockent dans une variable this.g. Ces Ã©lÃ©ments sont initialeÃ¹ent tous cachÃ©s.\n * Ensuite on recrÃ©e dans le DOM les Ã©lÃ©ments graphiques des outils pour qu'ils soient situÃ©s aprÃ¨s les objets crÃ©Ã©s.\n * Puis on crÃ©e les icÃ´nes et on les initialise Ã  leur Ã©tat initial  pour le dÃ©marrage de la figure.\n */\nIepDoc.prototype.start = function () {\n  this.started = true\n  this.creeElementsGraphiques()\n  this.recreeOutils()\n  this.creeIcones()\n  this.InitialiseIcones()\n  if (this.autoStart) {\n    this.onPlay()\n  } else {\n    this.montreIcone('Pause', false)\n    this.montreIcone('Play', true)\n  }\n}\n\n/**\n * Fonction crÃ©ant les icÃ´nes de la figure.\n */\nIepDoc.prototype.creeIcones = function () {\n  // Toutes les images seront contenues dans un g element appelÃ© barreIcones\n  const nbIcones = 8\n  const t = this\n  this.barreIcones = document.createElementNS(kernel.svgsn, 'g')\n  this.creeElementsPourIcones()\n  this.iconGoBegin = this.iconeGoBegin(0, 0, 'fonce')\n  this.iconGoBeginGris = this.iconeGoBegin(0, 0, 'clair')\n  this.iconGoBegin.onclick = function () { t.onGoBegin() }\n  this.barreIcones.appendChild(this.iconGoBegin)\n  this.barreIcones.appendChild(this.iconGoBeginGris)\n  this.iconStepPrev = this.iconeStepPrev(32, 0, 'fonce')\n  this.iconStepPrevGris = this.iconeStepPrev(32, 0, 'clair')\n  this.iconStepPrev.onclick = function () { t.onStepPrev() }\n  this.barreIcones.appendChild(this.iconStepPrev)\n  this.barreIcones.appendChild(this.iconStepPrevGris)\n  this.iconPause = this.iconePause(64, 0, 'fonce')\n  this.iconPauseGris = this.iconePause(64, 0, 'clair')\n  this.iconPause.onclick = function () { t.onPause() }\n  this.barreIcones.appendChild(this.iconPause)\n  this.barreIcones.appendChild(this.iconPauseGris)\n  this.iconPlay = this.iconePlay(96, 0, 'fonce')\n  this.iconPlayGris = this.iconePlay(96, 0, 'clair')\n  this.iconPlay.onclick = function () { t.onPlay() }\n  this.barreIcones.appendChild(this.iconPlay)\n  // IcÃ´ne rouge Ã  activer quand on rencontre une pause\n  // Cette icÃ´ne ne sera visible et active que quand on rencontre une action de pause\n  this.iconPlay2 = this.iconePlay(96, 0, 'rouge')\n  this.iconPlay2.setAttribute('visibility', 'hidden')\n  this.iconPlay2.onclick = function () { t.onPlayContinuer() }\n  this.barreIcones.appendChild(this.iconPlay2)\n  this.barreIcones.appendChild(this.iconPlayGris)\n  this.iconRestart = this.iconeRestart(128, 0, 'fonce')\n  this.iconRestartGris = this.iconeRestart(128, 0, 'clair')\n  this.iconRestart.onclick = function () { t.onRestart() }\n  this.barreIcones.appendChild(this.iconRestart)\n  this.barreIcones.appendChild(this.iconRestartGris)\n  this.iconStepNext = this.iconeStepNext(160, 0, 'fonce')\n  this.iconStepNextGris = this.iconeStepNext(160, 0, 'clair')\n  this.iconStepNext.onclick = function () { t.onStepNext() }\n  this.barreIcones.appendChild(this.iconStepNext)\n  this.barreIcones.appendChild(this.iconStepNextGris)\n  this.iconGoEnd = this.iconeGoEnd(192, 0, 'fonce')\n  this.iconGoEndGris = this.iconeGoEnd(192, 0, 'clair')\n  this.iconGoEnd.onclick = function () { t.onGoEnd() }\n  this.barreIcones.appendChild(this.iconGoEnd)\n  this.barreIcones.appendChild(this.iconGoEndGris)\n  this.iconXML = this.iconeXML(224, 0, 'fonce')\n  this.iconXMLGris = this.iconeXML(224, 0, 'clair')\n  this.iconXML.onclick = function () { t.onXML() }\n  this.barreIcones.appendChild(this.iconXML)\n  this.barreIcones.appendChild(this.iconXMLGris)\n\n  this.hauteurBarre = 32\n  this.demiLargeurBarre = nbIcones * 16\n  // this.xbarre et this.ybarre contiennent les coordonnÃ©es initiales de la barre d'outils dans le SVG\n  this.xbarre = 50 // Barre placÃ©e Ã  gauche de bord\n  this.ybarre = 4\n  this.barreIcones.setAttribute('transform', 'translate(' + this.xbarre + ',4)')\n  this.svg.appendChild(this.barreIcones)\n  // Ajout ge gestionnaires de souris sur la barre d'icÃ´nes\n  this.isDraggingBarre = false\n  this.barreIcones.addEventListener('mousedown', function (ev) { t.onmousedownbarre(ev.clientX, ev.clientY) }, false)\n  this.barreIcones.addEventListener('mousemove', function (ev) { t.onmousemovebarre(ev.clientX, ev.clientY) }, false)\n  // C'est le SVG qui gÃ¨re les Ã©vÃ©nements mouseup\n  this.barreIcones.addEventListener('touchstart', function (ev) { t.onmousedownbarre(ev.touches[0].pageX, ev.touches[0].pageY) }, false)\n  this.barreIcones.addEventListener('touchmove', function () { t.onmousemovebarre() }, false)\n  // C'est le svg qui gÃ¨re les Ã©vÃ©nements touhcance et touchend\n  // this.barreIcones.addEventListener(\"touchcancel\",function() {t.onmouseupbarre()},false);\n  // Initialisation de la position relative de la barre d'outils\n  // this.deltax et this.deltay contiendront de dÃ©calage relatif de la barre d'outils par rapport\n  // Ã  sa position initiale lorsqu'on la fait glisser.\n  this.deltax = 0\n  this.deltay = 0\n}\n\n/**\n * Fonction appelÃ©e quand on clique ou fait un appui tactile sur la barre d'icÃ´nes de la figure\n * @param {Integer} xmouse : l'abscisse du point cliquÃ© par la souris\n * @param {Integer} ymouse : l'ordonnÃ©e du point cliquÃ© par la souris\n */\nIepDoc.prototype.onmousedownbarre = function (xmouse, ymouse) {\n  if (this.animationEnCours) return\n  this.isDraggingBarre = true\n  this.xcapturebarre = xmouse\n  this.ycapturebarre = ymouse\n}\n\n/**\n * Fonction appelÃ©e au survol de la barre d'icÃ´nes par la souris ou du pointeur tactive\n */\nIepDoc.prototype.onmousemovebarre = function () {\n  if (this.animationEnCours) {\n    this.barreIcones.style.cursor = 'default'\n    this.isDraggingBarre = false\n    return\n  }\n  this.barreIcones.style.cursor = 'pointer'\n}\n\n/**\n * Fonction appelÃ©e au ssurvol du svg par la souris ou le pointeur tactile\n * @param {event} ev\n * @param {Integer} xmouse : l'abscisse pointÃ©e par la souris\n * @param {Integer} ymouse : l'ordonnÃ©e pointÃ©e par la souris\n */\nIepDoc.prototype.onmousemove = function (ev, xmouse, ymouse) {\n  if (this.isDraggingBarre) {\n    const w = parseInt(this.svg.getAttribute('width'))\n    const h = parseInt(this.svg.getAttribute('height'))\n    const dx = xmouse - this.xcapturebarre\n    const dy = ymouse - this.ycapturebarre\n    const deltax = this.deltax + dx\n    const deltay = this.deltay + dy\n    const xpos = this.xbarre + deltax\n    const ypos = this.ybarre + deltay\n    if ((xpos <= w - 2 * this.demiLargeurBarre) && (xpos >= 0) &&\n            (ypos >= 0) && (ypos <= h - this.hauteurBarre)) {\n      this.barreIcones.setAttribute('transform', 'translate(' + xpos + ',' + ypos + ')')\n      this.deltax = deltax\n      this.deltay = deltay\n      this.xcapturebarre = xmouse\n      this.ycapturebarre = ymouse\n    }\n    ev.preventDefault() // Pour Ã©viter que des Ã©lÃ©ments texte soient sÃ©lectionnÃ©s en bougeant la souris\n  }\n  // ev.preventDefault(); // Pour Ã©viter que des Ã©lÃ©ments texte soient sÃ©lectionnÃ©s en bougeant la souris\n  // AbandonnÃ© car alors on e peut pls zoomer ou dÃ©zoomer sur pÃ©riphÃ©rique mobile\n}\n/**\n * Fonction appelÃ©e lorsque le bouton de la souris est relÃ¢chÃ© sur le svg\n */\nIepDoc.prototype.onmouseup = function () {\n  this.isDraggingBarre = false\n}\n/**\n * Fonction appelÃ©e quand on relÃ¢che le bouton de la souris sur la figure\n */\nIepDoc.prototype.onmouseleave = function () {\n  this.isDraggingBarre = false\n}\n/**\n * Fonction appelÃ©e quand on clique sur le bouton XML de la barre d'outils\n * Ouvre une fenÃªtre affichant le code XML de la figure\n */\nIepDoc.prototype.onXML = function () {\n  if (this.windowxml == null) this.windowxml = this.popup()\n  else this.windowxml.focus()\n}\n\n/**\n * Fonction activant ou dÃ©sactivant l'icÃ´ne de nom nomIcone\n * Si bvisible est true, l'icÃ´ne normale est montrÃ©e et l'icÃ´ne grisÃ©e est cachÃ©e\n * Si bvisible est false,l'icÃ´ne normale est masquÃ©e et l'icÃ´ne grisÃ©e est montrÃ©e\n * @param {string} nomIcone\n * @param {boolean} bvisible\n */\nIepDoc.prototype.montreIcone = function (nomIcone, bvisible) {\n  const nom = 'icon' + nomIcone\n  this[nom].setAttribute('visibility', bvisible ? 'visible' : 'hidden')\n  this[nom + 'Gris'].setAttribute('visibility', bvisible ? 'hidden' : 'visible')\n}\n/**\n * Fonction activant l'icÃ´ne rouge Continuer et dÃ©sactivant les autres icÃ´nes\n */\nIepDoc.prototype.activeIconeContinuer = function () {\n  this.montreIcone('GoBegin', false)\n  this.montreIcone('StepPrev', false)\n  this.montreIcone('Pause', false)\n  this.montreIcone('Play', false)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', false)\n  this.montreIcone('GoEnd', false)\n  this.iconPlayGris.setAttribute('visibility', 'hidden')\n  this.iconPlay2.setAttribute('visibility', 'visible')\n  this.montreIcone('XML', true)\n}\n/**\n * Fonction dÃ©sactivant toutes les icÃ´nes suf l'icÃ´ne de pause\n */\nIepDoc.prototype.InitialiseIcones = function () {\n  this.montreIcone('GoBegin', false)\n  this.montreIcone('StepPrev', false)\n  this.montreIcone('Pause', true)\n  this.montreIcone('Play', false)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', false)\n  this.montreIcone('GoEnd', false)\n  this.montreIcone('XML', false)\n}\n/**\n * Fonction appelÃ©e lors d'un clic sur l'icÃ´ne de retour de la figure au dÃ©but\n */\nIepDoc.prototype.onGoBegin = function () {\n  this.animationEnCours = false\n  this.initialise()\n  this.montreIcone('GoBegin', false)\n  this.montreIcone('StepPrev', false)\n  this.montreIcone('Pause', false)\n  this.montreIcone('Play', true)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', true)\n  this.montreIcone('GoEnd', true)\n  this.montreIcone('XML', true)\n  this.indiceActionEnCours = 0\n}\n/**\n * Fonction appelÃ©e lors d'un clic sur l'icÃ´ne de saut Ã  la fin de la figure\n */\nIepDoc.prototype.onGoEnd = function () {\n  this.animationEnCours = false\n  this.initialise()\n  this.montreIcone('GoBegin', true)\n  this.montreIcone('StepPrev', true)\n  this.montreIcone('Pause', false)\n  this.montreIcone('Play', false)\n  this.montreIcone('Restart', true)\n  this.montreIcone('StepNext', false)\n  this.montreIcone('GoEnd', false)\n  this.montreIcone('XML', true)\n  this.executeJusque(this.actions.length - 1)\n  this.indiceActionEnCours = this.actions.length\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne play de la figure\n */\nIepDoc.prototype.onPlay = function () {\n  this.animationEnCours = true\n  this.montreIcone('GoBegin', false)\n  this.montreIcone('StepPrev', false)\n  this.montreIcone('Pause', true)\n  this.montreIcone('Play', false)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', false)\n  this.montreIcone('GoEnd', false)\n  this.montreIcone('XML', false)\n  this.actions[this.indiceActionEnCours].execute(false)\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne continuer de la figure\n */\n\nIepDoc.prototype.onPlayContinuer = function () {\n  if (this.indiceActionEnCours === this.actions.length) {\n    this.onGoEnd()\n    return\n  }\n  this.iconPlay2.setAttribute('visibility', 'hidden')\n  this.montreIcone('GoBegin', false)\n  this.montreIcone('StepPrev', false)\n  this.montreIcone('Pause', true)\n  this.montreIcone('Play', false)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', false)\n  this.montreIcone('GoEnd', false)\n  this.montreIcone('XML', false)\n  this.animationEnCours = true\n  this.indiceActionEnCours++\n  this.actions[this.indiceActionEnCours].execute(false)\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne de retour au dÃ©but et jouer\n */\n\nIepDoc.prototype.onRestart = function () {\n  const t = this\n  if (this.animationEnCours) {\n    this.animationEnCours = false\n    setTimeout(function () {\n      t.onRestart()\n    }, 100)\n    return\n  }\n  if (this.animationEnCours) return\n  this.animationEnCours = false\n  this.initialise()\n  this.indiceActionEnCours = 0\n  this.onPlay()\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne pause de la figure\n */\n\nIepDoc.prototype.onPause = function () {\n  const t = this\n  t.animationEnCours = false\n  // On laisse 5 dixiÃ¨mes de seconde pour finir l'animation en cours.\n  setTimeout(function () {\n    t.montreIcone('GoBegin', true)\n    t.montreIcone('StepPrev', true)\n    t.montreIcone('Pause', false)\n    t.montreIcone('Play', true)\n    t.montreIcone('Restart', true)\n    t.montreIcone('StepNext', true)\n    t.montreIcone('GoEnd', true)\n    t.montreIcone('XML', true)\n  }, 500)\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne suivant de la figure (pas Ã  pas)\n */\nIepDoc.prototype.onStepNext = function () {\n  const nbActions = this.actions.length\n  this.animationEnCours = false\n  if (this.indiceActionEnCours < nbActions) {\n    if (this.actions[this.indiceActionEnCours].actionVisible()) this.indiceActionEnCours++\n    else this.indiceActionEnCours = this.indiceProchaineActionVisible(this.indiceActionEnCours) + 1\n    this.executeJusque(this.indiceActionEnCours - 1)\n  }\n  const derniereAction = this.indiceActionEnCours === this.actions.length\n  this.montreIcone('GoBegin', true)\n  this.montreIcone('StepPrev', true)\n  this.montreIcone('Pause', false)\n  this.montreIcone('Play', !derniereAction)\n  this.montreIcone('Restart', true)\n  this.montreIcone('StepNext', !derniereAction)\n  this.montreIcone('GoEnd', !derniereAction)\n  this.montreIcone('XML', true)\n}\n/**\n * Fonction appelÃ©e quand on clique sur l'icÃ´ne prÃ©cÃ©dent de la figure (pas Ã  pas)\n */\nIepDoc.prototype.onStepPrev = function () {\n  this.animationEnCours = false\n  // this.indiceActionEnCours--;\n  this.indiceActionEnCours = this.indicePrecedenteActionVisible(this.indiceActionEnCours - 1)\n  if (this.indiceActionEnCours > 0) this.executeJusque(this.indiceActionEnCours - 1)\n  const premiereAction = this.indiceActionEnCours === 0\n  this.montreIcone('GoBegin', !premiereAction)\n  this.montreIcone('StepPrev', !premiereAction)\n  this.montreIcone('Pause', false)\n  this.montreIcone('Play', true)\n  this.montreIcone('Restart', false)\n  this.montreIcone('StepNext', true)\n  this.montreIcone('GoEnd', true)\n  this.montreIcone('XML', true)\n}\n\n/**\n * Fonction cachant tous les Ã©lÃ©ments graphiques de la figure, rÃ©initialisant tous les outils\n * et rÃ©initialisant la position de tous les objets ou instruments qui peuvent Ãªtre translatÃ©s, tournÃ©s ou zoomÃ©s\n * Ã  savoir les points et images\n */\nIepDoc.prototype.initialise = function () {\n  let i, el\n  const svg = this.svg\n  for (i = 0; i < svg.childNodes.length; i++) {\n    el = svg.childNodes[i]\n    if (el !== this.barreIcones) {\n      try { // Pour compatibilitÃ© avec explorer\n        svg.childNodes[i].setAttribute('visibility', 'hidden')\n      } catch (e) {}\n    }\n  }\n  for (i = 0; i < this.actions.length; i++) {\n    const action = this.actions[i]\n    if (action instanceof ActionCreation) action.objet.initialisePosition()\n  }\n  this.initialiseOutils()\n}\n/**\n * Fonction donnant l'Ã©tat de visibilitÃ© de l'instrument instrument aprÃ¨s l'exÃ©cution\n * de l'action d'indice indaction\n * @param {iep.instrumentAncetre} instrument\n * @param {Integer} indaction\n * @returns {boolean}\n */\nIepDoc.prototype.getInstrumentVisibility = function (instrument, indaction) {\n  if (indaction === -1) return false\n  let action\n  let visible = false\n  for (let i = 0; i <= indaction; i++) {\n    action = this.actions[i]\n    if (action instanceof ActionMontrerInstrument) {\n      if (action.instrument === instrument) visible = true\n    } else if (action instanceof ActionMasquerInstrument) {\n      if (action.instrument === instrument) visible = false\n    }\n  }\n  return visible\n}\n/**\n * Fonction donnant l'Ã©tat de visibilitÃ© de l'objet objet aprÃ¨s l'exÃ©cution\n * de l'action d'indice indaction\n * @param {iep.ObjetBase} objet\n * @param {Integer} indaction\n * @returns {boolean}\n */\nIepDoc.prototype.getObjectVisibility = function (object, indaction) {\n  if (indaction === -1) return false\n  let action\n  let visible = false\n  for (let i = 0; i <= indaction; i++) {\n    action = this.actions[i]\n    if (action instanceof ActionMontrer) {\n      if (action.objet === object) visible = true\n    } else if (action instanceof ActionMasquer) {\n      if (action.objet === object) visible = false\n    }\n  }\n  return visible\n}\n/**\n * Fonction donnant l'Ã©tat du compas (levÃ© ou couchÃ©) aprÃ¨s l'exÃ©cution\n * de l'action d'indice indaction.\n * Si le compas est couchÃ©, renvoie \"couche\", s'il est leve, renvoie \"leve\"\n * @param {Integer} indaction\n * @returns {string}\n */\nIepDoc.prototype.getCompasStatus = function (indaction) {\n  if (indaction === -1) return 'couche'\n  let couche = true\n  let action\n  for (let i = 0; i <= indaction; i++) {\n    action = this.actions[i]\n    if (action instanceof ActionCoucherCompas) {\n      couche = true\n    } else if (action instanceof ActionLeverCompas) {\n      couche = false\n    }\n  }\n  return couche ? 'couche' : 'leve'\n}\n/**\n * Fonction renvoyant l'indice de la prochaine action qui aura une action visible sur la figure\n * Ã  partir de l'indice ind\n * Si aucune action visible ne figure aprÃ¨s ind, renvoie this.actions.length\n * @param {type} ind\n * @returns {iep.iepDoc.prototype.indiceProchaineActionVisible.i|iep.iepDoc.actions.length}\n */\nIepDoc.prototype.indiceProchaineActionVisible = function (ind) {\n  if (ind >= this.actions.length) return this.actions.length - 1\n  for (let i = ind; i < this.actions.length; i++) {\n    if (this.actions[i].actionVisible()) return i\n  }\n  return this.actions.length - 1\n}\n/**\n * Fonction renvoyant l'indice de la prÃ©cÃ©dene action qui aura une action visible sur la figure\n * Ã  partir de l'indice ind\n * Si aucune action visible ne figure avant ind, renvoie 0\n * @param {type} ind\n * @returns {iep.iepDoc.prototype.indiceProchaineActionVisible.i|iep.iepDoc.actions.length}\n */\n\nIepDoc.prototype.indicePrecedenteActionVisible = function (ind) {\n  if (ind < 0) return 0\n  if (ind === this.actions.length) ind--\n  for (let i = ind; i >= 0; i--) {\n    if (this.actions[i].actionVisible()) return i\n  }\n  return 0\n}\n/**\n * Fonction montrant les instruments Ã  leur Ã©tape de visibilitÃ© Ã  l'Ã©tape n\n * @param {Integer} n : l'indice de la derniÃ¨re action exÃ©cutÃ©e\n */\nIepDoc.prototype.montreInstrumentsEtape = function (n) {\n  let visible = this.getInstrumentVisibility(this.compas, n)\n  if (this.compas.leve) this.compasLeve.montre(visible)\n  else this.compas.montre(visible)\n  visible = this.getInstrumentVisibility(this.crayon, n)\n  this.crayon.montre(visible)\n  visible = this.getInstrumentVisibility(this.equerre, n)\n  this.equerre.montre(visible)\n  visible = this.getInstrumentVisibility(this.rapporteur, n)\n  this.rapporteur.montre(visible)\n  visible = this.getInstrumentVisibility(this.regle, n)\n  this.regle.montre(visible)\n  visible = this.getInstrumentVisibility(this.requerre, n)\n  this.requerre.montre(visible)\n}\n/**\n * Fonction excÃ©cutant sans animation toutes les actions de la figure jusqu'Ã  l'indice indfin compris\n * @param {Integer} indfin\n */\nIepDoc.prototype.executeJusque = function (indfin) {\n  if (indfin >= this.actions.length) return\n  this.initialise()\n  this.initialiseOutils()\n  this.animationEnCours = false\n  for (let i = 0; i <= indfin; i++) { this.actions[i].execute(true) } // true pour que l'exÃ©cution soit immÃ©diate\n  this.montreInstrumentsEtape(indfin)\n}\n/**\n * Fonction recherchant s'il y a dÃ©jÃ  dans la liste doc.elements un Ã©lÃ©ment de mÃªme id et de mÃªme\n * nature.\n * Si oui on remplace l'ancien. Sinon on rajoute element Ã  la liste.\n * @param {iep.doc.elements[]} element\n */\nIepDoc.prototype.addElement = function (element) {\n  let i, el\n  for (i = 0; i < this.elements.length; i++) {\n    el = this.elements[i]\n    // S'il existe un Ã©lÃ©ment de mÃªme type et de mÃªme id, on le remplace par le nouveau\n    if ((el.id === element.id) && (el.objet === element.objet)) {\n      this.elements[i] = element\n      return\n    }\n  }\n  // S'il n'y a pas d'Ã©lÃ©ment du mÃªme type et de mÃªme id, on ajoute le nouvel Ã©lÃ©ment\n  this.elements.push(element)\n}\n/**\n * Fonction appelÃ©e dans le cas oÃ¹ on est sur que la liste doc.elements ne contient pas\n * dÃ©jÃ  un Ã©lÃ©ment de mÃªme id et de mÃªme nature que element\n * @param {type} element\n */\nIepDoc.prototype.pushElement = function (element) {\n  this.elements.push(element)\n}\n/**\n * Fonction renvoyant l'objet de elements d'id Ã©gale Ã  id s'il y en a une et sinon null\n * @param {type} id\n * @returns {Boolean|iep.iepDoc.elements|iep.iepDoc.prototype.element.el}\n * Attention : Le quadrillage est le seul objet a ne pas avoir d'id et il ne peut y en avoir qu'un par figure\n */\nIepDoc.prototype.getElement = function (id, nature) {\n  let i, el\n  if (nature === 'quadrillage') {\n    for (i = 0; i < this.elements.length; i++) {\n      el = this.elements[i]\n      if (el.objet === nature) return el\n    }\n  } else {\n    for (i = 0; i < this.elements.length; i++) {\n      el = this.elements[i]\n      if ((el.id === id) && (el.objet === nature)) return el\n    }\n  }\n  return null\n}\n/**\n * Fonction remplaÃ§ant l'Ã©lÃ©ment de elements did id par e s'il y en a un\n * S'il n'y a pas dÃ©lÃ©ment d'id id renvoie false\n * @param {type} id\n * @param {type} e\n * @returns {boolean}\n */\nIepDoc.prototype.setElement = function (id, e) {\n  for (let i = 0; i < this.elements.length; i++) {\n    if (this.elements[i].id === id) {\n      this.elements[i] = e\n      return true\n    }\n  }\n  return false\n}\n/**\n * Fonction ajoutant l'action action Ã  la liste d'actions listeActions\n * @param {type} action\n */\nIepDoc.prototype.ajouteAction = function (action) {\n  // On donne Ã  action un indice por qu'lle sache quelle est son rand dans la liste\n  // Ainsi elle pourra ensuite indiquer si son action sur la figure est visible ou non\n  action.indice = this.actions.length\n  this.actions.push(action)\n}\n/**\n * Fonction crÃ©ant toutes les actions de la figure\n * @param {type} ind\n */\nIepDoc.prototype.creeActions = function () {\n  let ind, el, at, ato, objet, action, forme, xcrayon, ycrayon, id,\n    angle, sens, vitesse, abs, ord, cibles, coord, tempo, len, ecart, v1, echelle, point, cible\n  for (ind = 0; ind < this.tabact.length; ind++) {\n    el = this.tabact[ind]\n    id = this.getId(el)\n    at = el.getAttribute('mouvement')\n    tempo = el.getAttribute('tempo')\n    try {\n      let abscisse_bas_droite, ecartAngle // faut Ã©viter de dÃ©clarer dans un case directement, on le fait dans le bloc parent (eslint no-case-declarations)\n      switch (at) {\n        case 'creer':\n          ato = el.getAttribute('objet')\n          // Si on a dÃ©jÃ  crÃ©Ã© un objet avec le mÃªme id c'est une erreur et on saute a crÃ©ation\n          if (this.getElement(id, ato) !== null) break\n\n          if (ato != null) {\n            switch (ato) {\n              case 'point':\n                objet = new Point(this, id, parseFloat(this.getAbs(el)), parseFloat(this.getOrd(el)),\n                  this.getCouleur(el), this.getEpaisseur(el))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'angle':\n                objet = new Angle(this, id, this.getAbs(el), this.getOrd(el), el.getAttribute('rayon'),\n                  el.getAttribute('angle1'), el.getAttribute('angle2'), this.getCouleur(el), this.getEpaisseur(el),\n                  this.getOpaciteFond(el), el.getAttribute('forme'))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'angle_droit':\n                objet = new AngleDroit(this, id, el.getAttribute('abscisse_sommet'), el.getAttribute('ordonnee_sommet'),\n                  el.getAttribute('abscisse_inter'), el.getAttribute('ordonnee_inter'), this.getCouleur(el), this.getEpaisseur(el))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'longueur':\n                objet = new MarqueSegment(this, id, this.getAbs(el), this.getOrd(el),\n                  this.getCouleur(el), this.getEpaisseur(el),\n                  el.getAttribute('forme'))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'texte':\n                objet = new Texte(this, id, this.getAbs(el), this.getOrd(el), this.getCouleur(el), el.getAttribute('taille'))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'repere':\n                objet = new Repere(this, el.getAttribute('hauteur'), el.getAttribute('largeur'),\n                  el.getAttribute('haut'), el.getAttribute('gauche'), el.getAttribute('Xgrad'),\n                  el.getAttribute('Ygrad'), el.getAttribute('Xmin'), el.getAttribute('Xmax'),\n                  el.getAttribute('Ymin'), el.getAttribute('Ymax'), this.getCouleur(el),\n                  el.getAttribute('grille'), el.getAttribute('axes'), el.getAttribute('etiquettes'))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'quadrillage':\n                abscisse_bas_droite = el.getAttribute('abscisse_bas_droite')\n                if (abscisse_bas_droite != null) { // Syntaxe non documentÃ©e dans la doc\n                  abscisse_bas_droite = parseFloat(abscisse_bas_droite) / 30\n                  const ordonnee_bas_droite = parseFloat(el.getAttribute('ordonnee_bas_droite')) / 30\n                  const abscisse_haut_gauche = parseFloat(el.getAttribute('abscisse_haut_gauche')) / 30\n                  const ordonnee_haut_gauche = parseFloat(el.getAttribute('ordonnee_haut_gauche')) / 30\n                  objet = new Quadrillage(\n                    this,\n                    el.getAttribute('quadrillage'),\n                    String(ordonnee_bas_droite - ordonnee_haut_gauche),\n                    String(abscisse_bas_droite - abscisse_haut_gauche),\n                    ordonnee_haut_gauche,\n                    abscisse_haut_gauche,\n                    this.getCouleur(el)\n                  )\n                  action = new ActionCreation(this, 'quadrillageIEP', objet, tempo)\n                } else {\n                  objet = new Quadrillage(this, el.getAttribute('quadrillage'), el.getAttribute('hauteur'),\n                    el.getAttribute('largeur'), el.getAttribute('haut'), el.getAttribute('gauche'), this.getCouleur(el))\n                }\n                action = new ActionCreation(this, 'quadrillageIEP', objet, tempo)\n                break\n\n              case 'axe':\n                objet = new Axe(this, el.getAttribute('pente'), el.getAttribute('largeur'),\n                  el.getAttribute('haut'), el.getAttribute('gauche'), el.getAttribute('distanceBord'),\n                  el.getAttribute('Xgrad'), el.getAttribute('Xmin'), el.getAttribute('Xmax'), this.getCouleur(el))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              case 'gabarit':\n                ecartAngle = el.getAttribute('ecart_angle')\n                if (ecartAngle === null) ecartAngle = '-30'\n                objet = new Gabarit(this, id, el.getAttribute('abscisse'), el.getAttribute('ordonnee'), el.getAttribute('rayon'),\n                  ecartAngle, this.getCouleur(el), this.getEpaisseur(el), this.getCouleurFond(el), this.getOpaciteTrait(el))\n                action = new ActionCreation(this, id, objet, tempo)\n                break\n\n              default:\n                action = null // Pour ce que j'aurais oubliÃ© d'implÃ©menter\n            }\n\n            if (action) {\n              this.ajouteAction(action)\n              action.setReady()\n            }\n          }\n          break\n        case 'montrer':\n          ato = el.getAttribute('objet')\n          if (kernel.estInstrument(ato)) {\n            abs = el.getAttribute('abscisse')\n            ord = el.getAttribute('ordonnee')\n            action = new ActionMontrerInstrument(this, this[ato], abs, ord, tempo)\n            if (((ato === 'crayon') || (ato === 'compas')) && (abs != null) && (ord != null)) this[ato].translate(parseFloat(abs), parseFloat(ord))\n          } else action = new ActionMontrer(this, id, ato, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'masquer':\n          ato = el.getAttribute('objet')\n          if (kernel.estInstrument(ato)) action = new ActionMasquerInstrument(this, this[ato], tempo)\n          else action = new ActionMasquer(this, id, ato, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'tracer':\n          ato = el.getAttribute('objet')\n          cible = el.getAttribute('cible')\n          if (cible != null) {\n            objet = this.getElement(cible, 'point') // Le point vers lequel on veut translater l'objet\n            abs = objet.xcons\n            ord = objet.ycons\n          } else {\n            abs = parseFloat(this.getAbs(el))\n            ord = parseFloat(this.getOrd(el))\n          }\n          switch (ato) {\n            case 'crayon':\n              forme = el.getAttribute('forme')\n              xcrayon = this.crayon.x\n              ycrayon = this.crayon.y\n              id = this.getId(el)\n              switch (forme) {\n                case null: // Cas d'un segment\n                  if (isNaN(abs) || isNaN(ord)) { // Cas d'une forme libre pas dÃ©clarÃ©e\n                    objet = new LigneContinue(this, id, this.crayon.x, this.crayon.y, el.getAttribute('abscisses'),\n                      el.getAttribute('ordonnees'), this.getCouleur(el), this.getEpaisseur(el), this.getOpaciteTrait(el),\n                      this.getStyleTrait(el), this.getStyle(el))\n                    len = objet.abs.length\n                    this.crayon.translate(objet.abs[len - 1], objet.ord[len - 1])\n                  } else {\n                    objet = new Segment(this, id, xcrayon, ycrayon, abs, ord, this.getCouleur(el),\n                      this.getEpaisseur(el), this.getOpaciteTrait(el), this.getStyleTrait(el), this.getStyle(el))\n                    this.crayon.translate(abs, ord)\n                  }\n                  break\n                case 'droite': // Cas d'une droite\n                  if (isNaN(abs) || isNaN(ord)) break\n                  objet = new Droite(this, id, xcrayon, ycrayon, abs, ord, this.getCouleur(el),\n                    this.getEpaisseur(el), this.getOpaciteTrait(el), this.getStyleTrait(el), this.getStyle(el))\n                  this.crayon.translate(abs, ord)\n                  break\n                case 'demidroite': // Cas d'une demi-droite\n                  if (isNaN(abs) || isNaN(ord)) break\n                  objet = new DemiDroite(this, id, xcrayon, ycrayon, abs, ord, this.getCouleur(el),\n                    this.getEpaisseur(el), this.getOpaciteTrait(el), this.getStyleTrait(el), this.getStyle(el))\n                  this.crayon.translate(abs, ord)\n                  break\n                case 'polygone':\n                  cibles = el.getAttribute('cibles')\n                  if (cibles === null) {\n                    objet = new Polygone(this, id, el.getAttribute('abscisses'),\n                      el.getAttribute('ordonnees'), this.getCouleur(el), this.getEpaisseur(el),\n                      this.getCouleurFond(el), el.getAttribute('opacite'))\n                  } else {\n                    coord = this.getCoord(cibles)\n                    objet = new Polygone(this, id, coord.abs, coord.ord,\n                      this.getCouleur(el), this.getEpaisseur(el),\n                      this.getCouleurFond(el), el.getAttribute('opacite'))\n                  }\n                  len = objet.abs.length\n                  this.crayon.translate(objet.abs[len - 1], objet.ord[len - 1])\n                  break\n                case 'libre':\n                  objet = new LigneContinue(this, id, this.crayon.x, this.crayon.y, el.getAttribute('abscisses'),\n                    el.getAttribute('ordonnees'), this.getCouleur(el), this.getEpaisseur(el), this.getOpaciteTrait(el),\n                    this.getStyleTrait(el), this.getStyle(el))\n                  len = objet.abs.length\n                  this.crayon.translate(objet.abs[len - 1], objet.ord[len - 1])\n              }\n              vitesse = el.getAttribute('vitesse')\n              if (vitesse == null) vitesse = '4'\n              action = new ActionCreation(this, this.getId(el), objet, tempo, vitesse)\n              this.ajouteAction(action)\n              action.setReady()\n              break\n            case 'trait':\n              vitesse = el.getAttribute('vitesse')\n              if (vitesse === null) vitesse = 10000 // InstantanÃ© si vitesse pas prÃ©cisÃ©\n              objet = new Segment(this, id, el.getAttribute('abscisse1'), el.getAttribute('ordonnee1'),\n                el.getAttribute('abscisse2'), el.getAttribute('ordonnee2'), this.getCouleur(el),\n                this.getEpaisseur(el), this.getOpaciteTrait(el), this.getStyleTrait(el), this.getStyle(el))\n              action = new ActionCreation(this, this.getId(el), objet, tempo, vitesse) // Pas d'animation pour les traits\n              this.ajouteAction(action)\n              action.setReady()\n              break\n            case 'compas':\n              objet = new Arc(this, id, this.compas.x, this.compas.y, this.compas.ecart,\n                this.getAngle(el, 'debut'), this.getAngle(el, 'fin'), this.getCouleur(el), this.getEpaisseur(el), this.getOpaciteTrait(el),\n                this.getStyleTrait(el))\n              vitesse = el.getAttribute('sens')\n              if (vitesse == null) vitesse = '8'\n              action = new ActionCreation(this, this.getId(el), objet, tempo, vitesse)\n              this.ajouteAction(action)\n              action.setReady()\n              break\n            case 'angle_droit': // Certains scripts utilisent tracer au lieu de crÃ©er pour les angles droits ...\n              objet = new AngleDroit(this, id, el.getAttribute('abscisse_sommet'), el.getAttribute('ordonnee_sommet'),\n                el.getAttribute('abscisse_inter'), el.getAttribute('ordonnee_inter'), this.getCouleur(el), this.getEpaisseur(el))\n              action = new ActionCreation(this, this.getId(el), objet, tempo, vitesse)\n              this.ajouteAction(action)\n              action.setReady()\n              break\n          }\n          break\n        case 'rotation':\n          ato = el.getAttribute('objet')\n          sens = el.getAttribute('sens')\n          if (kernel.estInstrument(ato)) {\n            cible = el.getAttribute('cible')\n            // Au cas ou un auteur a mis Ã  la fois un attribut cible et un attribut angle,\n            // C'est l'attribut angle qui semble l'emporter (constatÃ© par des tests).\n            if ((cible != null) && (el.getAttribute('angle') === null)) {\n              objet = this.getElement(cible, 'point') // Le point vers lequel on veut translater l'objet\n              abs = objet.xcons\n              ord = objet.ycons\n              v1 = new Vect(this[ato].x, this[ato].y, abs, ord)\n              if (v1.presqueNul()) angle = 0\n              else angle = -v1.angle()\n            } else {\n              if (ato === 'compas') angle = this.getAngle(el, 'angle')\n              else angle = el.getAttribute('angle')\n            }\n            action = new ActionRotationInstrument(this, this[ato], angle, tempo, sens)\n          } else {\n            // On vÃ©rifie que l'action est cohÃ©rente (que l'objet cible existe)\n            if (this.getElement(id, ato) === null) action = null\n            else {\n              angle = el.getAttribute('angle')\n              action = new ActionRotationObjet(this, id, angle, ato, tempo, sens)\n            }\n          }\n          if (action !== null) {\n            this.ajouteAction(action)\n            action.setReady()\n          }\n          break\n        case 'translation':\n          ato = el.getAttribute('objet')\n          cible = el.getAttribute('cible')\n          // Au cas oÃ¹ on a spÃ©cifiÃ© abscisse et ordonnÃ©e et cible, cible aa prioritÃ©\n          if (cible != null) {\n            objet = this.getElement(cible, 'point') // Le point vers lequel on veut translater l'objet\n            abs = objet.xcons\n            ord = objet.ycons\n          } else {\n            abs = parseFloat(this.getAbs(el))\n            ord = parseFloat(this.getOrd(el))\n          }\n          vitesse = el.getAttribute('vitesse')\n          if (kernel.estInstrument(ato)) {\n            this[ato].x = abs\n            this[ato].y = ord\n            action = new ActionTranslationInstrument(this, this[ato], abs, ord, tempo, vitesse)\n          } else {\n            // On vÃ©rifie que l'action est cohÃ©rente\n            if (this.getElement(id, ato) === null) action = null\n            else {\n              // Dans le cas oÃ¹ on translate un point il faut modifier ses champs xcons et ycons\n              // pour que tout objet ultÃ©rieur l'utilisant comme cible soit correctement initialisÃ©\n              if (ato === 'point') {\n                point = this.getElement(id, 'point')\n                point.xcons = abs\n                point.ycons = ord\n              }\n              action = new ActionTranslationObjet(this, id, abs, ord, ato, tempo, vitesse)\n            }\n          }\n          if (action !== null) {\n            this.ajouteAction(action)\n            if ((ato === 'crayon') || (ato === 'compas')) { this[ato].translate(abs, ord) }\n            action.setReady()\n          }\n          break\n        case 'zoom':\n          ato = el.getAttribute('objet')\n          vitesse = el.getAttribute('vitesse')\n          if (kernel.estInstrument(ato)) {\n            echelle = el.getAttribute('echelle')\n            this[ato].zoomfactor = parseFloat(echelle) / 100\n            action = new ActionZoomInstrument(this, this[ato], echelle, tempo, vitesse)\n          } else {\n            // On ne peut zoomer que sur un texte ou une image\n            if ((ato === 'texte' || (ato === 'image'))) action = new ActionZoomObjet(this, id, el.getAttribute('echelle'), ato, tempo, vitesse)\n            else action = null\n          }\n          if (action !== null) {\n            this.ajouteAction(action)\n            action.setReady()\n          }\n          break\n        case 'ecarter':\n          cible = el.getAttribute('cible')\n          if (cible != null) {\n            objet = this.getElement(cible, 'point') // Le point vers lequel on veut translater l'objet\n            v1 = new Vect(this.compas.x, this.compas.y, objet.xcons, objet.ycons)\n            ecart = v1.norme()\n          } else ecart = parseFloat(el.getAttribute('ecart')) * this.compas.zoomfactor\n          this.compas.ecart = ecart\n          action = new ActionEcarterCompas(this, ecart, tempo, el.getAttribute('vitesse'))\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'lever':\n          action = new ActionLeverCompas(this, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'coucher':\n          action = new ActionCoucherCompas(this, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n\n        case 'masquer_nombres':\n          action = new ActionMontrerNombres(this, false, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'montrer_nombres':\n          action = new ActionMontrerNombres(this, true, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'graduations':\n          ato = el.getAttribute('objet')\n          action = new ActionMontrerGraduations(this, this[ato], true, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'vide':\n          ato = el.getAttribute('objet')\n          action = new ActionMontrerGraduations(this, this[ato], false, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'retourner':\n          this.compasRetourne = !this.compasRetourne\n          action = new ActionRetourner(this, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'glisser':\n          action = new ActionGlisser(this, el.getAttribute('abscisse'), tempo, el.getAttribute('vitesse'))\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'chargement':\n          // Attention, pour l'image, pas d'appel de creeAction(ind+1)\n          // car c'est une fonction de callBack qui s'en charge une fois l'image chargÃ©e\n          objet = new Imag(this, id, el.getAttribute('url'))\n          objet.prepareAction()\n          // Pas de action.setReady car il faut attendre que la figure soit chargÃ©e\n          break\n        case 'ecrire': // Texte\n          action = new ActionEcrireTexte(this, id, this.getCouleur(el), el.getAttribute('taille'),\n            el.getAttribute('texte'), el.getAttribute('style'), this.getCouleurFondTexte(el),\n            el.getAttribute('opacite_fond'),\n            this.getCouleurCadre(el), el.getAttribute('epaisseur_cadre'),\n            el.getAttribute('marge'), el.getAttribute('marge_gauche'),\n            el.getAttribute('marge_droite'), el.getAttribute('marge_haut'),\n            el.getAttribute('marge_bas'), tempo)\n          this.ajouteAction(action)\n          action.prepare()\n          break\n        case 'nommer':\n          // on regarde si le point Ã  nommer a Ã©tÃ© crÃ©Ã© sinon erreur de script\n          if (this.getElement(id, 'point') !== null) {\n            // Dans certains script on nommait un point avec une chaÃ®ne vide ce qui n'a pas de sens.\n            const nomPoint = el.getAttribute('nom')\n            if (nomPoint !== '') {\n              objet = new NomPoint(this, id, this.getAbs(el), this.getOrd(el),\n                nomPoint, this.getCouleur(el))\n              action = new ActionNommerPoint(this, objet, tempo)\n              this.ajouteAction(action)\n              action.prepare()\n            }\n          }\n          break\n        case 'pause':\n          action = new ActionPause(this, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n        case 'modifier_longueur':\n          ato = el.getAttribute('objet')\n          action = new ActionModifierLongueur(this, this[ato], el.getAttribute('longueur'), tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n          // Modification du rayon d'un gabarit\n        case 'modifier_rayon':\n          ato = el.getAttribute('objet')\n          action = new ActionModifierRayon(this, id, el.getAttribute('rayon'), ato, tempo)\n          this.ajouteAction(action)\n          action.setReady()\n          break\n      }\n    } catch (e) {\n      // On ne fait rien si xml incorrect\n    }\n  }\n  // Une fois les actions crÃ©Ã©es on attend que les Ã©lÃ©ments asynchrones soient prÃªts pour continuer\n  // en laissant 10 secondes maxi pour le chargement de la figure\n  const self = this\n  setTimeout(function () {\n    if (!self.started) {\n      console.error('10s aprÃ¨s lâ€™instanciation IepDoc la figure nâ€™est toujours pas prÃªte')\n      window.alert('Le chargement de la figure IEP a Ã©chouÃ©')\n      self.started = true\n    }\n  }, 20000) // On laisse maxi 10 secondes Ã  la figure pour se charger\n\n  this.waitForReadyState()\n}\n/**\n * Si immediat est true, les actions sont exÃ©cutÃ©es immÃ©diatement, sans animation et sans temporisation\n * @param {type} immediat\n */\nIepDoc.prototype.execute = function (immediat) {\n  this.indiceActionEnCours = 0\n  this.actions[0].execute(immediat)\n}\n/**\n * Fonction appelÃ©e lorsqu'une action a Ã©tÃ© exÃ©cutÃ©e pour passer Ã  l'exÃ©cution suivante.\n * Si immediat est true, on retourne sans rien faire\n * Si animationECours en false, on revient sans rien faire (pour arrÃªter une animation en cours)\n * Si l'action.tempo n'est pas nul, on attend action.tempo milliÃ¨mes de seconde avant de passer Ã  l'action suivante\n * indiceActionEnCours est l'indice de la prochaine action Ã  exÃ©cuter\n * @param {boolean} immediat\n */\nIepDoc.prototype.actionSuivante = function (immediat) {\n  const imm = (arguments.length === 0) ? false : immediat\n  if (!this.animationEnCours && !imm) {\n    // if (this.indiceActionEnCours != this.actions.length-1) this.indiceActionEnCours++;\n    return\n  } // Pas de passage Ã  l'action suivante pour le mode pas Ã  pas.\n  const action = this.actions[this.indiceActionEnCours]\n  if ((action.tempo === null) || imm) this.passageActionSuivante(imm)\n  else {\n    const t = this\n    setTimeout(function () { t.passageActionSuivante(imm) }, action.tempo)\n  }\n}\n/**\n * Fonction appelÃ©e par actionSuivante pour passer Ã  l'action suivante\n * indiceActionEnCours est l'indice de la prochaine action Ã  exÃ©cuter\n * @param {boolean} immediat\n */\nIepDoc.prototype.passageActionSuivante = function (immediat) {\n  // IL peut arriver qu'on arrive ici alors qu'on a cliquÃ© pour arrÃªter une animation, cliquÃ© rapidement\n  // pour aller Ã  la fin alors que l'animation n'Ã©tait pas finie...\n  if (this.indiceActionEnCours >= this.actions.length) return\n  if (this.indiceActionEnCours !== this.actions.length - 1) {\n    this.indiceActionEnCours++\n    this.actions[this.indiceActionEnCours].execute(immediat)\n  } else {\n    this.indiceActionEnCours++\n    this.montreIcone('GoBegin', true)\n    this.montreIcone('StepPrev', true)\n    this.montreIcone('Pause', false)\n    this.montreIcone('Play', false)\n    this.montreIcone('StepNext', false)\n    this.montreIcone('GoEnd', false)\n    this.montreIcone('Restart', true)\n    this.montreIcone('XML', true)\n    this.animationEnCours = false\n  }\n}\n// Attention : Pour les fonctions suivantes ne pas utiliser de test d'identitÃ© ===\n/**\n * Fonction renvoyant l'attribut couleur d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getCouleur = function (el) {\n  const coul = el.getAttribute('couleur')\n  if (coul === null) return 'black'\n  else return kernel.couleur(coul)\n}\nIepDoc.prototype.getCouleurCadre = function (el) {\n  const coul = el.getAttribute('couleur_cadre')\n  if (coul === null) return null\n  else return kernel.couleur(coul)\n}\n/**\n * Fonction renvoyant l'attribut couleur de fond d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\n\nIepDoc.prototype.getCouleurFond = function (el) {\n  const coul = el.getAttribute('couleur_fond')\n  if (coul === null) return null\n  else return kernel.couleur(coul)\n}\n/**\n * Fonction renvoyant l'attribut couleur de fond d'une action d'Ã©criture de texte\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getCouleurFondTexte = function (el) {\n  const coul = el.getAttribute('couleur_fond')\n  if (coul === null) return null\n  else return kernel.couleur(coul)\n}\n/**\n * Fonction renvoyant l'attribut Ã©paisseur d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\n\nIepDoc.prototype.getEpaisseur = function (el) {\n  const ep = el.getAttribute('epaisseur')\n  if ((ep === null) || (parseInt(ep) === 0)) return '1'\n  else return ep\n}\n/**\n * Fonction renvoyant l'attribut opacitÃ© de trait d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getOpaciteTrait = function (el) {\n  const op = el.getAttribute('opacite')\n  if (op === null) return '100'\n  else return op\n}\n/**\n * Fonction renvoyant l'attribut opacitÃ© de fond d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getOpaciteFond = function (el) {\n  const op = el.getAttribute('opacite')\n  if (op === null) return '50'\n  else return op\n}\n/**\n * Fonction renvoyant l'attribut le style de trait d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getStyleTrait = function (el) {\n  const st = el.getAttribute('pointille')\n  if (st == null) return 'continu'; else return st\n}\n/**\n * Fonction renvoyant l'attribut style de flÃ¨ce d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\n\nIepDoc.prototype.getStyle = function (el) {\n  const st = el.getAttribute('style')\n  if (st == null) return 'normal'; else return st\n}\n/**\n * Fonction renvoyant l'attribut id d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\n\nIepDoc.prototype.getId = function (el) {\n  return el.getAttribute('id')\n}\n/**\n * Fonction renvoyant l'attribut abscisse de trait d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getAbs = function (el) {\n  return el.getAttribute('abscisse')\n}\n/**\n * Fonction renvoyant l'attribut ordonnÃ©e de trait d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\nIepDoc.prototype.getOrd = function (el) {\n  const ord = el.getAttribute('ordonnee')\n  if (ord !== null) return ord; else return el.getAttribute('ordonnÃ©e')\n}\n/**\n * Fonction renvoyant l'attribut point d'une action de crÃ©ation de polygÃ´ne\n * @param {type} cible\n * @returns {iep.iepDoc.prototype.getCoord.res|Object}\n */\nIepDoc.prototype.getCoord = function (cible) {\n  let abs = ''\n  let ord = ''\n  cible.split(',').forEach((elt, i) => {\n    const sep = (i === 0) ? '' : ','\n    const obj = this.getElement(elt, 'point')\n    abs += sep + obj.xcons\n    ord += sep + obj.ycons\n  })\n  return {\n    abs,\n    ord\n  }\n}\n/**\n * Fonction renvoyant l'attribut angle d'une action\n * @param {Element} el element retournÃ© par this.xmldoc.getElementsByTagName(\"action\")[]\n * @returns {string|Couleur}\n */\n\nIepDoc.prototype.getAngle = function (el, attribute) {\n  const a = el.getAttribute(attribute)\n  if (a == null) return null\n  if (this.compasRetourne) return String(parseFloat(a) + 180)\n  else return a\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne play de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconePlay.svg}\n */\nIepDoc.prototype.iconePlay = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  const pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '-5,8 8,0 -5,-8')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne pause de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n */\nIepDoc.prototype.iconePause = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  let rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', -6)\n  rect.setAttribute('y', -7)\n  rect.setAttribute('width', 3)\n  rect.setAttribute('height', 14)\n  rect.setAttribute('style', 'stroke:white;fill:white;')\n  rect.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(rect)\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', 2)\n  rect.setAttribute('y', -7)\n  rect.setAttribute('width', 3)\n  rect.setAttribute('height', 14)\n  rect.setAttribute('style', 'stroke:white;fill:white;')\n  rect.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(rect)\n  // svg.setAttribute(\"transform\",\"translate(16,16)\");\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne stepNext de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeStepNext.svg}\n */\nIepDoc.prototype.iconeStepNext = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  const rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', 5)\n  rect.setAttribute('y', -6)\n  rect.setAttribute('width', 3)\n  rect.setAttribute('height', 12)\n  rect.setAttribute('style', 'stroke:white;fill:white;')\n  rect.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(rect)\n  const pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '-7,6 2,0 -7,-6')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne stepPrev de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeStepPrev.svg}\n */\nIepDoc.prototype.iconeStepPrev = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  const rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', -7)\n  rect.setAttribute('y', -6)\n  rect.setAttribute('width', 3)\n  rect.setAttribute('height', 12)\n  rect.setAttribute('style', 'stroke:white;fill:white;')\n  rect.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(rect)\n  const pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '7,6 -2,0 7,-6')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne goEnd de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeGoEnd.svg}\n */\nIepDoc.prototype.iconeGoEnd = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  let pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '-6,7 1,0 -6,-7')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '3,7 10,0 3,-7')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne goBegin de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeGoBegin.svg}\n */\nIepDoc.prototype.iconeGoBegin = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  let pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '6,7 -1,0 6,-7')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  pol = document.createElementNS(kernel.svgsn, 'polygon')\n  pol.setAttribute('points', '-3,7 -10,0 -3,-7')\n  pol.setAttribute('style', 'stroke:white;fill:white;')\n  pol.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(pol)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne restart de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeRestart.svg}\n */\nIepDoc.prototype.iconeRestart = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  const path = document.createElementNS(kernel.svgsn, 'path')\n  path.setAttribute('d', 'M 0 -8 A 8 8 -90 1 1 -8 0')\n  path.setAttribute('style', 'stroke:white;stroke-width:3;fill:none;')\n  path.setAttribute('marker-end', 'url(#markerarrow')\n  path.setAttribute('transform', 'translate(16,16)')\n  svg.appendChild(path)\n  return svg\n}\n/**\n * Fonction crÃ©ant l'icÃ´ne XML de la figure\n * Si teinte == \"fonce\", la couleur bleu foncÃ©e est employÃ©e\n * Si \"teinte == \"clair\", la couleur gris clair est employÃ©e\n * @param {Integer} x : l'abscisse de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {Integer} y : l'ordonnÃ©e de l'icÃ´ne relative Ã  la barre d'icÃ´nes\n * @param {string} teinte : \"fonce\" ou \"clair\"\n * @returns {iep.iconeXML.svg}\n */\nIepDoc.prototype.iconeXML = function (x, y, teinte) {\n  const svg = document.createElementNS(kernel.svgsn, 'svg')\n  svg.setAttribute('x', x)\n  svg.setAttribute('y', y)\n  svg.setAttribute('width', 32)\n  svg.setAttribute('height', 32)\n  const circ = document.createElementNS(kernel.svgsn, 'circle')\n  // le cercle entourant l'icÃ´ne\n  svg.appendChild(circ)\n  circ.setAttribute('cx', 16)\n  circ.setAttribute('cy', 16)\n  circ.setAttribute('r', 15)\n  const filtre = (teinte === 'fonce') ? 'filtrebleu' : 'filtregris'\n  circ.setAttribute('style', 'stroke:none;' + 'fill:url(#radial' + teinte + '); filter:url(#' + filtre + ');')\n  const text = document.createElementNS(kernel.svgsn, 'text')\n  text.setAttribute('pointer-events', 'none')\n  text.appendChild(document.createTextNode('XML'))\n  text.setAttribute('x', 16)\n  text.setAttribute('y', 21)\n  text.setAttribute('style', 'font-family:Arial;font-size:9pt;fill:white;text-anchor:middle')\n  svg.appendChild(text)\n  return svg\n}\n\n/**\n * Fonction rajoutant dans le svg parent des dÃ©finitions defs qui serot utilisÃ©es\n * plusieurs fois dans les icÃ´nes (radialGradiant et marker pour la flÃ¨che de l'icÃ´ne restart.\n * On les mets dans le svg barreIcones pour qu'il ne soient pas effacÃ©s lors de initialise()\n */\nIepDoc.prototype.creeElementsPourIcones = function () {\n  let defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.radialGradiant('#9999FF', '#000099', 'radialfonce'))\n  this.svg.appendChild(defs)\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.radialGradiant('#CCCCCC', '#666666', 'radialclair'))\n  this.svg.appendChild(defs)\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.radialGradiant('#FF9999', '#FF0000', 'radialrouge'))\n  this.svg.appendChild(defs)\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.markerArrow('markerarrow'))\n  this.barreIcones.appendChild(defs)\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.filtreEclairageIcone('filtrebleu'))\n  this.barreIcones.appendChild(defs)\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  defs.appendChild(this.filtreEclairageIcone('filtregris'))\n  this.barreIcones.appendChild(defs)\n}\n/**\n * Fonction renvoyant un radialGradiant utilisÃ© pour le dessin des icÃ´nes\n * @param {string} clair : la couleur claire de gradiant\n * @param {string} fonce :  la couleur focÃ©e du gradiant\n * @param {Sring} id : l'id du gradiant\n * @returns {iep.radialGradiant.rg}\n */\nIepDoc.prototype.radialGradiant = function (clair, fonce, id) {\n  const rg = document.createElementNS(kernel.svgsn, 'radialGradient')\n  rg.setAttribute('id', id)\n  let stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '0%')\n  stop.setAttribute('style', 'stop-color:' + fonce + ';')\n  rg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '80%')\n  stop.setAttribute('style', 'stop-color:' + clair + ';')\n  rg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '100%')\n  stop.setAttribute('style', 'stop-color:' + fonce + ';')\n  rg.appendChild(stop)\n  return rg\n}\n/**\n * Fonction renvoyant un marker qui sera utilisÃ© pour la flÃ¨che de l'icÃ´ne restart\n * @param {string} id : L'id du marker\n * @returns {iep.markerArrow.marker}\n */\nIepDoc.prototype.markerArrow = function (id) {\n  const marker = document.createElementNS(kernel.svgsn, 'marker')\n  marker.setAttribute('id', id)\n  marker.setAttribute('markerWidth', '4')\n  marker.setAttribute('markerHeight', '4')\n  marker.setAttribute('refX', '0')\n  marker.setAttribute('refY', '2')\n  marker.setAttribute('orient', 'auto')\n  const pathm = document.createElementNS(kernel.svgsn, 'path')\n  pathm.setAttribute('d', 'M 0 0 2 2 0 4 Z')\n  pathm.setAttribute('style', 'fill:white;')\n  marker.appendChild(pathm)\n  return marker\n}\n/**\n * Foncion renvoyant un filtre qui sera utilisÃ© pour donner un aspect de relief aux icÃ´nes\n * @param {type} id : L'id du filtre\n * @returns {iep.filtreEclairageIcone.filter}\n */\nIepDoc.prototype.filtreEclairageIcone = function (id) {\n  const filter = document.createElementNS(kernel.svgsn, 'filter')\n  filter.setAttribute('x', '0')\n  filter.setAttribute('y', '0')\n  filter.setAttribute('width', '100%')\n  filter.setAttribute('height', '100%')\n  filter.setAttribute('color-interpolation-filters', 'sRGB')\n  const dl = document.createElementNS(kernel.svgsn, 'feDiffuseLighting')\n  dl.setAttribute('lighting-color', 'white')\n  dl.setAttribute('surfaceScale', '1')\n  dl.setAttribute('diffuseConstant', '1.2')\n  dl.setAttribute('in', 'SourceGraphic')\n  dl.setAttribute('result', 'diffOut')\n  const pointLight = document.createElementNS(kernel.svgsn, 'fePointLight')\n  pointLight.setAttribute('x', '5')\n  pointLight.setAttribute('y', '5')\n  pointLight.setAttribute('z', '15')\n  dl.appendChild(pointLight)\n  filter.appendChild(dl)\n  const fc = document.createElementNS(kernel.svgsn, 'feComposite')\n  fc.setAttribute('in', 'SourceGraphic')\n  fc.setAttribute('in2', 'diffOut')\n  fc.setAttribute('operator', 'arithmetic')\n  fc.setAttribute('k1', '1')\n  fc.setAttribute('k2', '0')\n  fc.setAttribute('k3', '0')\n  fc.setAttribute('k4', '0')\n  filter.appendChild(fc)\n  filter.setAttribute('id', id)\n  return filter\n}\n/**\n * Fonction renvoyant une fenÃªtre contenant le code XML de la figure\n */\nIepDoc.prototype.popup = function () {\n  // ouvre une fenetre sans barre d'etat, ni d'ascenceur\n  const w = window.open('', 'popup', 'width=700,height=450,toolbar=no,scrollbars=no,resizable=yes')\n  w.iepDoc = this\n  const doc = w.document\n  doc.title = 'Code Xml de la figure'\n  const div = document.createElement('div')\n  const form = document.createElement('form')\n  div.appendChild(form)\n  div.setAttribute('align', 'center')\n  doc.body.appendChild(div)\n  const ta = document.createElement('textarea')\n  form.appendChild(ta)\n  ta.setAttribute('cols', 80)\n  ta.setAttribute('rows', 25)\n  ta.setAttribute('readonly', true)\n  ta.style.fontSize = '13px'\n  ta.scrollIntoView()\n  // Si le script ne comporte pas de retours Ã  la ligne (une seule ligne), on en rajoute\n  let ch = this.codexml\n  ch = ch.replace(/>\\s*</g, '>\\n<')\n  ta.appendChild(document.createTextNode(ch))\n  ta.select()\n  // w.onbeforeunload = function(){this.iepDoc.windowxml = null;};\n  w.addEventListener('unload', function () { this.iepDoc.windowxml = null })\n  return w\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\n\n/**\n * Si on est en dev\n * @type {boolean}\n */\n/*\niep.isDev = /(\\.devsesamath\\.net|\\.local)$/.test(window.location.hostname) || window.location.href.substr(0, 7) === \"file://\";\n*/\nconst kernel = {\n  svgsn: 'http://www.w3.org/2000/svg',\n  caracteresGrecs: ['alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', ' theta', 'kappa',\n    'lambda', 'mu', 'nu', 'xi', 'pi', 'rho', 'sigma', 'tau', 'phi', 'chi',\n    'psi', 'omega', 'Gamma', 'Delta', 'Xi', 'Pi', 'Sigma', 'Phi', 'Chi', 'Psi', 'Omega'],\n  caracteresGrecsUtf8: ['Î±', 'Î²', 'Î³', 'Î´', 'Îµ', 'Î¶', 'Î·', 'Î¸', 'Îº',\n    'Î»', 'Î¼', 'Î½', 'Î¾', 'Ï€', 'Ï', 'Ïƒ', 'Ï„', 'Ï†', 'Ï‡',\n    'Ïˆ', 'Ï‰', 'Î“', 'Î”', 'Îž', 'Î ', 'Î£', 'Î¦', 'Î§', 'Î¨', 'Î©'],\n  // Constantes globales utilisÃ©s dans les calculs\n  convDegRad: Math.PI / 180,\n  convRadDeg: 180 / Math.PI,\n  sin30: 0.5,\n  /**\n   * Fonction renvoyant true si le nombre x a une valeur absolue infÃ©rieue Ã  10^-9\n   * @param {float} x\n   * @returns {boolean}\n   */\n  zero: function (x) {\n    return (Math.abs(x) < 1e-9)\n  },\n  /**\n   * Fonction renvoyant true si la valeur absolue de a est infÃ©rieure Ã  10^-7\n   * UtilisÃ© pour tester si un angle est quasi nul.\n   * @param {number} a\n   * @returns {boolean}\n   */\n  zeroAngle: function (a) {\n    return (Math.abs(a) < 1e-7)\n  },\n  /**\n   * Fonction renvoyant la mesure principale en degrÃ©s de l'angle dont ang est une mesure\n   * @param {Float} ang\n   * @returns {Float}\n   */\n  mesurePrincDeg: function (ang) {\n    const q = Math.floor((ang + 180) / 360)\n    let ret = ang - 360 * q\n    if (ret === -180) ret = 180\n    return ret\n  },\n  /**\n   * Fonction servant Ã  parser un fichier xml contenu dans la chaÃ®ne txt\n   * @param {string} txt\n   * @returns {DOMParser}\n   */\n  parseXMLDoc: function (txt) {\n    let parser, xmlDoc\n    if (window.DOMParser) {\n      parser = new DOMParser()\n      xmlDoc = parser.parseFromString(txt, 'text/xml')\n    } else { // Internet Explorer\n      xmlDoc = new ActiveXObject('Microsoft.XMLDOM')\n      xmlDoc.async = false\n      xmlDoc.loadXML(txt)\n    }\n    return xmlDoc\n  },\n  /**\n   * Fonction renvoyant true si ch contient le nom d'un instrument.\n   * @param {type} ch\n   * @returns {boolean}\n   */\n  estInstrument: function (ch) {\n    return ch === 'compas' || ch === 'compasLeve' || ch === 'crayon' || ch === 'equerre' ||\n      ch === 'rapporteur' || ch === 'regle' || ch === 'requerre'\n  },\n  /**\n   * Fonction appelÃ©e pour une chaÃ®ne qui commence par un caractÃ¨re de balise ouvrante.\n   * Avant appel la chaÃ®ne doit commencer par une balise ouvrante\n   * Renvoie -1 s'il n'y a pas de balise fermante correspondante\n   * @param {string} ch\n   * @returns {int} Renvoie l'indice du dernier caractÃ¨re de la balise fermante correspondante\n   * augmentÃ©e de 1\n   */\n  indiceFinBalise: function (ch) {\n    let bal, balf, indf\n    let balisefont = false\n    if (ch.indexOf('<font') === 0) {\n      balf = '</font>'\n      balisefont = true\n    } else {\n      indf = ch.indexOf('>')\n      if (indf === -1) return ch.length // Erreur\n      bal = ch.substring(0, indf + 1)\n      balf = bal.substring(0, 1) + '/' + bal.substring(1)\n    }\n    const ind = ch.indexOf(balf)\n    if (ind === -1) {\n      // Il arrive que des gens oublient de fermer une baise font et en ouvrent une autre\n      if (balisefont) {\n        const ind2 = ch.indexOf('<font', 5)\n        if (ind2 !== -1) return ind2\n      }\n      return -1\n    } // Incorrect. Balise de fn oubliÃ©e ?\n    else return ind + balf.length\n  },\n  /**\n   * Fonction analysant une chaÃ®ne commenÃ§ant par Â£e( ou Â£i(\n   * et renvoyant un objet formÃ© de l'opÃ©rande et de l'exposant (ou indice)\n   * @param {type} chaine\n   * @returns {kernel.analyseExposantOuIndice.res|Object}\n   */\n  analyseExposantOuIndice: function (chaine) {\n    const ch = chaine.trim()\n    const res = {}\n    const indvirg = ch.indexOf(',')\n    const indparf = ch.indexOf(')')\n    res.erreur = (indvirg === -1) || (indparf === -1)\n    if (res.erreur) {\n      res.texte = ''\n      return res\n    }\n    res.operande = ch.substring(3, indvirg)\n    res.exposant = ch.substring(indvirg + 1, indparf)\n    res.texte = ch.substring(indparf + 1)\n    return res\n  },\n  /**\n   * Fonction appelÃ©e dans le cas ou pDebut est l'indice dans chaine d'une\n   * parenthÃ¨se ouvrante et renvoyant l'indice de la parenthÃ¨se\n   * fermante correspondante dans la chaÃ®ne.\n   */\n  indiceParentheseFermante: function (chaine, deb) {\n    let p; let ch\n    let somme = 1\n    p = deb + 1\n    while (p < chaine.length) {\n      ch = chaine.charAt(p)\n      if (ch === '(') { somme++ } else {\n        if (ch === ')') { somme-- }\n      }\n      if (somme === 0) break\n      p++\n    }\n    if (somme === 0) return p\n    else return -1 // On renvoie -1 si pas trouvÃ©\n  },\n  /**\n   * Fonction renvoyant true si le premier caractÃ¨re de la chaÃ®ne est un chiffre\n   * @param {type} car\n   * @returns {boolean}\n   */\n  chiffre: function (car) {\n    const s = '0123456789'\n    return (s.indexOf(car) !== -1)\n  },\n  // Fonctions reprises depuis le code source de InstrumentPoche en flash\n  valeur_approchee: function (nombre, precision) {\n    const prec = Math.pow(10, precision)\n    return Math.round(nombre / prec) * prec\n  },\n  /**\n   * Fonction reprise Ã  partir du code de la version Flash et servant pour les\n   * repÃ¨res et quadrillages\n   * @param {Float} nbr\n   * @param {Float} borne1\n   * @param {Float} borne2\n   * @param {Float} borne_pix1\n   * @param {Float} borne_pix2\n   * @returns {Float}\n   */\n  mettre_en_pixels: function (nbr, borne1, borne2, borne_pix1, borne_pix2) {\n    const coeff_dir = (borne_pix1 - borne_pix2) / (borne1 - borne2)\n    const ordo_orig = borne_pix1 - coeff_dir * borne1\n    return coeff_dir * nbr + ordo_orig\n  },\n  /** Fonctions Ã©lÃ©minant dans le code XML contenu dans la chaÃ®ne ch les attributs\n   * en doublon en ne gardant que le premier\n   * @param {string} ch\n   * @returns {string} / La chaÃ®ne avec les doublons d'attribut supprimÃ©s.\n   */\n  elimineDoublonsXML: function (ch) {\n    let i; let j; let li; let a; let b\n    let res = ''\n    const liste = ['objet', 'mouvement', 'vitesse', 'tempo', 'abscisse', 'ordonnee', 'id', 'couleur', 'pointille', 'echelle',\n      'angle', 'cible', 'texte', 'ecrire', 'rotation', 'translation', 'epaisseur', 'opacite', 'masquer', 'montrer',\n      'crayon', 'equerre', 'regle', 'compas', 'reglequerre', 'sens', 'hauteur', 'largeur', 'haut', 'gauche',\n      'Xmin', 'Ymin', 'Xmax', 'yMax', 'Xgrad', 'Ygrad', 'image', 'police', 'taille',\n      'ordonnee_bas_droite', 'abscisse_bas_droite', 'ordonnee_haut_gauche', 'abscisse_haut_gauche']\n    const s = ch.split(/<action/gi)\n    for (i = 0; i < s.length; i++) {\n      li = s[i]\n      for (j = 0; j < liste.length; j++) {\n        const r = new RegExp(' ' + liste[j] + '[^\\\\w ]*= *\"[\\\\w]*\"', 'i')\n        a = li.search(r)\n        if (a !== -1) {\n          b = li.substring(a + 1).search(r)\n          if (b !== -1) { li = li.replace(r, '') }\n        }\n      }\n      res += (i === 0) ? li : '<action' + li\n    }\n    return res\n  },\n  /**\n   * Constructeur utilisÃ©e dans l'objet kernel.ActionEcrireTexte. L'objet contient les informations\n   * sur un texte contenant des balises <b> ou <i> ou <u> ou <font> (ou un mÃ©lange)\n   * @param {type} bold\n   * @param {type} italic\n   * @param {type} underline\n   * @param {type} couleur\n   * @param {type} fontface\n   * @param {type} taille\n   */\n  infoBalise: function (bold, italic, underline, couleur, fontface, taille) {\n    this.bold = bold\n    this.italic = italic\n    this.underline = underline\n    this.couleur = couleur\n    this.fontface = fontface\n    this.taille = taille\n  },\n  /**\n   * Fonction remplaÃ§ant dans la chaÃ®ne ch les accents Ã©crits en code html par leur caractÃ¨re utf8\n   * @param {string} ch : La chaÃ®ne Ã  traiter\n   * @returns {string} : La chaÃ®ne avec les caractÃ¨res remplacÃ¨s\n   */\n  remplaceAccentsHtml: function (ch) {\n    const t1 = ['&agrave;', '&acirc;', '&aelig;', '&egrave;', '&eacute;', '&ecirc;', '&icirc;', '&ocirc;',\n      '&ouml;', '&oslash;', '&Oslash;', '&ugrave;', '&ucirc;', '&apos;']\n    const t2 = ['Ã ', 'Ã¢', 'Ã¦', 'Ã¨', 'Ã©', 'Ãª', 'Ã®', 'Ã´',\n      'Ã¶', 'Ã¸', 'Ã˜', 'Ã¹', 'Ã»', \"'\"]\n    let i\n    for (i = 0; i < t1.length; i++) {\n      ch = ch.replace(new RegExp(t1[i], 'g'), t2[i])\n    }\n    return ch\n  },\n  /**\n   * Fonction remplaÃ§ant dans la chaÃ®ne ch toutes les balises Ã©crites avec des caractÃ¨res spÃ©ciaux Â£\n   * par des balises normales du type <...>\n   * @param {string} ch : La chaÃ®ne Ã  traiter contenant les balises spÃ©ciales\n   * @returns {string} : La chaÃ®ne avec les balises normales\n   */\n  remplaceBalises: function (ch) {\n    // Certains auteurs ont utilisÃ© les codes Â£lt; et Â£gt;\n    // Inutile car quand on parse avec getAttribute pour avoir le texte le balises sont dÃ©jÃ  remplacÃ©es\n    /*\n    ch = ch.replace(/Â£lt;/gi,\"Â£ltÂ£\");\n    ch = ch.replace(/Â£gt;/gi,\"Â£gtÂ£\");\n    */\n    // Par contre si elles ont dÃ©jÃ  Ã©tÃ© remplacÃ©es et utilisaient des majuscules il faut mettre des minuscules\n    ch = ch.replace(/<B>/g, '<b>')\n    ch = ch.replace(/<\\/B>/g, '</b>')\n    ch = ch.replace(/<I>/g, '<i>')\n    ch = ch.replace(/<\\/I>/g, '</i>')\n    ch = ch.replace(/<U>/g, '<u>')\n    ch = ch.replace(/<\\/U>/g, '</u>')\n\n    ch = ch.replace(/Â£ltÂ£iÂ£gtÂ£/gi, '<i>')\n    ch = ch.replace(/Â£iÂ£/gi, '<i>')\n    ch = ch.replace(new RegExp('Â£ltÂ£/iÂ£gtÂ£', 'gi'), '</i>')\n    ch = ch.replace(new RegExp('Â£/iÂ£', 'gi'), '</i>')\n    ch = ch.replace(/Â£ltÂ£bÂ£gtÂ£/gi, '<b>')\n    ch = ch.replace(/Â£bÂ£/gi, '<b>')\n    ch = ch.replace(new RegExp('Â£ltÂ£/bÂ£gtÂ£', 'gi'), '</b>')\n    ch = ch.replace(new RegExp('Â£/bÂ£', 'gi'), '</b>')\n    ch = ch.replace(/Â£ltÂ£uÂ£gtÂ£/gi, '<u>')\n    ch = ch.replace(/Â£uÂ£/gi, '<u>')\n    ch = ch.replace(new RegExp('Â£ltÂ£/uÂ£gtÂ£', 'gi'), '</u>')\n    ch = ch.replace(new RegExp('Â£/uÂ£', 'gi'), '</u>')\n    ch = ch.replace(/Â£ltÂ£brÂ£gtÂ£/gi, '<br>')\n    ch = ch.replace(new RegExp('Â£ltÂ£br/Â£gtÂ£', 'gi'), '<br>')\n    ch = ch.replace(/Â£brÂ£/gi, '<br>')\n    ch = ch.replace(new RegExp('Â£br/Â£', 'gi'), '<br>')\n    ch = ch.replace(/Â£ltÂ£font/gi, '<font')\n    ch = ch.replace(new RegExp('Â£ltÂ£/fontÂ£gtÂ£', 'gi'), '</font>')\n    // Remplacement de balises exotiques utilisÃ©es par certains\n    ch = ch.replace(/Â£ltÂ£boldÂ£gtÂ£/gi, '<b>')\n    ch = ch.replace(new RegExp('Â£ltÂ£/boldÂ£gtÂ£', 'gi'), '</b>')\n    // remplacement des Â£ltÂ£ et Â£gtÂ£ utilisÃ©scomme caractÃ¨res\n    ch = ch.replace(/Â£ltÂ£/gi, '<')\n    ch = ch.replace(/Â£gtÂ£/gi, '>')\n    ch = ch.replace(/Â£inferieurstrictÂ£/gi, '<')\n    ch = ch.replace(/Â£superieurstrictÂ£/gi, '>')\n    // Remplacement des guillemets\n    ch = ch.replace(/Â£guillemetÂ£/gi, '\"')\n    return ch\n  },\n  /**\n   * Fonction renvoyant une chaÃ®ne oÃ¹ les caractÃ¨res spÃ©ciaux de Flash de ch sont remplacÃ©s par\n   * le caractÃ¨re UTF8 correspondant\n   * @param {string} ch : La chaÃ®ne Ã  traiter\n   */\n  remplaceCarSpe: function (ch) {\n    let i; let cha; let chb\n    let s = ch\n    if (ch.indexOf('Â£') !== -1) {\n      const a = ['alpha2', 'plus', 'moins', 'fois', 'divise', 'petitf', 'petitebarre', 'grandebarre', 'prime', 'seconde',\n        'puceronde', 'grandC', 'euler', 'petitg', 'petith', 'Ironde', 'Lronde', 'lronde', 'grandN',\n        'Pronde', 'grandQ', 'Rronde', 'grandR', 'grandZ', 'Eronde', 'Fronde', 'Nronde', 'flecheG',\n        'flecheH', 'flecheD', 'flecheB', 'flecheDG', 'flecheGD', 'flecheHB', 'flecheBH', 'croissant', 'decroissant',\n        'alaligneadroite', 'alaligneagauche', 'doubleflecheG', 'doubleflecheD', 'doubleflecheDG', 'doubleflecheGD',\n        'flecheGbarre', 'flecheDbarre', 'flecheGcreuse', 'flecheHcreuse', 'flecheDcreuse', 'flecheBcreuse',\n        'qqsoit', 'pourtout', 'quelquesoit', 'complement', 'differentielpartiel', 'ilexiste',\n        'ilnexistepas', 'vide', 'nabla', 'appartienta', 'nappartientpasa', 'contient',\n        'petitcontient', 'grandproduit', 'grandcoproduit', 'grandesomme', 'petitebarrefine',\n        'moinsouplus', 'antislash', 'asterisque', 'racine', 'proportionnela',\n        'infini', 'angle', 'anglespherique', 'divise', 'nedivisepas',\n        'parallelea', 'nestpasparallelea', 'etlogique', 'oulogique', 'inter',\n        'intersection', 'union', 'integrale', 'doubleintegrale', 'tripleintegrale',\n        'integralecurviligne', 'integralesurfacique', 'integralevolumique', 'egaleasymptotiquea', 'environdroit',\n        'environegala', 'environ', 'egalpardefinition', 'differentde', 'identiquea',\n        'inferieura', 'superieura', 'inclusdans', 'contient', 'nestpasinclusdans',\n        'necontientpas', 'sommedirecte', 'differencedirecte', 'produittensoriel', 'divisiondirecte',\n        'produitdirect', 'top', 'perpendiculairea', 'antecedentde', 'imagede',\n        'angledroitarc', 'point', 'pv']\n      const b = ['Î±', '+', '-', 'Ã—', 'Ã·', 'f', 'â€“', 'â€”', \"'\", '\"',\n        'â€¢', 'â„‚', 'â„‚', 'â„Š', 'â„', 'â„‘', 'â„’', 'â„“', 'â„•',\n        'â„˜', 'â„š', 'â„œ', 'â„', 'â„¤', 'â„°', 'â„±', 'â„µ', 'â†',\n        'â†‘', 'â†’', 'â†“', 'â†”', 'â†”', 'â†•', 'â†•', 'â†—', 'â†˜',\n        'â†³', 'â†µ', 'â‡', 'â‡’', 'â‡”', 'â‡”',\n        'â‡¤', 'â‡¥', 'â‡¦', 'â‡§', 'â‡¨', 'â‡©',\n        'âˆ€', 'âˆ€', 'âˆ€', 'âˆ', 'âˆ‚', 'âˆƒ',\n        'âˆ„', 'âˆ…', 'âˆ‡', 'âˆˆ', 'âˆ‰', 'âˆ‹',\n        'âˆ', 'âˆ', 'âˆ', 'âˆ‘', 'âˆ’',\n        'âˆ“', 'âˆ–', 'âˆ—', 'âˆš', 'âˆ',\n        'âˆž', 'âˆ¡', 'âˆ¢', 'âˆ£', 'âˆ¤',\n        '//', 'âˆ¦', 'âˆ§', 'âˆ¨', 'âˆ©',\n        'âˆ©', 'âˆª', 'âˆ«', 'âˆ¬', 'âˆ­',\n        'âˆ®', 'âˆ¯', 'âˆ°', 'â‰ƒ', 'â‰ƒ',\n        'â‰…', 'â‰ˆ', 'â‰', 'â‰ ', 'â‰¡',\n        'â‰¤', 'â‰¥', 'âŠ‚', 'âŠƒ', 'âŠ„',\n        'âŠ…', 'âŠ•', 'âŠ–', 'âŠ—', 'âŠ˜',\n        'âŠ™', 'âŠ¤', 'âŠ¥', 'âŠ¶', 'âŠ·',\n        'âŠ¾', 'â‹…', ';']\n      for (i = 0; i < a.length; i++) {\n        cha = 'Â£' + a[i] + 'Â£'\n        chb = b[i]\n        if (s.indexOf(cha) !== -1) s = s.replace(new RegExp(cha, 'gi'), chb)\n      }\n    }\n    return s\n  },\n  /**\n   * Fonction renvoyant l'idice dans la chaÃ®ne chaine de l'accolade fermante\n   * correspondant Ã  l'accolade ouvrante dont l'indice dans la chaÃ®ne est pdebut\n   * Avant appel,l le caractÃ¨re d'indice pdebut de la chaÃ®ne ch doit contenir\n   * une parenthÃ¨se ouvrante.\n   */\n  accoladeFermante: function (chaine, pdebut) {\n    let p, ch, somme\n\n    somme = 1\n    p = pdebut + 1\n    while (p < chaine.length) {\n      ch = chaine.charAt(p)\n      if (ch === '{') { somme++ } else {\n        if (ch === '}') { somme-- }\n      }\n      if (somme === 0) break\n      p++\n    }\n    if (somme === 0) return p\n    else return -1 // On renvoie -1 si pas trouvÃ©\n  },\n  /**\n   * Fonction renvoyant true si ch conteint une balise LaTeX : fraction, racine carrÃ©e,\n   * puissance, indice, chapeau, parenthÃ¨ses, crochets, valeur abolue, norme,\n   * vecteur ou texte\n   * @param {type} ch\n   * @returns {Boolean}\n   */\n  contientBaliseLaTeX: function (ch) {\n    return (ch.indexOf('\\\\frac') !== -1) || (ch.indexOf('\\\\sqrt') !== -1) ||\n      (ch.indexOf('}^{') !== -1) || (ch.indexOf('}_{') !== -1) ||\n      (ch.indexOf('\\\\widehat{') !== -1) || (ch.indexOf('\\\\left[') !== -1) ||\n      (ch.indexOf('\\\\left(') !== -1) || (ch.indexOf('\\\\left|') !== -1) ||\n      (ch.indexOf('\\\\left\\\\|') !== -1) || (ch.indexOf('\\\\overrightarrow{') !== -1) ||\n      (ch.indexOf('\\\\text{') !== -1)\n  }\n\n}\nkernel.cos30 = Math.cos(30 * kernel.convDegRad)\n/**\n * Fonction renvoyant une chaÃ®ne de carcatÃ¨re reprÃ©sentant en svg la couleur\n * correspondant au contenu de ch (couleur en Flash)\n * @param {string} ch\n * @returns {string}\n */\nkernel.couleur = function (ch) {\n  let i, s, t\n  const cc1 = ['noir', 'rouge', 'vert', 'bleu', 'blanc', 'gris', 'darkorange']\n  const cc2 = ['black', 'red', 'green', 'blue', 'white', 'grey', 'maroon']\n  if (ch === '0') return 'black'\n  for (i = 0; i < cc1.length; i++) {\n    if (cc1[i] === ch) return cc2[i]\n  }\n  if (ch.substring(0, 2) === '0x') {\n    s = '000000' + ch.substring(2)\n    t = s.substring(s.length - 6)\n    ch = '#' + t\n  } else {\n    if (kernel.chiffre(ch.charAt(0))) {\n      ch = parseFloat(ch).toString(16)\n      s = '000000' + ch\n      t = s.substring(s.length - 6)\n      ch = '#' + t\n    } else {\n      if (ch.charAt(0) === '#') {\n        s = '000000' + ch.substring(1)\n        t = s.substring(s.length - 6)\n        ch = '#' + t\n      }\n    }\n  }\n  return ch\n}\n\n/**\n * Fonction renvoyant true si les vecteurs u et v sont quasi colinÃ©aires\n * @param {kernel.vect} u\n * @param {kernel.vect} v\n * @returns {boolean}\n */\nkernel.colineaires = function (u, v) {\n  const n1 = u.norme()\n  const n2 = v.norme()\n  if (kernel.zero(n1) || kernel.zero(n2)) return true\n  else return (kernel.zero((u.x * v.y - u.y * v.x) / n1 / n2))\n}\n/**\n * Fonction renvoyant true si les vecteurs u et v sont quasi colinÃ©aires\n * de mÃªme sens\n * @param {kernel.vect} u\n * @param {kernel.vect} v\n * @returns {boolean}\n */\nkernel.colineairesMemeSens = function (u, v) {\n  return kernel.colineaires(u, v) && (u.x * v.x + u.y * v.y >= 0)\n}\n/**\n * Fonction renvoyant l'indice de la nb iÃ¨me virgule dans la chaÃ®ne ch\n * Ã  partir de l'indice deb en sauta,t le contenu des parenthÃ¨ses\n * @param {type} chaine\n * @param {type} deb\n * @param {type} nb\n * @returns {Integer}\n */\nkernel.indiceVirgule = function (chaine, deb, nb) {\n  let ch; let indpf\n  let k = 0\n  let p = deb\n  while (p < chaine.length) {\n    ch = chaine.charAt(p)\n    if (ch === '(') {\n      indpf = kernel.indiceParentheseFermante(chaine, p)\n      if (indpf === -1) return -1\n      else p = indpf\n    } else {\n      if (ch === ',') k++\n      if (k === nb) return p\n    }\n    p++\n  }\n  return -1\n}\n/**\n * Cette fonction permet de trouver les meilleures graduations a afficher pour un repere.\n * Elle retourne la plus petite de ces graduations, afin que des nombres \"ronds\" soient affichÃ©s.\n * Fonction reprise Ã  partir du code de la version Flash et servant pour les\n * repÃ¨res et quadrillages\n * @param {Float} mini\n * @param {Float} maxi\n * @param {Float} unite\n * @returns {Float}\n */\nkernel.determiner_graduations = function (mini, maxi, unite) {\n  let debut_trace\n  // lorsque 0 est entre les bornes, on part de 0 et on cherche le dÃ©but du tracÃ©\n  if (maxi * mini < 0) {\n    debut_trace = -Math.floor(-mini / unite) * unite\n  }\n  // en cas de puissance de 10 entre les bornes, on prend\n  else if (Math.ceil(Math.log(Math.abs(mini)) / Math.LN10) !== Math.ceil(Math.log(Math.abs(maxi)) / Math.LN10)) {\n    if (mini < 0) {\n      debut_trace = -Math.pow(10, Math.floor(Math.log(Math.abs(mini)) / Math.LN10))\n    } else {\n      debut_trace = Math.pow(10, Math.ceil(Math.log(Math.abs(mini)) / Math.LN10))\n    }\n    debut_trace = debut_trace - Math.floor((debut_trace - mini) / unite) * unite\n  }\n  // dans tous les autres cas, on fait ce qu'on peut\n  else {\n    debut_trace = kernel.valeur_approchee(mini, Math.floor(Math.log(unite) / Math.LN10))\n    if (debut_trace < mini) {\n      debut_trace += unite\n    }\n  }\n  return debut_trace\n}\n/**\n * Fonction rÃ©cursive appelÃ©e lorsque l'affichage de texte n'utilise pas le LaTeX\n * Elle traite les balises u, i, b et font pour ajouter Ã  txt (qui est Ã©lÃ©ment\n * graphique svg text des tspans correspondants.\n * @param {String} : La chaÃ®ne contenant le texte avec balises Ã©ventuelles\n * @param {kernel.infoBalise} infoBalise : un objet qui contient les caractÃ©ristiques du texte, Ã  savoir\n * bold ou non, italique ou non, soulignÃ© ou non, couleur et fonte utilisÃ©e\n * @param {svg.text} txt : L'Ã©lÃ©ment text de svg auquel seront rajoutÃ©s les tspan crÃ©Ã©s\n * @param {Boolean} debutLigne : true si l'affichage du prochain tspan doit se faire en dÃ©but de ligne\n * @param {Integer} y : le paramÃ¨tre y du prochain tspan Ã  crÃ©er\n */\nkernel.traiteBalise = function (ch, infoBalise, txt, debutLigne, y) {\n  if (ch === '') return\n  let stylespan; let indfb; let ind1; let ind2; let fonte; let couleur; let taille; let inddeb; let info\n  const ind = ch.search(/<b>|<i>|<u>|<font/)\n  const tspan = document.createElementNS(kernel.svgsn, 'tspan')\n  tspan.setAttribute('pointer-events', 'none')\n  if ((ind === -1) || (ind > 0)) { // Il y a du texte\n    stylespan = ''\n    // if (infoBalise.couleur !== \"\") stylespan += \"fill:\" + infoBalise.couleur+\";\";\n    if (infoBalise.couleur) stylespan += 'fill:' + infoBalise.couleur + ';'\n    if (infoBalise.bold) stylespan += 'font-weight:bold;'\n    if (infoBalise.italic) stylespan += 'font-style:italic;'\n    if (infoBalise.underline) stylespan += 'text-decoration:underline;'\n    if (infoBalise.fontface !== '') stylespan += 'font-family:' + infoBalise.fontface + ';'\n    else stylespan += 'font-family: \"Times New Roman\", Times, serif;'\n    stylespan += 'font-size:' + infoBalise.taille + 'px;'\n    tspan.setAttribute('style', stylespan)\n    if (debutLigne) {\n      tspan.setAttribute('x', 0)\n      debutLigne = false\n    }\n    tspan.setAttribute('y', y)\n    const ch2 = (ind === -1) ? ch : ch.substring(0, ind)\n    tspan.appendChild(document.createTextNode(ch2))\n    txt.appendChild(tspan)\n    if (ind > 0) kernel.traiteBalise(ch.substring(ind), infoBalise, txt, debutLigne, y)\n    // else ch = \"\";\n  } else {\n    if (ch.indexOf('<b>') === 0) { // Balise bold\n      info = new kernel.infoBalise(true, infoBalise.italic, infoBalise.underline, infoBalise.couleur, infoBalise.fontface)\n      indfb = kernel.indiceFinBalise(ch)\n      if (indfb === -1) kernel.traiteBalise(ch.substring(3), info, txt, debutLigne, y)\n      else kernel.traiteBalise(ch.substring(3, indfb - 4), info, txt, debutLigne, y)\n    } else {\n      if (ch.indexOf('<i>') === 0) { // Balise italique\n        info = new kernel.infoBalise(infoBalise.bold, true, infoBalise.underline, infoBalise.couleur, infoBalise.fontface)\n        indfb = kernel.indiceFinBalise(ch)\n        if (indfb === -1) kernel.traiteBalise(ch.substring(3), info, txt, debutLigne, y)\n        else kernel.traiteBalise(ch.substring(3, indfb - 4), info, txt, debutLigne, y)\n      } else {\n        if (ch.indexOf('<u>') === 0) { // Balise souignÃ©\n          info = new kernel.infoBalise(infoBalise.bold, infoBalise.italic, true, infoBalise.couleur, infoBalise.fontface)\n          indfb = kernel.indiceFinBalise(ch)\n          if (indfb === -1) kernel.traiteBalise(ch.substring(3), info, txt, debutLigne, y)\n          else kernel.traiteBalise(ch.substring(3, indfb - 4), info, txt, debutLigne, y)\n        } else {\n          if (ch.indexOf('<font') === 0) {\n            indfb = kernel.indiceFinBalise(ch)\n            if (indfb === -1) indfb = ch.length\n            ind1 = ch.indexOf('face=\"')\n            if (ind1 !== -1) {\n              ind2 = ch.indexOf('\"', ind1 + 6)\n              if (ind2 !== -1) { fonte = ch.substring(ind1 + 6, ind2) } else fonte = ''\n            } else fonte = ''\n            couleur = ''\n            ind1 = ch.indexOf('couleur=\"')\n            if (ind1 !== -1) {\n              ind2 = ch.indexOf('\"', ind1 + 9)\n              if (ind2 !== -1) {\n                couleur = kernel.couleur(ch.substring(ind1 + 9, ind2))\n              }\n            } else {\n              ind1 = ch.indexOf('color=\"')\n              if (ind1 !== -1) {\n                ind2 = ch.indexOf('\"', ind1 + 7)\n                if (ind2 !== -1) {\n                  couleur = kernel.couleur(ch.substring(ind1 + 7, ind2))\n                }\n              }\n            }\n            ind1 = ch.indexOf('size=\"')\n            if (ind1 !== -1) {\n              ind2 = ch.indexOf('\"', ind1 + 6)\n              if (ind2 !== -1) { taille = ch.substring(ind1 + 6, ind2) } else taille = infoBalise.taille\n            }\n\n            info = new kernel.infoBalise(infoBalise.bold, infoBalise.italic, infoBalise.underline, couleur, fonte, taille)\n            inddeb = ch.indexOf('>') // Recherche du > de la balise <font>\n            if (ch.search(new RegExp('</font>', 'i')) !== -1) { kernel.traiteBalise(ch.substring(inddeb + 1, indfb - 7), info, txt, debutLigne, y) } else kernel.traiteBalise(ch.substring(inddeb + 1), info, txt, debutLigne, y)\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Fonction renvoyant true si la chaÃ®ne ch contient des codes spÃ©ciaux de maths en flash\n * sauf les Â£e() et Â£i() simples.\n * Si les arguments de Â£e() ou Â£i() contiennent des appels Ã  des balises ou d'autres\n * appels Ã  Â£e() et Â£i() renvoie true car alors il faut utiliser le LaTeX pour reprÃ©senter la formule.\n * Si expind est true on cherche aussi les puissances et indices\n * @param {string} ch\n * @returns {Boolean}\n */\nkernel.necessiteLatex = function (ch) {\n  // Les codes e (exposant) et i (idice) ne nÃ©cessitent pas l'utilisation de MathJax\n  if (['a', 'c', 'd', 'f', 'g', 'n', 'p', 'r', 's', 'u', 'v'].some(code => ch.includes(`Â£${code}(`))) return true\n  // Si la formule contient des puissances ou des indices utilisant elle-mÃªmes des balises\n  // puissances, indices ou font il faut passer par le LaTeX donc on renvoie true\n  let ind, indparf, s\n  let ch1 = ch\n  while ((ind = ch1.search(/Â£e\\(|Â£i\\(/g)) !== -1) {\n    indparf = kernel.indiceParentheseFermante(ch1, ind + 3)\n    if (indparf === -1) indparf = ch1.length\n    s = ch1.substring(ind, indparf)\n    if (s.search(/Â£e\\(|Â£i\\(Â£ltÂ£font/g) !== -1) return true\n    if (indparf === ch1.length) return false\n    else ch1 = s.substring(indparf + 1)\n  }\n  ch1 = ch\n  // Si la formule contient des balise font contenant des indices ou exposants\n  // il faut aussi passer par le LaTeX donc on renvoie true\n  while ((ind = ch1.search(/Â£ltÂ£font/g)) !== -1) {\n    indparf = kernel.indiceFinBalise(ch1.substring(ind))\n    if (indparf === -1) indparf = ch1.length\n    else indparf += ind\n    s = ch1.substring(ind, indparf)\n    if (s.search(/Â£e\\(|Â£i\\(/g) !== -1) return true\n    if (indparf === ch1.length) return false\n    else ch1 = s.substring(indparf + 1)\n  }\n  return false\n}\n\n/**\n * Fonction rÃ©cursive renvoyant une chaÃ®ne LaTeX reprÃ©sentant la chaÃ®ne contenue dans s\n * @param {string} s : la chaÃ®ne Ã  traiter (qui reprÃ©sente une ligne dans le cas de plusieurs lignes)\n * @param {Boolena} btexte : Si true, le contenut renvoyÃ© est encadrÃ© par une balise \\text\n */\nkernel.getMaths = function (s, btexte) {\n  let ind, indpf, indv, ind1, ind2, inddeb, ch2, couleur, ret, indv1, indv2, indv3, car\n  const ch = s\n  if (ch === '') return ''\n  // Traitement des balises Font\n  // On ne traite que les changements de couleur\n  while ((ind = ch.indexOf('<font')) !== -1) {\n    couleur = null\n    ch2 = ch.substring(ind)\n    indpf = kernel.indiceFinBalise(ch2)\n    ind1 = ch2.indexOf('couleur=\"')\n    if (ind1 !== -1) {\n      ind2 = ch2.indexOf('\"', ind1 + 9)\n      if (ind2 !== -1) couleur = kernel.couleur(ch2.substring(ind1 + 9, ind2))\n    } else {\n      ind1 = ch2.indexOf('color=\"')\n      if (ind1 !== -1) {\n        ind2 = ch2.indexOf('\"', ind1 + 7)\n        if (ind2 !== -1) couleur = kernel.couleur(ch2.substring(ind1 + 7, ind2))\n      }\n    }\n    if (couleur != null) { // On ne traite que les changements de couleur\n      inddeb = ind + ch2.indexOf('>') + 1 // Pointe sur le dÃ©but concernÃ© par la balise <font\n      if (indpf === -1) {\n        return kernel.getMaths(ch.substring(0, ind) + '\\\\textcolor{' + couleur + '}{' +\n          ch.substring(inddeb) + '}', btexte)\n      } else {\n        indpf += ind\n        return kernel.getMaths(ch.substring(0, ind) + '\\\\textcolor{' + couleur + '}{' +\n          ch.substring(inddeb, indpf - 7) + '}' + ch.substring(indpf), btexte)\n      }\n    } else {\n      inddeb = ind + ch2.indexOf('>') + 1\n      if (indpf === -1) return kernel.getMaths(ch.substring(0, ind) + ch.substring(inddeb), btexte)\n      else {\n        indpf += ind\n        return kernel.getMaths(ch.substring(0, ind) + ch.substring(inddeb, indpf - 7) +\n          ch.substring(indpf), btexte)\n      }\n    }\n  }\n  // Traitement des caractÃ¨res par code hexadÃ©cimal\n  while ((ind = ch.indexOf('Â£u(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\unicode{x' + ch.substring(ind + 3, indpf) +\n      '}' + kernel.getMaths(ch.substring(indpf + 1), btexte)\n  }\n  // Traitement des fractions\n  while ((ind = ch.indexOf('Â£f(')) !== -1) {\n    indv = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if ((indv === -1) || (indpf === -1) || (indv > indpf)) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\frac{' +\n      kernel.getMaths(ch.substring(ind + 3, indv), false) + '}{' +\n      kernel.getMaths(ch.substring(indv + 1, indpf), false) + '}' + kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des racines carrÃ©es\n  while ((ind = ch.indexOf('Â£r(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\sqrt{' +\n      kernel.getMaths(ch.substring(ind + 3, indpf), false) +\n      '}' + kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des codes d'angle\n  while ((ind = ch.indexOf('Â£a(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) +\n      '\\\\widehat{' + kernel.getMaths(ch.substring(ind + 3, indpf), true) + '}' +\n      kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des intÃ©grales\n  while ((ind = ch.indexOf('Â£g(')) !== -1) {\n    indv1 = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indv2 = kernel.indiceVirgule(ch, ind + 3, 2) // Recherche de la premiÃ¨re virgule\n    indv3 = kernel.indiceVirgule(ch, ind + 3, 3) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\int_{' +\n      kernel.getMaths(ch.substring(indv2 + 1, indv3), false) + '}^{' +\n      kernel.getMaths(ch.substring(indv3 + 1, indpf), false) +\n      '}' + kernel.getMaths(ch.substring(ind + 3, indv1), false) +\n      ' d' + kernel.getMaths(ch.substring(indv1 + 1, indv2), false) +\n      kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des crochets\n  while ((ind = ch.indexOf('Â£c(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\left[' + kernel.getMaths(ch.substring(ind + 3, indpf), btexte) +\n      '\\\\right]' + kernel.getMaths(ch.substring(indpf + 1), btexte)\n  }\n  // Traitement des parenthÃ¨ses\n  while ((ind = ch.indexOf('Â£p(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\left(' + kernel.getMaths(ch.substring(ind + 3, indpf), btexte) +\n      '\\\\right)' + kernel.getMaths(ch.substring(indpf + 1), btexte))\n  }\n  // Traitement des valeurs absolues\n  while ((ind = ch.indexOf('Â£d(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\left|' + kernel.getMaths(ch.substring(ind + 3, indpf), false) +\n      '\\\\right|' + kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des normes\n  while ((ind = ch.indexOf('Â£n(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\left\\\\|' + kernel.getMaths(ch.substring(ind + 3, indpf), false) +\n      '\\\\right\\\\|' + kernel.getMaths(ch.substring(indpf + 1), btexte))\n  }\n  // Traitement des indices\n  while ((ind = ch.indexOf('Â£i(')) !== -1) {\n    indv = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if ((indv === -1) || (indpf === -1) || (indv > indpf)) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '{' + kernel.getMaths(ch.substring(ind + 3, indv), false) + '}_{' +\n      kernel.getMaths(ch.substring(indv + 1, indpf), false) + '}' + kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des exposants\n  while ((ind = ch.indexOf('Â£e(')) !== -1) {\n    indv = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if ((indv === -1) || (indpf === -1) || (indv > indpf)) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '{' + kernel.getMaths(ch.substring(ind + 3, indv), false) + '}^{' +\n      kernel.getMaths(ch.substring(indv + 1, indpf), false) + '}' + kernel.getMaths(ch.substring(indpf + 1), btexte))\n  }\n  // Traitement des vecteurs\n  while ((ind = ch.indexOf('Â£v(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMaths(kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\overrightarrow{' + kernel.getMaths(ch.substring(ind + 3, indpf), false) +\n      '}' + kernel.getMaths(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des balises <u>\n  while ((ind = ch.indexOf('<u>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) return ch\n    else indpf += ind\n    return kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\underline{' + kernel.getMaths(ch.substring(ind + 3, indpf - 4), true) +\n      '}' + kernel.getMaths(ch.substring(indpf), btexte)\n  }\n  // Traitement des balises <i>\n  while ((ind = ch.indexOf('<i>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) {\n      return kernel.getMaths(ch.substring(0, ind), btexte) +\n      '\\\\textit{' + kernel.getMaths(ch.substring(ind + 3), false) + '}'\n    } else {\n      indpf += ind\n      return kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\textit{' +\n        kernel.getMaths(ch.substring(ind + 3, indpf - 4), false) + '}' +\n        kernel.getMaths(ch.substring(indpf), btexte)\n    }\n  }\n  // Traitement des balises <b>\n  while ((ind = ch.indexOf('<b>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) {\n      return kernel.getMaths(ch.substring(0, ind), btexte) +\n      '\\\\textbf{' + kernel.getMaths(ch.substring(ind + 3), false) + '}'\n    } else {\n      indpf += ind\n      return kernel.getMaths(ch.substring(0, ind), btexte) + '\\\\textbf{' +\n        kernel.getMaths(ch.substring(ind + 3, indpf - 4), false) + '}' +\n        kernel.getMaths(ch.substring(indpf), btexte)\n    }\n  }\n  if (btexte) {\n    car = ch.charAt(0)\n    // if ((car === \")\") || (car === \",\") || (car === \"}\")) return ch;\n    if ((car === ')') || (car === ',') || (car === '}')) return car + kernel.getMaths(ch.substring(1), btexte)\n    else {\n      // MÃªme si on et en mode texte, on peut avoir au dÃ©but de ch une balise \\textcolor incomplÃ¨te\n      if (kernel.contientBaliseLaTeX(ch)) return ch\n      else {\n        // Il faut sauter les balises \\\\textcolor en tenant compte que certaines ne sont pas fermÃ©es.\n        ind = ch.indexOf('\\\\textcolor{')\n        if (ind !== -1) {\n          ret = ''\n          ch2 = ch\n          while ((ind = ch2.indexOf('\\\\textcolor{')) !== -1) {\n            ind1 = ch2.indexOf('}{')\n            indpf = kernel.accoladeFermante(ch2, ind1 + 1)\n            if (indpf === -1) {\n              if (ind === 0) {\n                if (ind1 + 2 !== ch2.length) ret += ch2.substring(0, ind1 + 2) + '\\\\text{' + ch2.substring(ind1 + 2) + '}'\n                else ret += ch2\n                ch2 = ''\n              } else {\n                if (ind1 + 2 !== ch2.length) {\n                  ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2) +\n                  '\\\\text{' + ch2.substring(ind1 + 2) + '}'\n                } else ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2)\n                ch2 = ''\n              }\n            } else {\n              if (ind === 0) {\n                ret += ch2.substring(0, indpf + 1)\n                if (indpf < ch2.length - 1) ch2 = ch2.substring(indpf + 1)\n                else ch2 = ''\n              } else {\n                ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2) +\n                  '\\\\text{' + ch2.substring(ind1 + 2, indpf + 1) + '}'\n                if (indpf < ch2.length - 1) ch2 = ch2.substring(indpf + 1)\n                else ch2 = ''\n              }\n            }\n          }\n          if (ch2 === '') return ret\n          else return ret + '\\\\text{' + ch2 + '}'\n        } else {\n          // Si la chaÃ®ne commence par une parenthÃ¨se fermante, une accolade fermante ou une virgule\n          //  il s'agit d'une formule en cours et pas de mode texte\n          // Si le texte commence par des espaces, pour qu'ils soient pris en compte, on rajoute des espaces\n          // insÃ©cables en mode maths\n          let deb = 0\n          let k = 0\n          while (ch.charAt(k) === ' ') {\n            deb++\n            k++\n          }\n          return '~'.repeat(deb) + '\\\\text{' + ch.substring(k) + '}'\n        }\n      }\n    }\n  } else return ch\n}\n\n/**\n * Fonction rÃ©cursive renvoyant une chaÃ®ne LaTeX reprÃ©sentant la chaÃ®ne contenue dans s\n * UtilisÃ©e pour les noms devant utiliser le LaTeX pour Ãªtre affichÃ©s\n * @param {string} s : la chaÃ®ne Ã  traiter (qui reprÃ©sente une ligne dans le cas de plusieurs lignes)\n * @param {Boolena} btexte : Si true, le contenut renvoyÃ© est encadrÃ© par une balise \\text Test\n */\nkernel.getMathsForName = function (s, btexte) {\n  let ind, indpf, indv, ind1, ind2, inddeb, ch2, couleur, ret, car\n  let ch = s\n  if (ch === '') return ''\n  // Traitement des balises Font\n  // On ne traite que les changements de couleur\n  while ((ind = ch.indexOf('<font')) !== -1) {\n    couleur = null\n    ch2 = ch.substring(ind)\n    indpf = kernel.indiceFinBalise(ch2)\n    ind1 = ch2.indexOf('couleur=\"')\n    if (ind1 !== -1) {\n      ind2 = ch2.indexOf('\"', ind1 + 9)\n      if (ind2 !== -1) couleur = kernel.couleur(ch2.substring(ind1 + 9, ind2))\n    } else {\n      ind1 = ch2.indexOf('color=\"')\n      if (ind1 !== -1) {\n        ind2 = ch2.indexOf('\"', ind1 + 7)\n        if (ind2 !== -1) couleur = kernel.couleur(ch2.substring(ind1 + 7, ind2))\n      }\n    }\n    if (couleur !== null) { // On ne traite que les changements de couleur\n      inddeb = ind + ch2.indexOf('>') + 1 // Pointe sur le dÃ©but concernÃ© par la balise <font\n      if (indpf === -1) {\n        return kernel.getMathsForName(ch.substring(0, ind) + '\\\\textcolor{' + couleur + '}{' +\n          ch.substring(inddeb) + '}', btexte)\n      } else {\n        indpf += ind\n        return kernel.getMathsForName(ch.substring(0, ind) + '\\\\textcolor{' + couleur + '}{' +\n          ch.substring(inddeb, indpf - 7) + '}' + ch.substring(indpf), btexte)\n      }\n    } else {\n      inddeb = ind + ch2.indexOf('>') + 1\n      if (indpf === -1) return kernel.getMathsForName(ch.substring(0, ind) + ch.substring(inddeb), btexte)\n      else {\n        indpf += ind\n        return kernel.getMathsForName(ch.substring(0, ind) + ch.substring(inddeb, indpf - 7) +\n          ch.substring(indpf), btexte)\n      }\n    }\n  }\n  // Traitement des caractÃ¨res par code hexadÃ©cimal\n  while ((ind = ch.indexOf('Â£u(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\unicode{x' + ch.substring(ind + 3, indpf) +\n      '}' + kernel.getMathsForName(ch.substring(indpf + 1), btexte)\n  }\n  // Traitement des racines carrÃ©es\n  while ((ind = ch.indexOf('Â£r(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\sqrt{' +\n      kernel.getMathsForName(ch.substring(ind + 3, indpf), false) +\n      '}' + kernel.getMathsForName(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des valeurs absolues\n  while ((ind = ch.indexOf('Â£d(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\left|' + kernel.getMathsForName(ch.substring(ind + 3, indpf), false) +\n      '\\\\right|' + kernel.getMathsForName(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des normes\n  while ((ind = ch.indexOf('Â£n(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\left\\\\|' + kernel.getMathsForName(ch.substring(ind + 3, indpf), false) +\n      '\\\\right\\\\|' + kernel.getMathsForName(ch.substring(indpf + 1), btexte))\n  }\n  // Traitement des indices\n  while ((ind = ch.indexOf('Â£i(')) !== -1) {\n    indv = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if ((indv === -1) || (indpf === -1) || (indv > indpf)) return ch\n    // rrue car il s'agit d'un nom : kernel.getMathsForName(ch.substring(ind+3,indv),true)\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '{' + kernel.getMathsForName(ch.substring(ind + 3, indv), true) + '}_{' +\n      kernel.getMathsForName(ch.substring(indv + 1, indpf), false) + '}' + kernel.getMathsForName(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des exposants\n  while ((ind = ch.indexOf('Â£e(')) !== -1) {\n    indv = kernel.indiceVirgule(ch, ind + 3, 1) // Recherche de la premiÃ¨re virgule\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if ((indv === -1) || (indpf === -1) || (indv > indpf)) return ch\n    // true car il s'agit d'un affichage de nom : kernel.getMathsForName(ch.substring(ind+3,indv),true)\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '{' + kernel.getMathsForName(ch.substring(ind + 3, indv), true) + '}^{' +\n      kernel.getMathsForName(ch.substring(indv + 1, indpf), false) + '}' + kernel.getMathsForName(ch.substring(indpf + 1), btexte))\n  }\n  // Traitement des vecteurs\n  while ((ind = ch.indexOf('Â£v(')) !== -1) {\n    indpf = kernel.indiceParentheseFermante(ch, ind + 2)\n    if (indpf === -1) return ch\n    return kernel.getMathsForName(kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\overrightarrow{' + kernel.getMathsForName(ch.substring(ind + 3, indpf), false) +\n      '}' + kernel.getMathsForName(ch.substring(indpf + 1), btexte), btexte)\n  }\n  // Traitement des balises <u>\n  while ((ind = ch.indexOf('<u>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) return ch\n    else indpf += ind\n    return kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\underline{' + kernel.getMathsForName(ch.substring(ind + 3, indpf - 4), true) +\n      '}' + kernel.getMathsForName(ch.substring(indpf), btexte)\n  }\n  // Traitement des balises <i>\n  while ((ind = ch.indexOf('<i>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) {\n      return kernel.getMathsForName(ch.substring(0, ind), btexte) +\n      '\\\\textit{' + kernel.getMathsForName(ch.substring(ind + 3), false) + '}'\n    } else {\n      indpf += ind\n      return kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\textit{' +\n        kernel.getMathsForName(ch.substring(ind + 3, indpf - 4), false) + '}' +\n        kernel.getMathsForName(ch.substring(indpf), btexte)\n    }\n  }\n  // Traitement des balises <b>\n  while ((ind = ch.indexOf('<b>')) !== -1) {\n    indpf = kernel.indiceFinBalise(ch.substring(ind))\n    if (indpf === -1) {\n      return kernel.getMathsForName(ch.substring(0, ind), btexte) +\n      '\\\\textbf{' + kernel.getMathsForName(ch.substring(ind + 3), false) + '}'\n    } else {\n      indpf += ind\n      return kernel.getMathsForName(ch.substring(0, ind), btexte) + '\\\\textbf{' +\n        kernel.getMathsForName(ch.substring(ind + 3, indpf - 4), false) + '}' +\n        kernel.getMathsForName(ch.substring(indpf), btexte)\n    }\n  }\n  if (btexte) {\n    // MÃªme si on et en mode texte, on peut avoir au dÃ©but de ch une balise \\textcolor incomplÃ¨te\n    if (kernel.contientBaliseLaTeX(ch)) return ch\n    else {\n      // Il faut sauter les balises \\\\textcolor en tenant compte que certaines ne sont pas fermÃ©es.\n      ind = ch.indexOf('\\\\textcolor{')\n      if (ind !== -1) {\n        ret = ''\n        ch2 = ch\n        while ((ind = ch2.indexOf('\\\\textcolor{')) !== -1) {\n          ind1 = ch2.indexOf('}{')\n          indpf = kernel.accoladeFermante(ch2, ind1 + 1)\n          if (indpf === -1) {\n            if (ind === 0) {\n              if (ind1 + 2 !== ch2.length) ret += ch2.substring(0, ind1 + 2) + '\\\\text{' + ch2.substring(ind1 + 2) + '}'\n              else ret += ch2\n              ch2 = ''\n            } else {\n              if (ind1 + 2 !== ch2.length) {\n                ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2) +\n                '\\\\text{' + ch2.substring(ind1 + 2) + '}'\n              } else ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2)\n              ch2 = ''\n            }\n          } else {\n            if (ind === 0) {\n              ret += ch2.substring(0, indpf + 1)\n              if (indpf < ch2.length - 1) ch2 = ch2.substring(indpf + 1)\n              else ch2 = ''\n            } else {\n              ret += '\\\\text{' + ch2.substring(0, ind) + '}' + ch2.substring(ind, ind1 + 2) +\n                '\\\\text{' + ch2.substring(ind1 + 2, indpf + 1) + '}'\n              if (indpf < ch2.length - 1) ch2 = ch2.substring(indpf + 1)\n              else ch2 = ''\n            }\n          }\n        }\n        if (ch2 === '') return ret\n        else return ret + '\\\\text{' + ch2 + '}'\n      } else {\n        // Si la chaÃ®ne commence par une parenthÃ¨se fermante, une accolade fermante ou une virgule\n        //  il s'agit d'une formule en cours et pas de mode texte\n        car = ch.charAt(0)\n        if ((car === ')') || (car === ',') || (car === '}')) return ch\n        else {\n          // Si on est en modetexte et que la chaÃ®ne commence par des espaces, pour qu'ils soient pris en compte\n          // on va, pour ces espaces, rester en mode maths et les remplacer par des ~ pour avoir des espaces insÃ©cables.\n          let deb = ''\n          while (ch.indexOf(' ') === 0) {\n            deb += '~'\n            ch = ch.substring(1)\n          }\n          return deb + '\\\\text{' + ch + '}'\n        }\n      }\n    }\n  } else return ch\n}\n/**\n * Fontion qui, dans le cas d'utilisation du LaTeX, remplace les caractÃ¨res accentuÃ©s\n * qui ne sont pas bien traitÃ©s par MathJax par des codes LaTeX\n * @param {string} ch\n * @returns {string|iep.traiteAccents.st} : La chaÃ®ne avec les caractÃ¨res remplacÃ©s\n */\nkernel.traiteAccents = function (ch) {\n  let indpf, st, i, car, car2, bool, ind\n  const a = 'Ã©Ã¨Ã Ã¹Ã¢ÃªÃ´'\n  const b = ['acute', 'grave', 'grave', 'grave', 'hat', 'hat', 'hat']\n  const c = 'eeauaeo'\n  // On traite les Â£virgÂ£ et Â£virgÂ£\n  ch = ch.replace(/Â£virgÂ£/gi, ',')\n  ch = ch.replace(/Â£virguleÂ£/gi, ',')\n  bool = false\n  for (i = 0; i < a.length; i++) bool = bool || (ch.indexOf(a.charAt(i)) !== 0)\n  if (!bool || ch.indexOf('\\\\text{') === -1) return ch\n  let res = ''\n  let inddeb = 0\n  while (((ind = ch.indexOf('\\\\text{', inddeb)) !== -1) && (inddeb < ch.length)) {\n    indpf = kernel.accoladeFermante(ch, ind + 6)\n    if (indpf === -1) break\n    res = res + ch.substring(inddeb, ind)\n    st = ch.substring(ind + 6, indpf + 1)\n    for (i = 0; i < a.length; i++) {\n      car = a.charAt(i)\n      car2 = c.charAt(i)\n      if (st.charAt(0) === car) st = '\\\\' + b[i] + '{' + car2 + '}' + '\\\\text{' + st.substring(1)\n      if (st.charAt(st.length - 1) === car) { st = st.substring(0, st.length - 1) + '\\\\' + b[i] + '{' + car2 + '}' }\n      st = st.replace(new RegExp(car, 'g'), '}\\\\' + b[i] + '{' + car2 + '} \\\\text{')\n    }\n    // Impossible de traite le c cÃ©dille\n    // // Pour le lecteur IEP je laisse comme Ã§a\n    // st = st.replace(new RegExp(\"Ã§\",\"g\"),\"c\");\n    bool = false\n    for (i = 0; i < a.length; i++) bool = bool || (st.indexOf('\\\\' + b[i]) === 0)\n    if (bool) res = res + st\n    else res = res + '\\\\text{' + st\n    inddeb = indpf + 1\n  }\n  if (inddeb < ch.length) res = res + ch.substring(inddeb)\n  return res\n}\n/**\n * Fonction de log en dev (ne fait rien en prod)\n * @param {*} â€¦ autant d'arguments que l'on veut, les erreur seront envoyÃ©es Ã  console.error et le reste Ã  console.log\n */\n/*\nkernel.log = function () {\n  if (kernel.isDev && typeof console !== \"undefined\" && console.log && console.error) {\n    var i, arg;\n    for (i = 0; i < arguments.length; i++) {\n      arg = arguments[i];\n      if (arg instanceof Error) console.error(arg);\n      else console.log(arg);\n    }\n  }\n}\n*/\n\n/**\n * Le namespace svg\n * @type {string}\n */\n// kernel.svgsn = \"http://www.w3.org/2000/svg\";\n\nmodule.exports = kernel\n","/*\r\n * Visualiseur InstrumenPoche en Javascript et SVG\r\n * @Author Yves Biton (yves.biton@sesamath.net)\r\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\r\n *\r\n * Sert Ã  compiler iepjsmax.js et iepjsmin.js, en exportant la version webpack du lecteur iep\r\n * dans le mÃªme espace de nom que prÃ©cÃ©demment. Ã  savoir une var globale iep\r\n * (cf webpack.old.config.js avec libraryTarget: var &  library: 'iep')\r\n * qui s'utilise avec `var app = new iep.iepApp()`\r\n *\r\n * On laisse Ã§a, pour ceux qui utilisent encore ces js, dÃ©prÃ©ciÃ©s au profit du loader\r\n */\r\nconst IepApp = require('./app/IepApp')\r\nmodule.exports = { iepApp: IepApp }\r\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = Compas\n/**\n * @constructor\n * @extends iep.instrumentAncetre\n * Objet Compas contenu dans une animation InstrumenPche\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * la variable this.leve contient true si une action ActionLeverCompas a Ã©tÃ©\n * prÃ©cÃ©demment exÃ©cutÃ©e. Dans ce as c'est un autre objet iep.compasLeve qui sera crÃ©Ã©\n * La variable this.bretourne contient true si une action ActionRetourner a Ã©tÃ©\n * exÃ©cutÃ©e prÃ©cdemment.\n * et utilisÃ© dans la figure.\n */\nfunction Compas (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.ecart = 0\n  this.bretourne = false\n  this.leve = false\n  this.lon = 185 // Longueur intÃ©rieure des deux branches des compas\n  this.longpointe = 18\n  const d = this.lon + this.longpointe\n  this.alp = Math.asin(this.ecart / (2 * d)) / Math.PI * 180 // Le demi-angle que font les deux branches du compas\n  this.decbh = 30 // DÃ©calage vers le bas de la partie haute\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle, 1)\n  // Ajout de d'Ã©lÃ©ment graphique reprÃ©sentnant le compas dans le SVG contenant la figure\n  doc.svg.appendChild(this.g)\n}\nCompas.prototype = new InstrumentAncetre()\n/**\n * Fonction initialisant la position du compas\n */\nCompas.prototype.initialisePosition = function () {\n  InstrumentAncetre.prototype.initialisePosition.call(this)\n  this.ecart = 0\n  this.positionne()\n}\n/**\n * Fonction crÃ©ant l'Ã©lÃ©ment graphique reprÃ©sentant le compas\n * @returns {svgElement}\n */\nCompas.prototype.creeg = function () {\n  let g, li, p, path, circ, text, rect\n  const lon = this.lon // Longueur intÃ©rieure des deux branches des compas\n  const longpointe = this.longpointe // Longueur de la pointe et de la mine\n  const ep = 7 // Epaisseur des branches\n  const retb = 20 // Retrait du bouton de gauche sur la branche;\n  const rayb = 6 // Le rayon des boutons\n  const epm = 3.5 // Epaisseur de la mine\n  const dlb = 3 // la demi-largeur basse de la partie fixe\n  const dlm = 12 // La demi-largeur moyenne de la partie fixe\n  const ylm = 24 // L'ordonnÃ©e correspondante\n  const ylm2 = 35 // OrdonnÃ©e de la partie moyenne haute\n  const dlh = 6 // La demi-largeur haute de la partie fixe\n  const ylh = 50 // L'ordonnÃ©e correspondante\n  const dltop = 3 // La demi-largeur de la partie supÃ©rieure du chÃ¢peau\n  const ytop = 70 // L'ordonnÃ©e correspondante\n  g = document.createElementNS(kernel.svgsn, 'g')\n  this.bg = document.createElementNS(kernel.svgsn, 'g') // La branche de gauche\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', 0)\n  li.setAttribute('y1', 0)\n  li.setAttribute('x2', 0)\n  li.setAttribute('y2', -longpointe)\n  li.setAttribute('style', 'stroke: black; stroke-width:1.5;')\n  this.bg.appendChild(li)\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M0 ' + String(-longpointe) + 'L 0 ' + String(-longpointe - lon) + ' ' +\n          String(-ep) + ' ' + String(-longpointe - lon) + ' ' + String(-ep) + ' ' +\n          String(-longpointe) + 'Z'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  this.bg.appendChild(p)\n  // On rajoute le bouton de gauche\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', -ep / 2)\n  circ.setAttribute('cy', -longpointe - retb)\n  circ.setAttribute('r', rayb)\n  circ.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  this.bg.appendChild(circ)\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', -ep / 2)\n  circ.setAttribute('cy', -longpointe - retb)\n  circ.setAttribute('r', 2)\n  circ.setAttribute('style', 'stroke:black;stroke-width:1; fill: silver; fill-opacity: 1')\n  this.bg.appendChild(circ)\n  g.appendChild(this.bg)\n  // La branche de droite\n  this.bd = document.createElementNS(kernel.svgsn, 'g') // La branche de gauche\n  // La mine\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M 0 0 L0' + ' ' + String(-longpointe) + ' ' + epm + ' ' + String(-longpointe - epm) + ' ' +\n          epm + ' ' + String(-epm - 3) + 'Z'\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: blck; fill-opacity: 1')\n  p.setAttribute('d', path)\n  this.bd.appendChild(p)\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M0 ' + String(-longpointe) + 'L 0 ' + String(-longpointe - lon) + ' ' +\n          ep + ' ' + String(-longpointe - lon) + ' ' + ep + ' ' +\n          String(-longpointe) + 'Z'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  this.bd.appendChild(p)\n  // Le petit bout de bouton Ã  droite\n  p = document.createElementNS(kernel.svgsn, 'path')\n  const rayx = rayb / 4 * 3\n  const rayy = rayb / 2\n  path = 'M' + ep + ' ' + String(-longpointe - retb + rayx) + 'A ' + rayx + ' ' + rayy + ' -90 0 0 ' +\n       ep + ' ' + String(-longpointe - retb - rayx) + 'Z'\n  p.setAttribute('style', 'stroke:black;stroke-width:1; fill: silver; fill-opacity: 1')\n  p.setAttribute('d', path)\n  this.bd.appendChild(p)\n  // Ligne en biais sur la branche droite\n  const styleli = 'stroke: black; stroke-width:1;'\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', 0)\n  li.setAttribute('y1', -100)\n  li.setAttribute('x2', ep)\n  li.setAttribute('y2', -100 + ep)\n  li.setAttribute('style', styleli)\n  this.bd.appendChild(li)\n  // Autres lignes branche de droite\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', 0)\n  li.setAttribute('y1', -50)\n  li.setAttribute('x2', ep)\n  li.setAttribute('y2', -50)\n  li.setAttribute('style', styleli)\n  this.bd.appendChild(li)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', ep / 2)\n  li.setAttribute('y1', -50)\n  li.setAttribute('x2', ep / 2)\n  li.setAttribute('y2', -73)\n  li.setAttribute('style', styleli)\n  this.bd.appendChild(li)\n  // Le bouton vu de cÃ´tÃ©\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', ep)\n  rect.setAttribute('y', -68)\n  rect.setAttribute('width', 4)\n  rect.setAttribute('height', 12)\n  rect.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  this.bd.appendChild(rect)\n  g.appendChild(this.bd)\n  // La partie fixe du haut\n  this.haut = document.createElementNS(kernel.svgsn, 'g')\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M 0 0 L' + dlb + ' 0 ' + dlm + ' ' + String(-ylm) + ' ' + dlm + ' ' + String(-ylm2) +\n          'A' + String(ylh - ylm2) + ' ' + String(dlm - dlh) + ' -90 0 1 ' + dlh + ' ' + String(-ylh) +\n          'L' + dltop + ' ' + String(-ytop) + ' ' + String(-dltop) + ' ' + String(-ytop) +\n          'L' + String(-dlh) + ' ' + String(-ylh) + 'A' + String(ylh - ylm2) + ' ' + String(dlm - dlh) +\n          ' 90 0 1 ' + String(-dlm) + ' ' + String(-ylm2) + ' L ' +\n          String(-dlm) + ' ' + String(-ylm) + ' ' + String(-dlb) + ' 0Z'\n\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1')\n  // this.haut.setAttribute(\"transform\",\"translate(0,30)\");\n  this.haut.appendChild(p)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', dlh)\n  li.setAttribute('y1', -ylh)\n  li.setAttribute('x2', -dlh)\n  li.setAttribute('y2', -ylh)\n  li.setAttribute('style', 'stroke: black; stroke-width:1;')\n  this.haut.appendChild(li)\n  // On ajoute le logo Sesamath\n  text = document.createElementNS(kernel.svgsn, 'text')\n  text.setAttribute('pointer-events', 'none')\n  text.appendChild(document.createTextNode('SÃ©samath'))\n  text.setAttribute('x', 0)\n  text.setAttribute('y', 0)\n  text.setAttribute('style', 'font-family: Arial;font-size: 5pt;fill: white')\n  text.setAttribute('transform', 'rotate(-90) translate(4,2.5)')\n  this.haut.appendChild(text)\n\n  // On rajoute les deux petits ronds blancs (rivets) Ã  chaque branche\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', -ep + 1)\n  circ.setAttribute('cy', -this.decbh)\n  circ.setAttribute('r', 3)\n  circ.setAttribute('style', 'stroke:black;stroke-width:1; fill: white; fill-opacity: 1')\n  this.haut.appendChild(circ)\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', ep - 1)\n  circ.setAttribute('cy', -this.decbh)\n  circ.setAttribute('r', 3)\n  circ.setAttribute('style', 'stroke:black;stroke-width:1; fill: white; fill-opacity: 1')\n  this.haut.appendChild(circ)\n\n  g.appendChild(this.haut)\n  this.g = g\n}\n/**\n * Fonction calculant les Ã©lÃ©ments graphiques du compas et modifiant le svg element\n * en consÃ©quence.\n * @param {Float} x : l'abscisse de la point du compas\n * @param {Float} y : l'ordonnÃ©e de la pointe du compas\n * @param {Float} angle : l'angle en degrÃ©s que fait le compas avec l'horizontale\n * @param {Float} zoomfactor : le zoom initialisÃ© au daprt Ã  1 et qui peut Ãªtre\n * modifiÃ© par une action ActionZoomInstrument\n */\nCompas.prototype.setPosition = function (x, y, angle, zoomfactor) {\n  let zoom, scale\n  if (arguments.length >= 4) {\n    zoom = zoomfactor\n    this.zoomfactor = zoom\n  } else zoom = this.zoomfactor\n  if (this.bretroune) scale = 'scale(' + zoom + ',' + String(-zoom) + ') '\n  else scale = 'scale(' + zoom + ') '\n  this.x = x\n  this.y = y\n  this.angle = angle\n  const d = this.lon + this.longpointe\n  this.alp = Math.asin(this.ecart / (2 * d * zoom)) / Math.PI * 180 // Le demi-angle que font les deux branches du compas\n  this.bg.setAttribute('transform', 'rotate(' + this.alp + ')')\n  this.bd.setAttribute('transform', 'translate(' + this.ecart / zoom + ',0) rotate(' + String(-this.alp) + ')')\n  const ang = this.alp / 180 * Math.PI\n  this.haut.setAttribute('transform', 'translate(' + String(this.ecart / 2 / zoom) +\n    ',' + String((-d) * Math.cos(ang) + this.decbh) + ')')\n\n  this.g.setAttribute('transform', scale + 'translate(' +\n    String(x / zoom) + ',' + String(y / zoom) + ') rotate(' + angle + ')')\n}\n/**\n * Fonction utilisÃ©e pour mettre le compas en position retournÃ©e par rapport\n * Ã  la position prÃ©cÃ©dente.\n */\nCompas.prototype.retourne = function () {\n  this.bretourne = !this.bretourne\n  this.setPosition(this.x, this.y, this.angle)\n}\n/**\n * Fonction recalculant les Ã©lÃ©ments du Compas et mettant en consÃ©quence Ã  jour\n * l'Ã©lÃ©ment graphique qui le reprÃ©sente.\n */\nCompas.prototype.positionne = function () {\n  InstrumentAncetre.prototype.positionne.call(this)\n  if (this.leve && (this.doc.compasLeve != null)) InstrumentAncetre.prototype.positionne.call(this.doc.compasLeve)\n}\n/**\n * Fonction translatant le compas au point de coordonnÃ©es (x;y)\n * @param {Float} x : l'abscisse du point de destination\n * @param {Float} y : l'ordonnÃ©e du point de destination\n */\nCompas.prototype.translate = function (x, y) {\n  InstrumentAncetre.prototype.translate.call(this, x, y)\n  if (this.leve && (this.doc.compasLeve != null)) InstrumentAncetre.prototype.translate.call(this.doc.compasLeve, x, y)\n}\n/**\n * Fonction lanÃ§ant une animation d'Ã©cartement de compas pour une action ActionEcaterCompas\n * @param {Float} ecart l la valeur de l'Ã©cartement final (en unitÃ©s de longueur)\n * @param {Float} ec10 : le pas d'incrÃ©mentation pour l'Ã©cart Ã  chaque dixiÃ¨me de seconde\n */\nCompas.prototype.lanceAnimationEcartement = function (ecart, ec10) {\n  this.ecartfin = parseFloat(ecart)\n  // Dans la version JavaScript on pourra rajouter un paramÃ¨tre donnant le pas\n  // d'Ã©cartement par dixiÃ¨me de seconde\n  this.pasecart = ec10 / 4\n  this.pasecart *= (ecart >= this.ecart) ? 1 : -1 // 1 pour le sens direct svg\n  this.distecart = Math.abs(ecart - this.ecart)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourEcartement() }, 25)\n}\n// On poursuit l'animation tant que la distance entre la position actuelle et la psoition de fin\n// est infÃ©rieure Ã  la distance prÃ©cÃ©dente\n/**\n * Fonction appelÃ©e par un timer lors d'une aniamtion d'Ã©cartement de compas\n * On poursuit l'animation tant que la distance entre la position actuelle et\n * la position de fin de n rÃ©augmente pas\n */\nCompas.prototype.actionPourEcartement = function () {\n  const ec = this.ecart + this.pasecart\n  const dis = Math.abs(ec - this.ecartfin)\n  if ((dis > this.distecart) || !this.doc.animationEnCours) {\n    this.ecart = this.ecartfin\n    this.setPosition(this.x, this.y, this.angle)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.distecart = dis\n    this.ecart = ec\n    this.setPosition(this.x, this.y, this.angle)\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = CompasLeve\n/**\n * @constructor\n * @extends iep.instrumentAncetre\n * Classe reprÃ©sentant le compas vu du dessus.\n * Attention : Contrairement au compas normal, le compas levÃ© doit Ãªtre reconstruit Ã   chaque fois\n * que son Ã©cartement est modifiÃ©.\n */\nfunction CompasLeve (doc, x, y, angle, ecart) {\n  InstrumentAncetre.call(this, doc)\n  const oldg = (doc.compasLeve == null) ? null : doc.compasLeve.g\n  this.x = x\n  this.y = y\n  this.angle = angle\n  this.ecart = ecart\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(x, y, angle)\n  if (oldg == null) doc.svg.appendChild(this.g)\n  else doc.svg.replaceChild(this.g, oldg)\n}\nCompasLeve.prototype = new InstrumentAncetre()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant le compas\n * levÃ© dans le DOM du svg contenant la figure.\n */\nCompasLeve.prototype.creeg = function () {\n  let rect, li, p, circ\n  const ep = 7 // Epaisseur des branches. La mÃªme que dans compas.\n  const longpointe = 8 // Longueur de la pointe et des mines\n  const ecart = this.ecart\n\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  if (this.ecart > 2 * longpointe) {\n    rect = document.createElementNS(kernel.svgsn, 'rect')\n    rect.setAttribute('x', longpointe)\n    rect.setAttribute('y', -ep / 2)\n    rect.setAttribute('width', this.ecart - 2 * longpointe)\n    rect.setAttribute('height', ep)\n    rect.setAttribute('rx', 1)\n    rect.setAttribute('ry', 1)\n    rect.setAttribute('style', 'stroke:black;stroke-width:0.5;fill:silver;fill-opacity:1')\n    g.appendChild(rect)\n  }\n  p = document.createElementNS(kernel.svgsn, 'path')\n  p.setAttribute('d', 'M0 0 L' + longpointe + ' 1 ' + longpointe + ' -1Z')\n  p.setAttribute('style', 'stroke:black;stroke-width:0.5;fill:black;fill-opacity:1')\n  g.appendChild(p)\n  const d = ecart - 2 * longpointe\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', longpointe)\n  li.setAttribute('y1', 0)\n  li.setAttribute('x2', longpointe + d / 8)\n  li.setAttribute('y2', 0)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  p = document.createElementNS(kernel.svgsn, 'path')\n  const e = String(ecart - longpointe)\n  p.setAttribute('d', 'M' + ecart + ' 0 L' + e + ' 1.5 ' + e + ' -1.5Z')\n  p.setAttribute('style', 'stroke:black;stroke-width:0.5;fill:black;fill-opacity:1')\n  g.appendChild(p)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', e)\n  li.setAttribute('y1', 0)\n  li.setAttribute('x2', String(ecart - longpointe - d / 8))\n  li.setAttribute('y2', 0)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  let f = String(ecart - longpointe - d / 8 - 2)\n  li.setAttribute('x1', f)\n  li.setAttribute('y1', -ep / 2)\n  li.setAttribute('x2', f)\n  li.setAttribute('y2', ep / 2)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  f = String(ecart - longpointe - d / 3 - 2)\n  li.setAttribute('x1', f)\n  li.setAttribute('y1', -ep / 2)\n  li.setAttribute('x2', f)\n  li.setAttribute('y2', ep / 2)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  // Les boutons vus en perspective\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', String(longpointe + d / 8 - 5))\n  rect.setAttribute('y', String(-ep))\n  rect.setAttribute('width', 8)\n  rect.setAttribute('height', 3)\n  rect.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  g.appendChild(rect)\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', String(ecart - longpointe - d / 8 - 4))\n  rect.setAttribute('y', String(-ep))\n  rect.setAttribute('width', 8)\n  rect.setAttribute('height', 3)\n  rect.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  g.appendChild(rect)\n\n  // Le dessus\n  const dl = 12 // Demi-largeur de la partie centrale grise\n  const dh = 4 // Demi-hauteur de la partie centrale grise\n  p = document.createElementNS(kernel.svgsn, 'path')\n  const path = 'M' + String(ecart / 2 + dl) + ' ' + String(-dh) + ' A ' + String(dl) +\n          ' 2 180 0 0 ' + String(ecart / 2 - dl) + ' ' + String(-dh) + 'A' +\n          String(dh) + ' 2 90 0 1 ' + String(ecart / 2 - dl) + ' ' + String(dh) + 'A' +\n          String(dl) + ' 2 0 0 0 ' + String(ecart / 2 + dl) + ' ' + String(dh) + 'A' +\n          String(dh) + ' 2 -90 0 1 ' + String(ecart / 2 + dl) + ' ' + String(-dh)\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1')\n  g.appendChild(p)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', String(ecart / 2 + dl))\n  li.setAttribute('y1', -ep / 2)\n  li.setAttribute('x2', String(ecart / 2 - dl))\n  li.setAttribute('y2', ep / 2)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', String(ecart / 2 - dl))\n  li.setAttribute('y1', -ep / 2)\n  li.setAttribute('x2', String(ecart / 2 + dl))\n  li.setAttribute('y2', ep / 2)\n  li.setAttribute('style', 'stroke: black; stroke-width:0.5;')\n  g.appendChild(li)\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', String(ecart / 2))\n  circ.setAttribute('cy', 0)\n  circ.setAttribute('r', 5)\n  circ.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1')\n  g.appendChild(circ)\n  // Les boutons vus en perspective\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', String(longpointe + d / 8 - 5))\n  rect.setAttribute('y', String(-ep))\n  rect.setAttribute('width', 7)\n  rect.setAttribute('height', 3)\n  rect.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  g.appendChild(rect)\n  rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', String(ecart - longpointe - d / 8 - 4))\n  rect.setAttribute('y', String(-ep))\n  rect.setAttribute('width', 7)\n  rect.setAttribute('height', 3)\n  rect.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1')\n  g.appendChild(rect)\n  this.g = g\n}\n/**\n * Fonction mettant le svg element reprÃ©sentant le compas levÃ© Ã  la position (x,y)\n * avec un angle avce l'horizontale Ã©gal Ã  angle\n * @param {type} x\n * @param {type} y\n * @param {type} angle\n */\nCompasLeve.prototype.setPosition = function (x, y, angle) {\n  this.x = x\n  this.y = y\n  this.angle = angle\n  this.g.setAttribute('transform', 'translate(' + x + ',' + y + ') rotate(' + angle + ')')\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = Crayon\n/**\n * Classe reprÃ©sentant le crayon de la figure.\n * (this.x,this.y) sont les coordonnÃ©es de la pointe de la mine\n * this.angle est l'angle du corps du crayon par rapport Ã  l'horizontale.\n * @constructor\n * @extends iep.instrumentAncetre\n * @param {iep.iepDoc} doc : le document propriÃ©taire de la figure\n */\nfunction Crayon (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.angle = this.angleInit()\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle)\n  doc.svg.appendChild(this.g)\n}\nCrayon.prototype = new InstrumentAncetre()\n\n/**\n * extends iep.instruementAncetre\n */\nCrayon.prototype.angleInit = function () {\n  return -40\n}\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant le crayon\n * dans le DOM du svg de la figure\n */\nCrayon.prototype.creeg = function () {\n  let g, defs, p, path, path1, lg, stop, circ\n  const lon = 97 // La longueur totale (sans le demi-cercle final)\n  const longpointe = 15 // La longueur de la mine\n  const demlarg = 4.5 // La demi-largeur du crayon\n  const longmine = 3\n  const demlargmine = longmine / longpointe * demlarg\n\n  g = document.createElementNS(kernel.svgsn, 'g')\n  // On crÃ©e un gradiant linÃ©aire pour la mine\n  // Il est nÃ©cessaire d'englober le gradient dans un defs pour pouvoir l'utiliser via url(#grad) plus tard\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  lg = document.createElementNS(kernel.svgsn, 'linearGradient')\n  lg.setAttribute('id', 'gradpointe')\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '0%')\n  stop.setAttribute('style', 'stop-color: #f00000;')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '50%')\n  stop.setAttribute('style', 'stop-color: #eeb444;')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '100%')\n  stop.setAttribute('style', 'stop-color: #f00000')\n  lg.appendChild(stop)\n  lg.setAttribute('x1', '0%')\n  lg.setAttribute('y1', '0%')\n  lg.setAttribute('x2', '0%')\n  lg.setAttribute('y2', '100%')\n  defs.appendChild(lg)\n  g.appendChild(defs)\n  // Un autre gradiant pour le corps du crayon\n  defs = document.createElementNS(kernel.svgsn, 'defs')\n  lg = document.createElementNS(kernel.svgsn, 'linearGradient')\n  lg.setAttribute('id', 'gradcorps')\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '0%')\n  stop.setAttribute('style', 'stop-color: #810216;')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '25%')\n  stop.setAttribute('style', 'stop-color: #c64f00;')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '50%')\n  stop.setAttribute('style', 'stop-color: #ab4a36')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '75%')\n  stop.setAttribute('style', 'stop-color: #c64f00;')\n  lg.appendChild(stop)\n  stop = document.createElementNS(kernel.svgsn, 'stop')\n  stop.setAttribute('offset', '100%')\n  stop.setAttribute('style', 'stop-colr: #810216;')\n  lg.appendChild(stop)\n  lg.setAttribute('x1', '0%')\n  lg.setAttribute('y1', '0%')\n  lg.setAttribute('x2', '0%')\n  lg.setAttribute('y2', '100%')\n  defs.appendChild(lg)\n  g.appendChild(defs)\n\n  // D'abord la mine\n  p = document.createElementNS(kernel.svgsn, 'path')\n  const rx = demlarg / 3\n  const ry = rx * 3 / 4\n  path1 = 'A' + rx + ' ' + ry + ' -90 0 0 ' +\n          longpointe + ' ' + String(rx) + 'A' + rx + ' ' + ry + ' -90 0 1 ' +\n          +longpointe + ' ' + String(-rx) + 'A' + rx + ' ' + ry + ' -90 0 0 ' +\n          +longpointe + ' ' + String(-demlarg)\n  path = 'M 0 0 L' + longpointe + ' ' + demlarg + path1 + 'Z'\n\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black; stroke-width:0.5; fill: url(#gradpointe); fill-opacity: 1;')\n  g.appendChild(p)\n  // La pointe noire\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M 0 0 L ' + longmine + ' ' + demlargmine + ' ' + longmine + ' ' +\n          String(-demlargmine) + 'Z'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black; stroke-width:0.5; fill: black; fill-opacity: 1;')\n  g.appendChild(p)\n  // Le corps du crayon\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M ' + longpointe + ' ' + demlarg + path1 + ' L ' + lon + ' ' + String(-demlarg) +\n          ' L ' + lon + ' ' + String(demlarg) + 'Z'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black; stroke-width:0.5; fill: url(#gradcorps); fill-opacity: 1;')\n  g.appendChild(p)\n  // Le cercle bleu du bout\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('r', demlarg)\n  circ.setAttribute('cx', lon)\n  circ.setAttribute('cy', 0)\n  circ.setAttribute('style', 'stroke:blue; stroke-width:0.5; fill: blue; fill-opacity: 1;')\n  g.appendChild(circ)\n  this.g = g\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = Equerre\n/**\n * Objet reprÃ©sentant l'Ã©querre de la figure.\n * @constructor\n * @extends iep.instrumentAncetre\n * (this.x,this.y)  sont les coordonnÃ©es du sommet de l'Ã©querre\n * this.angle est l'angle que fait l'Ã©querre avec l'horizontale.\n * @param {iep.iepDoc} doc : le document propriÃ©taire de la figure\n */\nfunction Equerre (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle)\n  doc.svg.appendChild(this.g)\n}\nEquerre.prototype = new InstrumentAncetre()\n/**\n * Fonction mettannt dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'Ã©querre\n * dans le DOM du svg qui contient la figure\n * @returns {g}\n */\nEquerre.prototype.creeg = function () {\n  let g, p, path, path2, text\n  const largeur = 131\n  const hauteur = 223\n  const largeurbas = 31\n  const largeurgauche = 24\n  const largeurint = 61\n  const hauteurint = largeurint * hauteur / largeur\n  const largeurbande = 16 // pour la partie plus claire en bas et Ã  gauche.\n  const h = hauteur / largeur * (largeur - largeurbande) // Hauteur basse de la partie plus claire\n  const l = largeur / hauteur * (hauteur - largeurbande)\n\n  g = document.createElementNS(kernel.svgsn, 'g')\n  // D'abord le pourtour\n  p = document.createElementNS(kernel.svgsn, 'path')\n  // Pourtour exterieur\n  path = 'M 0 0 L ' + largeur + ' 0 L 0 ' + String(-hauteur) + ' Z'\n  // Pourtout intÃ©rieur qui doit Ãªtre parcouru dans l'autre sens pour le remplissage\n  path2 = 'M ' + largeurgauche + ' ' + String(-largeurbas) + ' L ' + largeurgauche + ' ' +\n          String(-largeurbas - hauteurint) + ' L ' + String(largeurgauche + largeurint) +\n          ' ' + String(-largeurbas) + ' Z'\n  path += path2\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:black;stroke-width:0.75; fill: #c6cbe8; fill-opacity: 0.5')\n  g.appendChild(p)\n  // On repasse l'intÃ©rieur pour laisser une bande plus claire sur les cÃ´tÃ©s\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M ' + largeurbande + ' ' + String(-largeurbande) + ' L ' + l + ' ' +\n          String(-largeurbande) + ' L ' + largeurbande + ' ' + (-h) + ' Z'\n  path += path2\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke-width:0; fill: #c6cbe8; fill-opacity: 0.5')\n  g.appendChild(p)\n  // On rajoute le texte Sesamath dans la barre du bas\n  text = document.createElementNS(kernel.svgsn, 'text')\n  text.setAttribute('pointer-events', 'none')\n  text.appendChild(document.createTextNode('SÃ©samath'))\n  text.setAttribute('x', largeurgauche)\n  text.setAttribute('y', -largeurbande / 2 - 5)\n  text.setAttribute('style', 'font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon')\n  g.appendChild(text)\n  this.g = g\n  return g // Sert pour la rÃ¨gle Ã©querre\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst Vect = require('../types/vecteur')\nmodule.exports = InstrumentAncetre\n/**\n * Classe ancÃªtre de tous les instruments.\n * Contient deux membres this.x et this.y contenant les coordonnÃ©es de l'instrument\n * un membre this.angle contenant l'angle de l'instrument avec l'ohorizontale\n * et un membre this.zoomfactor contenant le facteur d'agrandissement de l'instrument.\n * @constructor\n * @param {iep.iepDoc} doc : le document contenant la figure et les instruments\n * @returns {undefined}\n */\nfunction InstrumentAncetre (doc) {\n  this.doc = doc\n  this.x = 200\n  this.y = 400\n  this.angle = 0 // Sera modifiÃ© au dÃ©part seulement pour le crayon\n  this.zoomfactor = 1\n  this.visible = false\n}\n/**\n * Fonction mettant l'instrument en position visible et montrant l'Ã©lement\n * graphique le reprÃ©sentant dans le DOM du svg de la figure\n * @param {boolean} bvisible\n */\nInstrumentAncetre.prototype.montre = function (bvisible) {\n  this.visible = bvisible\n  this.g.setAttribute('visibility', bvisible ? 'visible' : 'hidden')\n}\n/**\n * Fonction retirant du DOM du svg de la figure l'Ã©lÃ©ment graphique reprÃ©sentant\n * l'instrument, le recrÃ©ant et le rajoutant ensuite de faÃ§on que l'instrument\n * soit aprÃ¨s les Ã©lÃ©ments graphiques reprÃ©sentant les objets de la figure et ne\n * soit pas recouvert par eux.\n * @returns {undefined}\n */\nInstrumentAncetre.prototype.updateg = function () {\n  this.initialisePosition()\n  this.doc.svg.removeChild(this.g)\n  this.doc.svg.appendChild(this.g)\n}\n/**\n * Fonction amenant l'instruemnt aux coordonnÃ©es (x,y) sans changer l'angle\n * ni le rapport de zoom.\n * @param {type} x : La nouvelle abscisse\n * @param {type} y : La nouvelle ordonnÃ©e\n * @returns {undefined}\n */\nInstrumentAncetre.prototype.translate = function (x, y) {\n  this.setPosition(x, y, this.angle, this.zoomfactor)\n}\n/**\n * Fonction envoayan l'angle initial de l'instruement.\n * Sera redÃ©fini pour le crayon Ã  -40Â°\n * @returns {Number}\n */\nInstrumentAncetre.prototype.angleInit = function () {\n  return 0\n}\n/**\n * Fonction modifiant la position relative du g element reprÃ©sentant l'instrument\n * dans le svg de la figure pour qu'i soit Ã  la bonne position, bon angle et bon zoom\n * Sera redÃ©fini pour le compas et le compas levÃ©.\n * @param {type} x\n * @param {type} y\n * @param {type} angle\n * @param {type} zoomfactor\n */\nInstrumentAncetre.prototype.setPosition = function (x, y, angle, zoomfactor) {\n  let zoom\n  this.x = x\n  this.y = y\n  this.angle = angle\n  if (arguments.length >= 4) {\n    zoom = zoomfactor\n    this.zoomfactor = zoom\n  } else zoom = this.zoomfactor\n  this.g.setAttribute('transform', 'scale(' + zoom + ') translate(' +\n    String(x / zoom) + ',' + String(y / zoom) + ') rotate(' + angle + ')')\n}\n/**\n * Fonction initialisant la position de l'instrument\n */\nInstrumentAncetre.prototype.initialisePosition = function () {\n  this.setPosition(200, 400, this.angleInit(), 1)\n}\n/**\n * Fonction lanÃ§ant une animation de l'instrument par translation\n * @param {Float} xfin : l'abscisse de l'instrument Ã  la fin de la translation\n * @param {Float} yfin : l'ordonnÃ©e de l'instrument Ã  la fin de la translation\n * @param {Float} pix : Le nombre de pixels de la translation Ã  chaque dixiÃ¨me de seconde\n */\nInstrumentAncetre.prototype.lanceAnimationTranslation = function (xfin, yfin, pix10) {\n  this.xfin = xfin\n  this.yfin = yfin\n  this.pix = Math.abs(pix10 / 2) // Dans la version JavaScript on quadruple la frÃ©quence\n  // en divisant le pas par 4\n  // (en fait on corrige par car la rapiditÃ© semble double de celle annoncÃ©e dans le mode d'emploi)\n  const v = new Vect(this.x, this.y, xfin, yfin)\n  this.dist = v.norme() // La distance entre la position actuelle et la position finale\n  if (this.dist === 0) {\n    this.doc.actionSuivante()\n    return\n  }\n  this.vect = v.vecteurColineaire(this.pix)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourTranslation() }, 25)\n}\n// On poursuit l'animation tant que la distance entre la position actuelle et la psoition de fin\n// est infÃ©rieure Ã  la distance prÃ©cÃ©dente\n/**\n * Fonction appelÃ©e par un timer lors de l'animation de translation de l'instrument\n */\nInstrumentAncetre.prototype.actionPourTranslation = function () {\n  const x = this.x + this.vect.x\n  const y = this.y + this.vect.y\n  const u = new Vect(x, y, this.xfin, this.yfin)\n  const d = u.norme()\n  if ((d > this.dist) || !this.doc.animationEnCours) {\n    this.setPosition(this.xfin, this.yfin, this.angle)\n    if (this === this.doc.compas) {\n      if ((this.doc.compasLeve != null) && (this.doc.compasLeve.visible)) { this.doc.compasLeve.setPosition(this.xfin, this.yfin, this.angle) }\n    }\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.dist = d\n    this.setPosition(x, y, this.angle)\n    if (this === this.doc.compas) {\n      if ((this.doc.compasLeve != null) && (this.doc.compasLeve.visible)) { this.doc.compasLeve.setPosition(x, y, this.angle) }\n    }\n  }\n}\n/**\n * Fonction lanÃ§ant une animation de l'instrument par rotation\n * @param {Float} l'angle de fin de l'objet avec l'horizontale aprÃ¨s la rotation\n * @param {Integer} deg10 : le nombre de degrÃ©s dont on tounre Ã  chaque\n * dixiÃ¨me de seconde\n */\nInstrumentAncetre.prototype.lanceAnimationRotation = function (angfin, deg10) {\n  // Il faut choisir le dÃ©placement \"le plus court\"\n  const ang1 = kernel.mesurePrincDeg(this.angle)\n  let ang2 = kernel.mesurePrincDeg(angfin)\n  if (Math.abs(ang2 - ang1) > 180) {\n    if (ang2 > ang1) ang2 = ang2 - 360\n    else ang2 = ang2 + 360\n  }\n  this.anglefin = ang2\n  this.angle = ang1\n  // Contraiement Ã  ce qui est dit dans la doc d'instrumenpoche il semble que le pas par dÃ©faut soit de 16 Â°\n  // et mÃªme un peu plus\n  this.pasdeg = deg10 / 3 // Dans la version JavaScript on quadruple la frÃ©quence\n  // En divisant le pas par 4\n  // Mais en fait par deux pour compatibilitÃ© observÃ©e\n  this.pasdeg *= (ang2 >= ang1) ? 1 : -1 // 1 pour le sens direct svg;\n  this.distang = Math.abs(ang2 - this.angle)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourRotation() }, 25)\n}\n/**\n * Fonction appelÃ©e par un timer lors de l'animation de rotation de l'instrument\n */\nInstrumentAncetre.prototype.actionPourRotation = function () {\n  const ang = parseFloat(this.angle) + parseFloat(this.pasdeg)\n  const dis = Math.abs(ang - this.anglefin)\n  if ((dis > this.distang) || !this.doc.animationEnCours) {\n    this.setPosition(this.x, this.y, this.anglefin)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.distang = dis\n    this.setPosition(this.x, this.y, ang)\n  }\n}\n/**\n * Fonction lanÃ§ant une animation de l'instrument par zoom\n * @param {Integer} zoomfin : le zoom final quand l'animation est finie\n * @param {Float} vitesse : paramÃ¨tre reprÃ©sentant la vitesse d'animation\n */\nInstrumentAncetre.prototype.lanceAnimationZoom = function (zoomfin, vitesse) {\n  this.zoomfin = zoomfin\n  this.vitesse = parseInt(vitesse)\n  this.pas = this.vitesse * 0.05 * (this.zoomfin - this.zoomfactor) // On augmente\n  // par dÃ©faut de 5% de vitesse tous les dixiÃ¨mes de seconde\n  this.senspos = (this.pas >= 0)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourZoom() }, 100)\n}\n/**\n * Fonction appelÃ©e par un timer lors de l'animation de zoom de l'instrument\n */\nInstrumentAncetre.prototype.actionPourZoom = function () {\n  const z = this.zoomfactor + this.pas\n  if (this.doc.animationEnCours && ((this.senspos && (z < this.zoomfin)) || (!this.senspos && (z > this.zoomfin)))) { this.setPosition(this.x, this.y, this.angle, z) } else {\n    this.zoomfactor = this.zoomfin\n    this.positionne()\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  }\n}\n/**\n * Fonction recalculant l'Ã©lÃ©ment graphique reprÃ©sentant l'instrument et\n * remettant son Ã©lÃ©ment grapique en accord avec cette position\n */\nInstrumentAncetre.prototype.positionne = function () {\n  this.setPosition(this.x, this.y, this.angle, this.zoomfactor)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = Rapporteur\n/**\n * @constructor\n * @extends iep.instrumentAncetre\n * Classe reprÃ©sentant le rapporteur de la figure.\n * @param {type} doc\n */\nfunction Rapporteur (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.graduationExterneVisible = true\n  this.graduationInterneVisible = true\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle)\n  doc.svg.appendChild(this.g)\n}\nRapporteur.prototype = new InstrumentAncetre()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant le rapporteur dans\n * le DOM du svg de la figure\n */\nRapporteur.prototype.creeg = function () {\n  let path, p, g, li, i, text, circ\n  const hauteurPolice = 10\n  const hauteurPoliceInterne = 9\n  const largeurBarre = '13'\n  const ray = 156\n  const rayon = String(ray) // Le rayon extÃ©rieur\n  const rayInt = 89\n  const rayonInt = String(rayInt) // Le rayon intÃ©rieur\n  const raytraitint = '116' // Le rayon du trait interne\n  const rayonMire = '7'\n  g = document.createElementNS(kernel.svgsn, 'g')\n  p = document.createElementNS(kernel.svgsn, 'path')\n  // Le pourtour\n  path = 'M ' + rayon + ' 0 A ' + rayon + ' ' + rayon + ' 0 0 0 -' + rayon + ' 0 L ' +\n          '-' + rayon + ' ' + largeurBarre + ' L ' + rayon + ' ' + largeurBarre +\n          ' L ' + rayon + ' 0'\n  // L'intÃ©rieur qui doit Ãªtre tacÃ© dans l'autre sens\n  path += 'M 0 0 L -' + rayonInt + ' 0 A ' + rayonInt + ' ' + rayonInt + ' 0 0 1 ' +\n          rayonInt + ' 0 Z'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke:#999999;stroke-width:1; fill: #c6cbe8; fill-opacity: 0.5')\n  g.appendChild(p)\n  // La mire\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M ' + rayonMire + ' 0 A ' + rayonMire + ' ' + rayonMire + ' 0 0 0 ' +\n          '-' + rayonMire + ' 0 M 0 0 L 0 -' + rayonMire\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke: #666666;stroke-width:1; fill: none')\n  g.appendChild(p)\n  // Les graduations externes\n  for (i = 0; i <= 180; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('x1', rayon)\n    li.setAttribute('y1', 0)\n    li.setAttribute('x2', i % 10 === 0 ? ray - 20 : (i % 5 === 0 ? ray - 10 : ray - 5))\n    li.setAttribute('y2', 0)\n    li.setAttribute('transform', 'rotate(-' + i + ')')\n    li.setAttribute('style', 'stroke: #333333;stroke-width:0.7;')\n    g.appendChild(li)\n  }\n  // Les nombres de la graduation externe\n  this.gradext = document.createElementNS(kernel.svgsn, 'g')\n  for (i = 0; i <= 180; i++) {\n    if (i % 10 === 0) {\n      text = document.createElementNS(kernel.svgsn, 'text')\n      text.setAttribute('pointer-events', 'none')\n      text.appendChild(document.createTextNode(i))\n      text.setAttribute('x', 0)\n      text.setAttribute('y', 0)\n      text.setAttribute('style', 'font-family: arial;font-size: ' + hauteurPolice +\n              'px;text-anchor: middle; fill: black')\n      text.setAttribute('transform', ' scale(-1) rotate(' + String(-i - 90) + ') translate(0,' +\n              String(-ray + 22 + hauteurPolice) + ')')\n      this.gradext.appendChild(text)\n    }\n  }\n  g.appendChild(this.gradext)\n  // On rajoute le trait interne sÃ©parat les graduatiosn externes et internes\n  const dep = ray - 26 - hauteurPolice\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M ' + String(dep) + ' 0 L ' + raytraitint + ' 0 A ' +\n          raytraitint + ' ' + raytraitint + ' 0 0 0 -' + raytraitint + ' 0 L ' +\n          String(-dep) + ' 0'\n  p.setAttribute('d', path)\n  p.setAttribute('style', 'stroke: #666666;stroke-width:1; fill: none')\n  g.appendChild(p)\n  // On rajoute les graduatiions internes\n  for (i = 0; i <= 18; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('x1', rayInt)\n    li.setAttribute('y1', 0)\n    li.setAttribute('x2', rayInt + 10)\n    li.setAttribute('y2', 0)\n    li.setAttribute('transform', 'rotate(-' + String(10 * i) + ')')\n    li.setAttribute('style', 'stroke: #333333;stroke-width:0.7;')\n    g.appendChild(li)\n  }\n  // Les nombres de la graduation interne\n  this.gradint = document.createElementNS(kernel.svgsn, 'g')\n  for (i = 0; i <= 18; i++) {\n    text = document.createElementNS(kernel.svgsn, 'text')\n    text.setAttribute('pointer-events', 'none')\n    text.appendChild(document.createTextNode(180 - 10 * i))\n    text.setAttribute('x', 0)\n    text.setAttribute('y', 0)\n    text.setAttribute('style', 'font-family: arial;font-size: ' + hauteurPoliceInterne +\n              'px;text-anchor: middle; fill: black')\n    text.setAttribute('transform', 'scale(-1) rotate(' + String(-10 * i - 90) + ') translate(0,' +\n              String(-rayInt - 14) + ')')\n    // text.setAttribute(\"transform\", \"rotate(\" + String(-10*i+1) + \")\");\n    this.gradint.appendChild(text)\n  }\n  g.appendChild(this.gradint)\n  // On matÃ©rialise le centre par un petit rond (n'existait pas).\n  circ = document.createElementNS(kernel.svgsn, 'circle')\n  circ.setAttribute('cx', 0)\n  circ.setAttribute('cy', 0)\n  circ.setAttribute('r', 2)\n  circ.setAttribute('style', 'stroke: black; stroke-width: 1;fill: none')\n  g.appendChild(circ)\n  // On rajoute le texte Sesamath dans la barre du bas\n  text = document.createElementNS(kernel.svgsn, 'text')\n  text.setAttribute('pointer-events', 'none')\n  text.appendChild(document.createTextNode('SÃ©samath'))\n  text.setAttribute('x', 0)\n  text.setAttribute('y', largeurBarre - 2)\n  text.setAttribute('style', 'font-family: sans-serif;font-size: 7pt;font-weight:bold;text-anchor: middle; fill: maroon')\n  g.appendChild(text)\n  this.g = g\n}\n/**\n * Fonction montrant ou affichant les nombres de la graduation externe\n * @param {type} bvisible : Nombres affichÃ©s si true\n */\nRapporteur.prototype.montreGraduations = function (bvisible) {\n  this.graduationInterneVisible = true\n  if (this.visible) this.gradint.setAttribute('visibility', bvisible ? 'visible' : 'hidden')\n}\n/**\n * Fonction montrant ou affichant les nombres de la graduation interne du rapporteur\n * @param {type} bvisible : : Nombres affichÃ©s si true\n */\nRapporteur.prototype.montreGraduationsExternes = function (bvisible) {\n  this.graduationExterneVisible = true\n  if (this.visible) this.gradext.setAttribute('visibility', bvisible ? 'visible' : 'hidden')\n}\n/**\n * Fonction mettant le rapporteur en position visible ou cachÃ© suivant la\n * valeur de bvisible\n * @param {boolean} bvisible\n */\nRapporteur.prototype.montre = function (bvisible) {\n  InstrumentAncetre.prototype.montre.call(this, bvisible)\n  if (bvisible) {\n    this.gradint.setAttribute('visibility', this.graduationInterneVisible ? 'visible' : 'hidden')\n    this.gradext.setAttribute('visibility', this.graduationExterneVisible ? 'visible' : 'hidden')\n  } else {\n    this.gradint.setAttribute('visibility', 'hidden')\n    this.gradext.setAttribute('visibility', 'hidden')\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nmodule.exports = Regle\n/**\n * @constructor\n * @extends iep.instrumentAncetre\n * Classe reprÃ©sentant la rÃ¨gle de la figure\n * @param {iep.iepDoc} doc : le document propriÃ©taire de la figure\n */\nfunction Regle (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.x = 100\n  this.y = 400\n  this.angle = 0\n  this.longueur = 15 // Longueur en cm. Peut Ãªtre modifier par actionModifierLongueur\n  // 30 pixels par cm\n  this.graduationVisible = true\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle)\n  doc.svg.appendChild(this.g)\n}\nRegle.prototype = new InstrumentAncetre()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant la rÃ¨gle\n * dans le DOM du svg de la figure\n */\nRegle.prototype.creeg = function () {\n  let li, text\n  const hauteurPolice = 9\n  const longint = this.longueur * 30 + 15\n  const larg = 57\n  const largeur = String(larg)\n  const ray = 6 // Rayon de courbure des coins\n  const rayon = String(ray)\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  const rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('x', -rayon - 1)\n  rect.setAttribute('y', 0)\n  rect.setAttribute('width', String(longint + ray + 1))\n  rect.setAttribute('height', largeur)\n  rect.setAttribute('rx', rayon)\n  rect.setAttribute('ry', rayon)\n  rect.setAttribute('style', 'stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5;')\n  g.appendChild(rect)\n  const line = document.createElementNS(kernel.svgsn, 'line')\n  line.setAttribute('x1', -rayon)\n  line.setAttribute('y1', 27)\n  line.setAttribute('x2', longint)\n  line.setAttribute('y2', 27)\n  line.setAttribute('style', 'stroke:#999999;stroke-width:2;')\n  g.appendChild(line)\n  // On crÃ©e les graduations\n  this.graduations = document.createElementNS(kernel.svgsn, 'g')\n  for (let i = 0; i <= this.longueur * 10; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    const x = 3 * i\n    li.setAttribute('x1', x)\n    li.setAttribute('y1', 0)\n    li.setAttribute('x2', x)\n    li.setAttribute('y2', i % 10 === 0 ? 12 : (i % 5 === 0 ? 9 : 6))\n    if (i % 10 === 0) {\n      text = document.createElementNS(kernel.svgsn, 'text')\n      text.setAttribute('pointer-events', 'none')\n      text.appendChild(document.createTextNode(String(i / 10)))\n      text.setAttribute('x', x)\n      text.setAttribute('y', 12 + hauteurPolice)\n      text.setAttribute('style', 'font-family: monospace;font-size: ' + hauteurPolice + 'pt;text-anchor:middle')\n      this.graduations.appendChild(text)\n    }\n    li.setAttribute('style', 'stroke:black;stroke-width:0.7;')\n    this.graduations.appendChild(li)\n  }\n  // On rajoute le texte Sesamath\n  text = document.createElementNS(kernel.svgsn, 'text')\n  text.setAttribute('pointer-events', 'none')\n  text.appendChild(document.createTextNode('SÃ©samath'))\n  text.setAttribute('x', longint / 2 - ray - 3)\n  text.setAttribute('y', largeur - 5)\n  text.setAttribute('style', 'font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon;text-anchor:middle;')\n  g.appendChild(text)\n  g.appendChild(this.graduations)\n  this.g = g\n}\n/**\n * Fonction mettant les graduations de la rÃ¨gle en mode visible\n * et les endnt visibles dans le svg si l'instrument y est visible\n * @param {boolean} bvisible\n */\nRegle.prototype.montreGraduations = function (bvisible) {\n  this.graduationVisible = bvisible\n  this.graduations.setAttribute('visibility', this.visible ? (bvisible ? 'visible' : 'hidden') : 'hidden')\n}\n/**\n * Fonction montrant la rÃ©gle ou la cachant suivant la valeur de bvisible\n * @param {type} bvisible\n */\nRegle.prototype.montre = function (bvisible) {\n  InstrumentAncetre.prototype.montre.call(this, bvisible)\n  if (bvisible) { this.graduations.setAttribute('visibility', this.graduationVisible ? 'visble' : 'hidden') } else {\n    this.graduations.setAttribute('visibility', 'hidden')\n  }\n}\n/**\n * Fonction initialisant la position de la rÃ¨gle.\n * Si la longueur de la rÃ¨gle a Ã©tÃ© modifiÃ©e il faut la rÃ©initialiser\n */\nRegle.prototype.initialisePosition = function () {\n  if (this.longueur !== 15) {\n    this.longueur = 15\n    const vis = this.visible\n    const oldg = this.g\n    this.creeg()\n    this.g.setAttribute('visibility', vis ? 'visible' : 'hidden')\n    this.doc.svg.replaceChild(this.g, oldg)\n  }\n  InstrumentAncetre.prototype.initialisePosition.call(this)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst InstrumentAncetre = require('./instrumentAncetre')\nconst Equerre = require('../instruments/equerre')\nmodule.exports = Requerre\n/**\n * @constructor\n * @extends iep.instrumentAncetre\n * Classe reprÃ©sentant la rÃ©gle-equerre dans la figure InstrumenPoche\n * @param {iep.iepDo} doc : le document propriÃ©taire de la figure\n */\nfunction Requerre (doc) {\n  InstrumentAncetre.call(this, doc)\n  this.x = 200\n  this.y = 400\n  this.angle = 0\n  this.zoomfactor = 1\n  this.abscisse = 0 // L'abscisse au coin de l'Ã©querre sur la rÃ¨gle\n  this.creeg()\n  this.g.setAttribute('visibility', 'hidden')\n  this.setPosition(this.x, this.y, this.angle)\n  doc.svg.appendChild(this.g)\n}\nRequerre.prototype = new InstrumentAncetre()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant la rÃ¨gle-Ã©querre\n * dans le DOM du svg de la figure\n */\nRequerre.prototype.creeg = function () {\n  let g, p, path, pathtrou, line\n  const longd = 172 // Longueur de la partie droite Ã  partir de l'origine\n  const longg = 256 // Longueur de la partie gauche Ã  partir de l'origine\n  const larg = 57 // La largeur\n  const ray = 5 // Rayon de courbure des coins\n  const largeurbande = 16 // Largeur des bandes plus claires\n  const dectroud = 20\n  const dectroub = 15\n  const raytrou = 6\n  const style = 'stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5'\n\n  // Ici on ne peut pas faire un rectangle aux bords arrondis si on veut le petit cercle\n  // ajourÃ© en bas et Ã  droite\n\n  g = document.createElementNS(kernel.svgsn, 'g')\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M 0 0 L ' + String(longd - ray) + ' 0 A ' +\n          ray + ' ' + ray + ' 0 0 1 ' + String(longd) + ' ' + ray +\n          ' L ' + String(longd) + ' ' + String(larg - ray) + ' A ' +\n          ray + ' ' + ray + ' 90 0 1 ' + String(longd - ray) + ' ' + String(larg) +\n          ' L ' + String(-longg + ray) + ' ' + larg + ' A ' + ray + ' ' + ray + ' 180 0 1 ' + '-' + longg + ' ' +\n          String(larg - ray) + ' L ' + String(-longg) + ' ' + ray + ' A ' + ray + ' ' + ray +\n          ' -90 0 1 ' + String(-longg + ray) + ' 0Z'\n  // On rajoute le trou parcouru dans le sens inverse pour qu'il ne soit pas rempli\n  // ForcÃ©ment deux demi-cercles. Un cercle entier ne semble pas possible.\n  const ytrou = larg - dectroub\n  pathtrou = 'M' + String(longd - dectroud + raytrou) + ' ' + ytrou + 'A ' +\n          raytrou + ' ' + raytrou + ' 180 0 0 ' + String(longd - dectroud - raytrou) + ' ' + String(ytrou) +\n          'A ' + raytrou + ' ' + raytrou + ' 180 0 0 ' + String(longd - dectroud + raytrou) + ' ' + String(ytrou)\n\n  path += pathtrou\n  p.setAttribute('d', path)\n  p.setAttribute('style', style)\n  g.appendChild(p)\n  // On rajoute l'intÃ©rieur pour les bords soient plus clairs\n  p = document.createElementNS(kernel.svgsn, 'path')\n  path = 'M' + String(longd) + ' ' + String(largeurbande) + 'L' +\n          String(longd) + ' ' + String(larg - ray) + ' A ' +\n          ray + ' ' + ray + ' 90 0 1 ' + String(longd - ray) + ' ' + String(larg) +\n          ' L ' + String(-longg + ray) + ' ' + larg + ' A ' + ray + ' ' + ray + ' 180 0 1 ' + '-' + longg + ' ' +\n          String(larg - ray) + ' L ' + String(-longg) + ' ' + String(largeurbande) + 'Z' + pathtrou\n  p.setAttribute('d', path)\n  p.setAttribute('style', style)\n  g.appendChild(p)\n  // Un trait de rappel pour l'origine\n  line = document.createElementNS(kernel.svgsn, 'line')\n  line.setAttribute('x1', 0)\n  line.setAttribute('y1', 8)\n  line.setAttribute('x2', 0)\n  line.setAttribute('y2', 0)\n  line.setAttribute('style', 'stroke: black')\n  g.appendChild(line)\n  this.gequerre = new Equerre.prototype.creeg()\n  this.gequerre.setAttribute('transform', 'scale(0.7)')\n  g.appendChild(this.gequerre)\n  this.setAbs(this.abscisse)\n  this.g = g\n}\n/**\n * Fonction faisant glisser l'Ã©querre sur la rÃ¨gle jusqu'Ã  l'abscisse abs\n * L'abscisse 0 est reprÃ©sentÃ©e par le petit trait sur la rÃ¨gle\n * @param {type} abs\n */\nRequerre.prototype.setAbs = function (abs) {\n  this.abscisse = abs\n  this.gequerre.setAttribute('transform', 'translate(' + abs + ',0)')\n}\n/**\n * Fonction lanÃ§ant une animation de glissement de l'Ã©querre sur la rÃ¨gle\n * La rÃ¨gle Ã©querre est le seul instrument Ã  voir un mouvement autre que translation et rotation : Le glissement.\n * @param {Float} absfin : l'abscisse de l'Ã©querre Ã  la fin du glissement\n * @param {Float} pix10 : le nombre de pixels dont gilsse l'Ã©querre\n * Ã  chaque dixiÃ¨me de seconde.\n */\nRequerre.prototype.lanceAnimationGlissement = function (absfin, pix10) {\n  this.absfin = absfin\n  this.pix = (absfin >= this.abscisse) ? pix10 / 4 : -pix10 / 4 // Dans la version JavaScript on quadruple la frÃ©quence\n  this.dist = Math.abs(absfin - this.abscisse)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourGlissement() }, 25)\n}\n/**\n * Fonction appelÃ©e par un timer lors de l'aniamtion de glissement de l'Ã©querre\n * sur la rÃ¨gle\n */\nRequerre.prototype.actionPourGlissement = function () {\n  const abs = this.abscisse + this.pix\n  const dis = Math.abs(this.absfin - abs)\n  if ((dis > this.dist) || !this.doc.animationEnCours) {\n    this.setAbs(this.absfin)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.dist = dis\n    this.setAbs(abs)\n  }\n}\n","/**\n * This file is part of Instrumenpoche.\n *   Copyright 2014-2015, Association SÃ©samath\n *\n * Instrumenpoche is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License version 3\n * as published by the Free Software Foundation.\n *\n * Instrumenpoche is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with SesaReactComponent (LICENCE.txt).\n * @see http://www.gnu.org/licenses/agpl.txt\n *\n *\n * Ce fichier fait partie de SesaReactComponent, crÃ©Ã©e par l'association SÃ©samath.\n *\n * Instrumenpoche est un logiciel libre ; vous pouvez le redistribuer ou le modifier suivant\n * les termes de la GNU Affero General Public License version 3 telle que publiÃ©e par la\n * Free Software Foundation.\n * Instrumenpoche est distribuÃ© dans l'espoir qu'il sera utile, mais SANS AUCUNE GARANTIE,\n * sans mÃªme la garantie tacite de QUALITÃ‰ MARCHANDE ou d'ADÃ‰QUATION Ã  UN BUT PARTICULIER.\n * Consultez la GNU Affero General Public License pour plus de dÃ©tails.\n * Vous devez avoir reÃ§u une copie de la GNU General Public License en mÃªme temps que SesaQcm\n * (cf LICENCE.txt et http://vvlibri.org/fr/Analyse/gnu-affero-general-public-license-v3-analyse\n * pour une explication en franÃ§ais)\n */\n'use strict'\n/* eslint-env browser */\nconst { addJs } = require('sesajstools/dom')\n\nconst mathJaxUrl = 'https://www.mathgraph32.org/js/MathJax/MathJax.js?config=TeX-AMS-MML_SVG-full'\nconst configCode = `MathJax.Hub.Config({\n  tex2jax: {\n    inlineMath: [['$', '$'],['\\\\\\\\(', '\\\\\\\\)']]\n  },\n  jax: ['input/TeX','output/SVG'],\n  TeX: {extensions: ['color.js']},\n  messageStyle:'none'\n});`\n// en s\nconst loadDelay = 10\n\n// La 1re promesse de chargement qui sera crÃ©Ã©e, puis renvoyÃ©e lors de tous les appels\n// (Ã§a permet de ne lancer qu'un seul chargement mÃªme en cas d'appels multiples avant que MathJax ne soit complÃ¨tement chargÃ©)\nlet firstLoadingPromise\n\n/**\n * Charge mathjax dans le <head> de la page courante\n * (appelÃ© par le prepare de ActionEcrireTexte et ActionNommerPoint,\n * donc dÃ©clenche le chargement dÃ¨s que le tableau des actions est construit,\n * seulement si l'une des actions a besoin de Mathjax)\n * @private\n * @return {Promise}\n */\nmodule.exports = function mathjaxLoader () {\n  // Au 1er appel on charge MathJax\n  if (!firstLoadingPromise) {\n    if (typeof MathJax === 'undefined') {\n      // faut le charger\n      firstLoadingPromise = new Promise((resolve, reject) => {\n        const head = window.document.getElementsByTagName('head')[0]\n        // la config\n        const eltConfig = window.document.createElement('script')\n        eltConfig.type = 'text/x-mathjax-config'\n        eltConfig.appendChild(window.document.createTextNode(configCode))\n        head.appendChild(eltConfig)\n        // load du js\n        addJs(mathJaxUrl, () => {\n          clearTimeout(timeout)\n          resolve()\n        })\n        // on ajoute un timeout de chargement\n        const timeout = setTimeout(() => {\n          // on reset pour que le prochain appel relance un chargement\n          firstLoadingPromise = null\n          reject(Error(`Mathjax non chargÃ© aprÃ¨s ${loadDelay}s dâ€™attente`))\n        }, loadDelay * 1000)\n      })\n    } else {\n      // on avait dÃ©jÃ  chargÃ© MathJax avant le 1er appel de cette fct, on le garde\n      console.log('MathJax Ã©tait dÃ©jÃ  chargÃ©, on ne fait rien')\n      firstLoadingPromise = Promise.resolve()\n    }\n  }\n  return firstLoadingPromise\n}\n","/*\r\n * Visualiseur InstrumenPoche en Javascript et SVG\r\n * @Author Yves Biton (yves.biton@sesamath.net)\r\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\r\n * Attention : Ne pas appeler cet objet Imag car entre en conflit avec l'objet Imag du JS\r\n */\r\nconst kernel = require('../global/global')\r\nconst ObjetBase = require('./objetBase')\r\nconst ActionCreation = require('../actions/actionCreation')\r\nmodule.exports = Imag\r\n/**\r\n * Classe reprÃ©sentant une image incluse dans la figure InstrumenPoche\r\n * @extends iep.objetBase\r\n * @constructor\r\n * @param {iep.iepDoc} doc : le document propriÃ©taire\r\n * @param {string} id : id de l'objet crÃ©Ã© dans le fichier XML de la figure\r\n * @param {string} url : l'url de la figure\r\n */\r\nfunction Imag (doc, id, url) {\r\n  this.doc = doc\r\n  this.id = id\r\n  this.url = url\r\n  this.x = 0\r\n  this.y = 0\r\n  this.angle = 0\r\n  this.objet = 'image'\r\n  this.zoomfactor = 1\r\n}\r\nImag.prototype = new ObjetBase()\r\n/** @inheritDoc */\r\nImag.prototype.initialisePosition = function () {\r\n  this.x = 0\r\n  this.y = 0\r\n  this.angle = 0\r\n  this.zoomfactor = 1\r\n  this.positionne()\r\n}\r\n/**\r\n * Fonction appelÃ©e dans iepDoc.creeActions\r\n * crÃ©e une image avec l'url url de faÃ§on Ã  rÃ©cupÃ©rer ses dimensions\r\n * Lorsque l'image est chargÃ©e, une fonction de callBack crÃ©e l'Ã©lÃ©ment graphique\r\n * image dans le DOM du svg contenant la igure\r\n */\r\nImag.prototype.prepareAction = function () {\r\n  const img = new Image()\r\n  img.owner = this\r\n  this.action = new ActionCreation(this.doc, this.id, this)\r\n  this.action.isReady = false\r\n  this.doc.ajouteAction(this.action)\r\n  img.onload = function () {\r\n    const own = this.owner\r\n    own.width = this.width\r\n    own.height = this.height\r\n    own.action.isReady = true\r\n    // own.doc.waitForReadyState();\r\n  }\r\n  img.src = this.url // Provoque le chargement de l'image\r\n}\r\n/**\r\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique svg reprÃ©sentant l'objet dans\r\n * le DOM du svg de la figure\r\n */\r\nImag.prototype.creeg = function () {\r\n  const image = document.createElementNS(kernel.svgsn, 'image')\r\n  image.setAttribute('width', this.width)\r\n  image.setAttribute('height', this.height)\r\n  image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', this.url)\r\n  image.setAttribute('x', this.x)\r\n  image.setAttribute('y', this.y)\r\n  image.setAttribute('visibility', 'hidden')\r\n  this.g = image\r\n  // image.setAttribute(\"id\",this.id);\r\n  this.setPosition(this.x, this.y, this.angle, this.zoomfactor)\r\n  this.doc.svg.appendChild(image)\r\n}\r\n/**\r\n * Fonction mettant l'image aux coordonnÃ©es (x,y) avec un angle angle et\r\n * un coefficient de zoom zoomfactor et modifiant la position du svg element qui\r\n * le reprÃ©sente dans le DOM du svg.\r\n * @param {float} x\r\n * @param {float} y\r\n * @param {float} angle\r\n * @param {integer} zoomfactor\r\n * @returns {undefined}\r\n */\r\n\r\nImag.prototype.setPosition = function (x, y, angle, zoomfactor) {\r\n  this.x = x\r\n  this.y = y\r\n  this.angle = angle\r\n  this.zoomfactor = zoomfactor\r\n  this.g.setAttribute('transform', 'scale(' + zoomfactor + ') translate(' +\r\n    String(x / zoomfactor) + ',' + String(y / zoomfactor) + ') rotate(' + angle + ')')\r\n}\r\n/**\r\n * Fonction mettant Ã  jour l'Ã©lÃ©ment graphique image dans le DOM du svg de la figure\r\n */\r\nImag.prototype.positionne = function () {\r\n  this.setPosition(this.x, this.y, this.angle, this.zoomfactor)\r\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nconst Vect = require('../types/vecteur')\nmodule.exports = Angle\n/**\n * Classe reprÃ©sentant une marque d'angle sur la figure\n * @extends iep.objetBase\n * @constructor\n * @param {Float} x  : abscisse du centre\n * @param {Float} y : ordonnÃ©e du centre\n * @param {Float} ray : le rayon\n * @param {Float} ang1 : angle de dÃ©part (en degrÃ©s)\n * @param {Float} ang2 : angle de fin (en degrÃ©s)\n * @param {string} couleur : la couleur\n * @param {string} epaisseur : Ã©paisseur du trait\n * @param {string} opacite : chaine de caractÃ¨re pour l'opacitÃ© (0 Ã  100)\n * @param {string} motif ; chaÃ®ne de caractÃ¨res. Si elle commence par plein la marque doit Ãªtre remplie.\n * Si elle finit par un, deux ou trois slashes, elle a des traits de marque\n * d'angle (autant que de /)\n */\nfunction Angle (doc, id, x, y, ray, ang1, ang2, couleur, epaisseur, opacite, motif) {\n  this.x = parseFloat(x)\n  this.y = parseFloat(y)\n  this.ray = parseFloat(ray)\n  this.ang1 = parseFloat(ang1)\n  this.ang2 = parseFloat(ang2)\n  this.motif = (motif == null) ? 'simple' : motif\n  // Pas d'opacitÃ© pour le trait\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, 1)\n  this.opaciteRemplissage = (opacite == null) ? 0.7 : parseFloat(opacite) / 100\n  this.objet = 'angle'\n}\nAngle.prototype = new ObjetLigne()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nAngle.prototype.creeg = function () {\n  let direct, path, line, v2, xc1, yc1, xmilieu, ymilieu, ang2, ang3\n  const demilong = 5 // Demi-longueur des traits de marque\n  const motif = this.motif\n  const ray = this.ray\n  const a1 = this.ang1\n  const a2 = this.ang2\n  const d = a2 - a1\n  const ang = kernel.mesurePrincDeg(d)\n  // var direct = (ang>0) && !iep.zeroAngle(d+180); // Direct dans le sens du repÃ¨re du svg\n  if (kernel.zeroAngle(Math.abs(d) - 180)) direct = (this.ang1 <= this.ang2)\n  else direct = ang > 0\n  const u1 = (new Vect(this.x, this.y, this.x + Math.cos(a1 * kernel.convDegRad), this.y + Math.sin(a1 * kernel.convDegRad)))\n    .vecteurColineaire(ray)\n  const u2 = (new Vect(this.x, this.y, this.x + Math.cos(a2 * kernel.convDegRad), this.y + Math.sin(a2 * kernel.convDegRad)))\n    .vecteurColineaire(ray)\n  // DÃ©but de l'arc\n  let xd = this.x + u1.x\n  let yd = this.y + u1.y\n  // Fin de l'arc\n  let xf = this.x + u2.x\n  let yf = this.y + u2.y\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  let p = document.createElementNS(kernel.svgsn, 'path')\n  const remplis = (motif.indexOf('plein') !== -1) ? this.couleur : 'none'\n  if (remplis !== 'none') {\n    path = 'M' + this.x + ' ' + this.y + 'L' + xd + ' ' + yd + 'A' + ray + ' ' + ray + ' ' +\n            this.ang1 + ' 0 ' + (direct ? '1 ' : '0 ') + xf + ' ' + yf + ' Z'\n  } else {\n    path = 'M' + xd + ' ' + yd + 'A' + ray + ' ' + ray + ' ' +\n            this.ang1 + ' 0 ' + (direct ? '1 ' : '0 ') + xf + ' ' + yf\n  }\n\n  p.setAttribute('d', path)\n  const style1 = 'stroke:' + this.couleur + ';stroke-width:' + this.epaisseur + ';'\n  const style = style1 + 'fill:' + remplis + ';fill-opacity:' + this.opaciteRemplissage + ';'\n  p.setAttribute('style', style)\n  g.appendChild(p)\n  const rond = (motif.indexOf('O') !== -1)\n  const uc = u1.tourne(ang / 2) // Vecteur du centre vers le milieu de l'arc\n  const xc = this.x + uc.x // Abscisse du centre de l'arc\n  const yc = this.y + uc.y // OrdonnÃ©e du centre de l'arc\n  if (rond) {\n    const circ = document.createElementNS(kernel.svgsn, 'circle')\n    circ.setAttribute('r', 5) // Rayon de 5 pixels pour le petir rond de marque\n    circ.setAttribute('cx', xc)\n    circ.setAttribute('cy', yc)\n    circ.setAttribute('style', style1 + 'fill:none;')\n    g.appendChild(circ)\n  }\n  // On regarde s'il y a un, deux ou trois arcs de cercle Ã  tracer\n  const n = (motif.indexOf('triple') !== -1) ? 2 : ((motif.indexOf('double') !== -1) ? 1 : 0)\n  for (let i = 1; i <= n; i++) {\n    p = document.createElementNS(kernel.svgsn, 'path')\n    const r = ray - i * 5\n    const u3 = u1.vecteurColineaire(r)\n    const u4 = u2.vecteurColineaire(r)\n    xd = this.x + u3.x\n    yd = this.y + u3.y\n    xf = this.x + u4.x\n    yf = this.y + u4.y\n    path = 'M' + xd + ' ' + yd + 'A' + r + ' ' + r + ' ' +\n          this.ang1 + ' 0 ' + (direct ? '1 ' : '0 ') + xf + ' ' + yf\n    p.setAttribute('d', path)\n    p.setAttribute('style', style1 + 'fill:none;')\n    g.appendChild(p)\n  }\n  // On rajoute les Ã©ventuels traits (de 1 Ã  3)\n  const nbtraits = (motif.indexOf('///') !== -1) ? 3 : ((motif.indexOf('//') !== -1) ? 2 : ((motif.indexOf('/') !== -1) ? 1 : 0))\n  if (nbtraits === 0) {\n    this.g = g\n    return\n  }\n  const n1 = n + 1\n  const v = uc.vecteurColineaire(1) // Vecteur de longueur 1\n  switch (nbtraits) {\n    case 1 :\n      xmilieu = this.x + v.x * ray\n      ymilieu = this.y + v.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xmilieu - v.x * demilong * n1)\n      line.setAttribute('y1', ymilieu - v.y * demilong * n1)\n      line.setAttribute('x2', xmilieu + v.x * demilong)\n      line.setAttribute('y2', ymilieu + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      break\n    case 2 :\n      ang2 = ang / 6\n      ang3 = 6\n      if (Math.abs(ang2) >= Math.abs(ang3)) ang2 = ang3\n      v2 = v.tourne(ang2)\n      xc1 = this.x + v2.x * ray\n      yc1 = this.y + v2.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xc1 - v.x * demilong * n1)\n      line.setAttribute('y1', yc1 - v.y * demilong * n1)\n      line.setAttribute('x2', xc1 + v.x * demilong)\n      line.setAttribute('y2', yc1 + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      v2 = v.tourne(-ang2)\n      xc1 = this.x + v2.x * ray\n      yc1 = this.y + v2.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xc1 - v.x * demilong * n1)\n      line.setAttribute('y1', yc1 - v.y * demilong * n1)\n      line.setAttribute('x2', xc1 + v.x * demilong)\n      line.setAttribute('y2', yc1 + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      break\n    case 3 :\n      xmilieu = this.x + v.x * ray\n      ymilieu = this.y + v.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xmilieu - v.x * demilong * n1)\n      line.setAttribute('y1', ymilieu - v.y * demilong * n1)\n      line.setAttribute('x2', xmilieu + v.x * demilong)\n      line.setAttribute('y2', ymilieu + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      ang2 = ang / 4\n      ang3 = 9\n      if (Math.abs(ang2) >= Math.abs(ang3)) ang2 = ang3\n      v2 = v.tourne(ang2)\n      xc1 = this.x + v2.x * ray\n      yc1 = this.y + v2.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xc1 - v.x * demilong * n1)\n      line.setAttribute('y1', yc1 - v.y * demilong * n1)\n      line.setAttribute('x2', xc1 + v.x * demilong)\n      line.setAttribute('y2', yc1 + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      v2 = v.tourne(-ang2)\n      xc1 = this.x + v2.x * ray\n      yc1 = this.y + v2.y * ray\n      line = document.createElementNS(kernel.svgsn, 'line')\n      line.setAttribute('x1', xc1 - v.x * demilong * n1)\n      line.setAttribute('y1', yc1 - v.y * demilong * n1)\n      line.setAttribute('x2', xc1 + v.x * demilong)\n      line.setAttribute('y2', yc1 + v.y * demilong)\n      line.setAttribute('style', style)\n      g.appendChild(line)\n      break\n  }\n  this.g = g\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nconst Vect = require('../types/vecteur')\nmodule.exports = AngleDroit\n/**\n * Classe reprÃ©sentant une marque d'angle droit de la figure\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : le document propiÃ©taire de la figure\n * @param {type} id : l'ide de l'objet dans le xml de la figure\n * @param {Float} xsommet : absisse du sommet de l'angle droit\n * @param {Float} ysommet : ordonnÃ©e du sommet de l'angle droit\n * @param {Float} xinter : abscisse du sommet de la marque d'angle\n * @param {type} yinter : ordonnÃ©e du sommet de la marque d'angle\n * @param {type} couleur : couleur de la marque\n * @param {type} epaisseur\n */\nfunction AngleDroit (doc, id, xsommet, ysommet, xinter, yinter, couleur, epaisseur) {\n  this.xsommet = parseFloat(xsommet)\n  this.ysommet = parseFloat(ysommet)\n  this.xinter = parseFloat(xinter)\n  this.yinter = parseFloat(yinter)\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, 100)\n  this.objet = 'angle_droit'\n}\nAngleDroit.prototype = new ObjetLigne()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nAngleDroit.prototype.creeg = function () {\n  let v1 = new Vect(this.xsommet, this.ysommet, this.xinter, this.yinter)\n  const n = v1.norme()\n  v1 = v1.vecteurColineaire(n / Math.sqrt(2))\n  v1 = v1.tourne(45)\n  const v2 = v1.tourne(-90)\n  const p = document.createElementNS(kernel.svgsn, 'polyline')\n  const points = String(this.xsommet + v1.x) + ' ' + String(this.ysommet + v1.y) + ' ' +\n    this.xsommet + ' ' + this.ysommet + ' ' + String(this.xsommet + v2.x) + ' ' + String(this.ysommet + v2.y)\n  p.setAttribute('points', points)\n  p.setAttribute('style', this.style + 'fill:none;')\n  this.g = p\n}\n","/*\n* Visualiseur InstrumenPoche en Javascript et SVG\n* @Author Yves Biton (yves.biton@sesamath.net)\n* @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n*/\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nconst CompasLeve = require('../instruments/compasLeve')\nconst Vect = require('../types/vecteur')\nmodule.exports = Arc\n/**\n * Classe arc de cercle (servant aussi Ã  tracer les cercles)\n * extends iep.objetBase\n * @constructor\n * @param {type} x : abscisse du centre\n * @param {type} y : OrdonnÃ©e du centre\n * @param {type} ray : Le rayon\n * @param {type} debut : L'angle de dÃ©but de tracÃ©\n * @param {type} fin : L'angle de fin de tracÃ©\n * @param {type} couleur : La couleur\n * @param {type} epaisseur : L'Ã©paisseur du trait\n * @param {type} opacite : L'opacitÃ© du tracÃ©\n * @param {type} styleTrait : \"tiret\" pour avoir des pointillÃ©s\n * Si debut < angle, l'arc est tracÃ© dans le sens des ailluilles d'une montre, sinon dans le sens inverse\n */\n// Important : l'objet graphque (g element) sera initialisÃ© avec comme centre l'origine\nfunction Arc (doc, id, x, y, ray, debut, fin, couleur, epaisseur, opacite, styleTrait) {\n  this.x = parseFloat(x)\n  this.y = parseFloat(y)\n  this.ray = parseFloat(ray)\n  this.debut = parseFloat(debut)\n  this.fin = parseFloat(fin)\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, opacite, styleTrait)\n}\nArc.prototype = new ObjetLigne()\n\nArc.prototype.creeg = function () {\n  const deb = this.debut\n  const fin = this.fin\n  const ray = this.ray\n  const sens = (deb < fin) ? '1' : '0' // 1 pour le sens des aiguilles d'une montre (direct pour le SVG)\n  const ecart = Math.abs(fin - deb)\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  if (ecart >= 359.9) { // Cas d'un cercle ou presque\n    const circ = document.createElementNS(kernel.svgsn, 'circle')\n    circ.setAttribute('r', ray)\n    circ.setAttribute('cx', 0)\n    circ.setAttribute('cy', 0)\n    circ.setAttribute('style', this.style + ';fill:none;')\n    g.appendChild(circ)\n  } else {\n    const p = document.createElementNS(kernel.svgsn, 'path')\n    const u1 = new Vect(Math.cos(deb * kernel.convDegRad) * ray, Math.sin(deb * kernel.convDegRad) * ray)\n    const u2 = new Vect(Math.cos(fin * kernel.convDegRad) * ray, Math.sin(fin * kernel.convDegRad) * ray)\n    const xdeb = u1.x\n    const ydeb = u1.y\n    const xfin = u2.x\n    const yfin = u2.y\n    const path = 'M' + xdeb + ' ' + ydeb + 'A' + ray + ' ' + ray + ' ' + deb + ' ' +\n      ((ecart > 180) ? '1' : '0') + ' ' + sens + ' ' + xfin + ' ' + yfin\n    p.setAttribute('d', path)\n    p.setAttribute('style', this.style + ';fill:none')\n    g.appendChild(p)\n  }\n  g.setAttribute('transform', 'translate(' + this.x + ',' + this.y + ')')\n  // g.setAttribute(\"id\",this.id);\n  g.setAttribute('visibility', 'hidden')\n  this.g = g\n}\n\nArc.prototype.creationAnimee = function () {\n  return true\n}\nArc.prototype.lanceAnimation = function (vitesse) {\n  const compas = this.doc.compas\n  if (this.doc.compasLeve == null) {\n    this.doc.compasLeve = new CompasLeve(this.doc, compas.x, compas.y,\n      compas.angle, compas.ecart)\n  }\n  const compasLeve = this.doc.compasLeve\n  this.ray = this.doc.compas.ecart // Le rayon ne peut etre connu qu'au mancement de l'animation\n  this.angfin = this.fin\n  this.pasdeg = vitesse / 2 // Dans la version JavaScript on quadruple la frÃ©quence mais on la double par rapport aux autres animations\n  this.pasdeg *= (this.fin >= this.debut) ? 1 : -1 // 1 pour le sens direct svg;\n  this.distang = Math.abs(this.fin - this.debut)\n  this.fin = this.debut\n  compas.setPosition(this.x, this.y, this.debut)\n  compasLeve.setPosition(this.x, this.y, this.debut)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourAnimation() }, 25)\n}\nArc.prototype.actionPourAnimation = function () {\n  const compas = this.doc.compas\n  const compasLeve = this.doc.compasLeve\n  this.fin += this.pasdeg\n  const dis = Math.abs(this.angfin - this.fin)\n  if ((dis > this.distang) || !this.doc.animationEnCours) {\n    this.fin = this.angfin\n    this.updateg()\n    // compas.setPosition(this.x,this.y,this.fin);\n    this.finAction()\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.distang = dis\n    this.updateg()\n    compas.setPosition(this.x, this.y, this.fin)\n    if (compasLeve !== null) compasLeve.setPosition(this.x, this.y, this.fin)\n  }\n}\n\nArc.prototype.finAction = function () {\n  this.doc.compas.setPosition(this.x, this.y, this.fin)\n  if (this.doc.compasLeve !== null) this.doc.compasLeve.setPosition(this.x, this.y, this.fin)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nmodule.exports = Axe\n/**\n * Classe reprÃ©sentant un axe dans une figure InstrumenPoche\n * Repris Ã  partir du code Flash\n * @extends iep.objetBase\n * @constructor\n * @param {ie.iepDoc} doc : le document propriÃ©taire\n * @param {string} pente : \"horizontal\" pour un axe horizontal, sinon vertical\n * @param {string} largeur\n * @param {string} haut\n * @param {string} gauche\n * @param {string} distanceBord\n * @param {string} xgrad\n * @param {string} xmin\n * @param {string} xmax\n * @param {string} couleur : la couleur de l'axe\n */\nfunction Axe (doc, pente, largeur, haut, gauche, distanceBord, xgrad, xmin, xmax, couleur) {\n  ObjetBase.call(this, doc, 'axeIEP', couleur) // Le repÃ¨re aura pour Id axeIEP\n  this.pente = (pente == null) ? 'horizontal' : pente\n  this.largeur = largeur\n  this.haut = (haut == null) ? 0 : parseFloat(haut)\n  this.gauche = (gauche == null) ? 0 : parseFloat(gauche)\n  this.distanceBord = parseFloat(distanceBord)\n  this.xgrad = xgrad\n  this.xmin = xmin\n  this.xmax = xmax\n  this.cadre = {}\n  this.cadre.gauche = this.gauche * 30 // 30 px pour 1 cm\n  this.cadre.haut = this.haut * 30\n  this.width = 30 * largeur\n  this.cadre.droite = this.gauche + this.width\n  this.cadre.bas = this.haut + this.width\n}\nAxe.prototype = new ObjetBase()\n\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nAxe.prototype.creeg = function () {\n  let li, nb_grad_x, bord, debut_trace_x\n  this.g = document.createElementNS(kernel.svgsn, 'g')\n  const style = 'stroke:black;stroke-width:1;'\n  // Si besoin, on trace des graduations pour les abscisses\n  if (this.pente === 'horizontal' && (this.xmax - this.xmin) > this.xgrad) {\n    // nombre de graduations qui apparaitront\n    nb_grad_x = Math.floor((this.xmax - this.xmin) / this.xgrad)\n    /*\n     determination de l'ordonnÃ©e de l'axe horizontal\n     */\n    bord = this.distanceBord * 30\n\n    /*\n     FIN ETIQUETTES\n     */\n\n    /*\n     DETERMINATION ABSCISSES\n     */\n    debut_trace_x = kernel.determiner_graduations(this.xmin, this.xmax, this.xgrad)\n\n    this.tracer_abscisses(debut_trace_x, this.xgrad, nb_grad_x, bord)\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', this.cadre.gauche)\n    li.setAttribute('y1', bord)\n    li.setAttribute('x2', this.cadre.droite)\n    li.setAttribute('y2', bord)\n    this.g.appendChild(li)\n    /*\n     FIN ABSCISSES\n     */\n  } else if ((this.xmax - this.xmin) > this.xgrad) {\n    // nombre de graduations qui apparaitront\n    nb_grad_x = Math.floor((this.xmax - this.xmin) / this.xgrad)\n    /*\n     determination de l'ordonnÃ©e de l'axe horizontal\n     */\n    bord = Number(this.distanceBord) * 30\n\n    /*\n     FIN ETIQUETTES\n     */\n\n    /*\n     DETERMINATION ABSCISSES\n     */\n    debut_trace_x = kernel.determiner_graduations(this.xmin, this.xmax, this.xgrad)\n\n    this.tracer_ordonnees(debut_trace_x, this.xgrad, nb_grad_x, bord)\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', bord)\n    li.setAttribute('y1', this.cadre.bas)\n    li.setAttribute('x2', bord)\n    li.setAttribute('y2', this.cadre.haut)\n    this.g.appendChild(li)\n\n    /*\n     FIN ABSCISSES\n     */\n  }\n}\n/**\n * Fonction reprise du code Flash, utiilisÃ©e dans creeg()\n */\nAxe.prototype.tracer_abscisses = function (debut_trace_x, unite_x, nb_grad_x, ordo_etiquettes) {\n  let li, txt, abscisse, i\n  const tailleEtiquettes = 12 // Taille de la police utilisÃ©e pour les Ã©tiquettes\n  const style = 'stroke:black;stroke-width:1.5;'\n\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('style', style)\n  li.setAttribute('x1', this.cadre.gauche)\n  li.setAttribute('y1', ordo_etiquettes)\n  li.setAttribute('x2', this.cadre.droite)\n  li.setAttribute('y2', ordo_etiquettes)\n  this.g.appendChild(li)\n  for (i = 0; i <= nb_grad_x; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    abscisse = this.mettre_x_en_pixels(debut_trace_x + i * unite_x)\n    li.setAttribute('x1', abscisse)\n    li.setAttribute('y1', String(ordo_etiquettes - 5))\n    li.setAttribute('x2', abscisse)\n    li.setAttribute('y2', String(ordo_etiquettes + 5))\n    this.g.appendChild(li)\n    txt = document.createElementNS(kernel.svgsn, 'text')\n    txt.setAttribute('x', abscisse)\n    txt.setAttribute('y', ordo_etiquettes + tailleEtiquettes + 5)\n    const stylet = 'text-anchor:left;font-size:' + tailleEtiquettes + 'px;' + 'fill:' + this.couleur + ';'\n    txt.setAttribute('style', stylet)\n    txt.appendChild(document.createTextNode(String(debut_trace_x + i * unite_x)))\n    this.g.appendChild(txt)\n  }\n}\n/**\n * Fonction reprise du code Flash, utiilisÃ©e dans creeg()\n */\nAxe.prototype.tracer_ordonnees = function (debut_trace_y, unite_y, nb_grad_y, abs_etiquettes) {\n  let li, txt, i\n  const tailleEtiquettes = 12 // Taille de la police utilisÃ©e pour les Ã©tiquettes\n  const style = 'stroke:black;stroke-width:1.5;'\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('style', style)\n  li.setAttribute('x1', abs_etiquettes)\n  li.setAttribute('y1', this.cadre.haut)\n  li.setAttribute('x2', abs_etiquettes)\n  li.setAttribute('y2', this.cadre.bas)\n  this.g.appendChild(li)\n  for (i = 0; i <= nb_grad_y; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    const ordonnee = this.mettre_y_en_pixels(debut_trace_y + i * unite_y)\n    li.setAttribute('x1', String(abs_etiquettes - 5))\n    li.setAttribute('y1', ordonnee)\n    li.setAttribute('x2', String(abs_etiquettes + 5))\n    li.setAttribute('y2', ordonnee)\n    this.g.appendChild(li)\n    txt = document.createElementNS(kernel.svgsn, 'text')\n    txt.setAttribute('x', abs_etiquettes + 10)\n    txt.setAttribute('y', ordonnee + 2)\n    const stylet = 'text-anchor:left;font-size:' + tailleEtiquettes + 'px;' + 'fill:' + this.couleur + ';'\n    txt.setAttribute('style', stylet)\n    txt.appendChild(document.createTextNode(String(debut_trace_y + i * unite_y)))\n    this.g.appendChild(txt)\n  }\n}\n/**\n * Fonction utilisÃ©e dans iep.axe\n * @param {type} nbr\n * @returns {Float}\n */\nAxe.prototype.mettre_x_en_pixels = function (nbr) {\n  return kernel.mettre_en_pixels(nbr, this.xmin, this.xmax, this.cadre.gauche, this.cadre.droite)\n}\n/**\n * Fonction utilisÃ©e dans iep.axe\n * @param {type} nbr\n * @returns {Float}\n */\nAxe.prototype.mettre_y_en_pixels = function (nbr) {\n  return kernel.mettre_en_pixels(nbr, this.xmax, this.xmin, this.cadre.haut, this.cadre.bas)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst Droite = require('./droite')\nconst Vect = require('../types/vecteur')\nmodule.exports = DemiDroite\n\n/**\n * Classe reprÃ©sentant une demi-droite dans la figure InstrumenPoche\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc :le document propriÃ©taire de la figure\n * @param {type} id : l'id de l'objet dans le fichier XML\n * @param {Float} x1 : abscisse du premier point\n * @param {Float} y1 : ordonnÃ©e du premier point\n * @param {Float} x2 : abscisse du second point\n * @param {Float} y2 : ordonnÃ©e du premier point\n * @param {string} couleur : couelur de la demi-droite\n * @param {string} epaisseur : Epaisseur du trait\n * @param {string} opacite : OpacitÃ© du trait\n * @param {string} styleTrait : \"tiret\" pour avoir des pointillÃ©s\n */\nfunction DemiDroite (doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait) {\n  Droite.call(this, doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait)\n}\nDemiDroite.prototype = new Droite()\n// Inutile de redÃ©finir creeg()\n/**\n * Fonction calculant les coordonnÃ©es des points Ã  la limite de la figure\n * (xext1,yext1) et (xext2,yext2) pour le tracÃ© rÃ©el\n */\nDemiDroite.prototype.calcule = function () {\n  let u, v\n  Droite.prototype.calcule.call(this)\n  const v1 = new Vect(this.x1, this.y1, this.x2, this.y2) // Vceteur directeur de la demi-droite\n  // Si la droite est hors-fenÃªtre, la demi-droite l'est aussi\n  if (this.horsFenetre) return\n  // Dans IEP l'origine est toujours dans la fenÃªtre\n  u = new Vect(this.x1, this.y1, this.xext1, this.yext1)\n  if (u.presqueNul()) {\n    v = new Vect(this.x1, this.y1, this.xext2, this.yext2)\n    if (kernel.colineairesMemeSens(v, v1)) {\n      this.xext1 = this.x1\n      this.yext1 = this.y1\n    } else {\n      this.xext2 = this.xext1\n      this.yext2 = this.yext1\n      this.xext1 = this.x1\n      this.yext1 = this.y1\n    }\n  } else {\n    if (kernel.colineairesMemeSens(u, v1)) {\n      this.xext2 = this.xext1\n      this.yext2 = this.yext1\n      this.xext1 = this.x1\n      this.yext1 = this.y1\n    } else {\n      this.xext1 = this.x1\n      this.yext1 = this.y1\n    }\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst DroiteAncetre = require('./droiteAncetre')\nmodule.exports = Droite\n/**\n * Classe reprÃ©sentant une droite donnÃ©e par les coordonnÃ©es de ses deux points\n * @constructor\n * @extends iep.objetBase\n * @param {Float} x1 : Abscisse du premier point\n * @param {Float} y1 : OrdonnÃ©e du deuiÃ¨me point\n * @param {Float} x2 : Abscisse du deuxiÃ¨me point\n * @param {Float} y2 : OrdonnÃ©e du deuxiÃ¨me point\n * @param {string} couleur : La couleur\n * @param {string} epaisseur : L'Ã©paisseur de trait\n * @param {string} opacite : L'opacitÃ© du tracÃ©\n * @param {string} styleTrait : \"tiret\" pour un trait pointillÃ©\n */\nfunction Droite (doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait) {\n  DroiteAncetre.call(this, doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait)\n}\nDroite.prototype = new DroiteAncetre()\n\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nDroite.prototype.creeg = function () {\n  this.calcule()\n  if (!this.horsFenetre) {\n    const li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('x1', this.xext1)\n    li.setAttribute('y1', this.yext1)\n    li.setAttribute('x2', this.xext2)\n    li.setAttribute('y2', this.yext2)\n    li.setAttribute('style', this.style)\n    this.g = li\n  } else this.g = document.createElementNS(kernel.svgsn, 'g')\n  this.g.setAttribute('visibility', 'hidden')\n  // this.g.setAttribute(\"id\",this.id);\n}\n/**\n * Calcul des coordonnÃ©es des points d'intersection de la droite avec les bords de la fenÃªtre\n * Si la droite est hors de la fenÃªtre, this.horsFenetre est mis Ã  false, sinon true\n * Au retour, (this.xext1, this.yext1) et (this.xext2, this.yext2) sont les coodonnÃ©es des points au bord\n * @param {type} svg\n */\nDroite.prototype.calcule = function () {\n  let a, xa, ya, xb, yb, xc, yc, xd, yd, x1, y1, x2, y2\n  const width = parseInt(this.doc.svg.getAttribute('width'))\n  const height = parseInt(this.doc.svg.getAttribute('height'))\n  x1 = this.x1\n  y1 = this.y1\n  x2 = this.x2\n  y2 = this.y2\n  if ((x1 === x2) && (y1 === y2)) {\n    this.horsFenetre = true\n    return\n  }\n  this.horsFenetre = false\n  if (x1 === x2) {\n    this.xext1 = x1\n    this.yext1 = 0\n    this.xext2 = x1\n    this.yext2 = height\n    if ((x1 < 0) || (x1 > width)) {\n      this.horsFenetre = true\n      return\n    }\n    this.xext1 = x1\n    this.yext1 = 0\n    this.xext2 = x1\n    this.yext2 = height\n    return\n  }\n  if (y1 === y2) {\n    this.xext1 = 0\n    this.yext1 = y1\n    this.xext2 = width\n    this.yext2 = y1\n    if ((y1 < 0) || (y1 > height)) {\n      this.horsFenetre = true\n      return\n    }\n    this.xext1 = 0\n    this.yext1 = y1\n    this.xext2 = width\n    this.yext2 = y1\n    return\n  }\n  let indicePoint = 0\n  a = (y2 - y1) / (x2 - x1)\n  xa = 0\n  ya = this.y1 + a * (xa - x1)\n  if ((ya >= 0) && (ya <= height)) {\n    indicePoint++\n    this.xext1 = xa\n    this.yext1 = ya\n  }\n  xb = width\n  yb = a * (xb - x1) + y1\n  if ((yb >= 0) && (yb <= height)) {\n    indicePoint++\n    if (indicePoint === 1) {\n      this.xext1 = xb\n      this.yext1 = yb\n    } else {\n      this.xext2 = xb\n      this.yext2 = yb\n      return\n    }\n  }\n  yc = 0\n  xc = (yc - y1) / a + x1\n  if ((xc > 0) && (xc < width)) {\n    indicePoint++\n    if (indicePoint === 1) {\n      this.xext1 = xc\n      this.yext1 = yc\n    } else {\n      this.xext2 = xc\n      this.yext2 = yc\n      return\n    }\n  }\n  yd = height\n  xd = (yd - y1) / a + x1\n  if ((xd > 0) && (xd <= width)) {\n    indicePoint++\n    if (indicePoint === 2) {\n      this.xext2 = xd\n      this.yext2 = yd\n    } else {\n      this.horsFenetre = true\n    }\n  } else this.horsFenetre = true\n  if (this.horsFenetre) {\n    this.xext1 = 0\n    this.yext1 = ya\n    this.xext2 = xb\n    this.yext2 = yb\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nconst Vect = require('../types/vecteur')\nmodule.exports = DroiteAncetre\n/**\n * La classe reprÃ©sentant l'ancÃªtre des droites, segments, demi-droites\n * @extends iep.objetBase\n * @constructor\n * @param {type} x1 : Abscisse du premier point\n * @param {type} y1 : OrdonnÃ©e du deuiÃ¨me point\n * @param {type} x2 : Abscisse du deuxiÃ¨me point\n * @param {type} y2 : OrdonnÃ©e du deuxiÃ¨me point\n * @param {type} couleur : La couleur\n * @param {type} epaisseur : L'Ã©paisseur de trait\n * @param {type} opacite : L'opacitÃ© du tracÃ©\n * @param {type} styleTrait : \"tiret\" pour un trait pointillÃ©\n * @param {boolean} vecteur : Si true une flÃ¨che est tracÃ©e\n */\nfunction DroiteAncetre (doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait) {\n  this.x1 = parseFloat(x1)\n  this.y1 = parseFloat(y1)\n  this.x2 = parseFloat(x2)\n  this.y2 = parseFloat(y2)\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, opacite, styleTrait)\n}\nDroiteAncetre.prototype = new ObjetLigne()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nDroiteAncetre.prototype.creeg = function () {\n  let g, li\n  g = document.createElementNS(kernel.svgsn, 'g')\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', this.x1)\n  li.setAttribute('y1', this.y1)\n  li.setAttribute('x2', this.x2)\n  li.setAttribute('y2', this.y2)\n  li.setAttribute('style', this.style)\n  g.appendChild(li)\n  g.setAttribute('visibility', 'hidden')\n  // g.setAttribute(\"id\",this.id);\n  this.g = g\n}\n\nDroiteAncetre.prototype.creationAnimee = function () {\n  return true\n}\nDroiteAncetre.prototype.lanceAnimation = function (vitesse) {\n  this.vitesse = vitesse / 4\n  const v = new Vect(this.x1, this.y1, this.x2, this.y2)\n  this.dist = v.norme() // La distance entre la position actuelle et la position finale\n  if (kernel.zero(this.dist)) {\n    this.doc.actionSuivante()\n    return\n  }\n  this.vect = v.vecteurColineaire(this.vitesse * 1.8) //* 1.8 car dans la rÃ©alitÃ© c'est plus rapide\n  this.xfin = this.x2\n  this.yfin = this.y2\n  this.x2 = this.x1\n  this.y2 = this.y1\n  const cray = this.doc.crayon\n  cray.setPosition(this.x1, this.y1, cray.angle)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourAnimation(t) }, 25)\n}\nDroiteAncetre.prototype.actionPourAnimation = function () {\n  this.x2 += this.vect.x\n  this.y2 += this.vect.y\n  const u = new Vect(this.x1, this.y1, this.x2, this.y2)\n  const d = u.norme()\n  const cray = this.doc.crayon\n  if ((d > this.dist) || !this.doc.animationEnCours) {\n    this.x2 = this.xfin\n    this.y2 = this.yfin\n    this.finAction()\n    this.updateg()\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    cray.translate(this.x2, this.y2)\n    this.updateg()\n  }\n}\n/**\n * extends iep.objetBase.prototype.finAction\n */\nDroiteAncetre.prototype.finAction = function () {\n  this.doc.crayon.translate(this.x2, this.y2)\n}\n","/*\r\n* Visualiseur InstrumenPoche en Javascript et SVG\r\n* @Author Yves Biton (yves.biton@sesamath.net)\r\n* @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\r\n*/\r\nconst ObjetLigne = require('../objets/objetLigne')\r\nconst kernel = require('../global/global')\r\nconst Vect = require('../types/vecteur')\r\nmodule.exports = Gabarit\r\n\r\n/**\r\n * Classe Gabarit de cercle (servant aussi Ã  tracer les cercles)\r\n * L'objet gabarit va hÃ©riter de cet objet (secteur circulaire)\r\n * extends iep.objetBase\r\n * @constructor\r\n * @param {type} x : abscisse du centre\r\n * @param {type} y : OrdonnÃ©e du centre\r\n * @param {type} ray : Le rayon\r\n * @param {type} debut : L'angle de dÃ©but de tracÃ©\r\n * @param {type} fin : L'angle de fin de tracÃ©\r\n * @param {type} couleur : La couleur\r\n * @param {type} epaisseur : L'Ã©paisseur du trait\r\n * @param {type} opacite : L'opacitÃ© du tracÃ©\r\n * @param {type} styleTrait : \"tiret\" pour avoir des pointillÃ©s\r\n * Si debut < angle, l'arc est tracÃ© dans le sens des ailluilles d'une montre, sinon dans le sens inverse\r\n */\r\n// Important : l'objet graphique (g element) sera initialisÃ© avec comme centre l'origine\r\nfunction Gabarit (doc, id, x, y, ray, ecartAngle, couleur, epaisseur, couleurFond, opacite) {\r\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, opacite, 'continu')\r\n  this.x = parseFloat(x)\r\n  this.y = parseFloat(y)\r\n  this.ray = (ray === null) ? 10 : parseFloat(ray)\r\n  this.ecartAngle = parseFloat(ecartAngle)\r\n  this.couleur = couleur\r\n  this.couleurFond = (couleurFond === null) ? couleur : couleurFond\r\n  this.angle = 0 // On peut appliquer une rotation Ã  cet objet\r\n  this.objet = 'gabarit'\r\n}\r\n\r\nGabarit.prototype = new ObjetLigne()\r\n\r\n// Le gabarit n'a pas d'animation quand on le crÃ©e contrairement Ã  l'arc de cercle\r\nGabarit.prototype.creationAnimee = function () {\r\n  return false\r\n}\r\n\r\nGabarit.prototype.creeg = function () {\r\n  const fin = this.ecartAngle\r\n  const ray = this.ray\r\n  const sens = (fin >= 0) ? '1' : '0' // 1 pour le sens des aiguilles d'une montre (direct pour le SVG)\r\n  const ecart = Math.abs(fin)\r\n  const g = document.createElementNS(kernel.svgsn, 'g')\r\n\r\n  const p = document.createElementNS(kernel.svgsn, 'path')\r\n  const u2 = new Vect(Math.cos(fin * kernel.convDegRad) * ray, Math.sin(fin * kernel.convDegRad) * ray)\r\n  const xdeb = ray\r\n  const ydeb = 0\r\n  const xfin = u2.x\r\n  const yfin = u2.y\r\n  const path = 'M 0 0 L ' + xdeb + ' ' + ydeb + ' A ' + ray + ' ' + ray + ' 0 ' +\r\n    ((ecart > 180) ? '1' : '0') + ' ' + sens + ' ' + xfin + ' ' + yfin + ' Z'\r\n  p.setAttribute('d', path)\r\n  const op = parseFloat(this.opacite / 100)\r\n  const style = 'stroke:' + this.couleur + ';stroke-width:' + this.epaisseur + ';' + 'fill:' + this.couleurFond + ';fill-opacity:' + op + ';'\r\n  p.setAttribute('style', style)\r\n  g.appendChild(p)\r\n  g.setAttribute('transform', 'translate(' + this.x + ',' + this.y + ') rotate(' + this.angle + ')')\r\n  // g.setAttribute(\"id\",this.id);\r\n  g.setAttribute('visibility', 'hidden')\r\n  this.g = g\r\n}\r\n\r\nGabarit.prototype.donneRayon = function (ray) {\r\n  this.ray = ray\r\n  this.updateg()\r\n  this.setPosition(this.x, this.y, this.angle)\r\n}\r\n\r\nGabarit.prototype.setPosition = function (x, y, angle) {\r\n  this.x = x\r\n  this.y = y\r\n  this.angle = angle\r\n  this.g.setAttribute('transform', 'translate(' + x + ',' + y + ') rotate(' + angle + ')')\r\n}\r\n\r\nGabarit.prototype.lanceAnimationModificationRayon = function (rayFin, pix10) {\r\n  this.rayFin = rayFin\r\n  this.rayInit = this.ray\r\n  const dif = rayFin - this.ray\r\n  this.dist = Math.abs(dif) // La distance entre la position actuelle et la position finale\r\n  this.dray = Math.sign(dif) * Math.abs(pix10 / 4) // Dans la version JavaScript on quadruple la frÃ©quence;\r\n  // en divisant le pas par 4\r\n  // (en fait par deux car la rapiditÃ© semble double de celle annoncÃ©e dans le mode d'emploi)\r\n  // Cas oÃ¹ l'objet est dÃ©jÃ  Ã  la bonne position\r\n  if (this.dist === 0) return\r\n  // this.vect = v.vecteurColineaire(this.pix);\r\n  const t = this\r\n  this.timer = setInterval(function () { t.actionPourModificationRayon() }, 25)\r\n}\r\n\r\nGabarit.prototype.actionPourModificationRayon = function () {\r\n  const r = this.ray + this.dray\r\n  const d = Math.abs(r - this.rayInit)\r\n  if ((d > this.dist) || !this.doc.animationEnCours) {\r\n    this.donneRayon(this.rayFin)\r\n    clearInterval(this.timer)\r\n    this.doc.actionSuivante()\r\n  } else {\r\n    this.dist = d\r\n    this.donneRayon(r)\r\n  }\r\n}\r\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nmodule.exports = LigneContinue\n/**\n * Classe reprÃ©sentant une ligne continue de la figure\n * @extends iep.objetBase\n * @constructor\n * @param {iepDoc} doc : Le document propriÃ©taire\n * @param {Integer} id : L'id de l'objet dans le fichier XML de la figure\n * @param {string} abs : Une chaÃ®ne contenant les abscisses sÃ©parÃ©es par des virgules\n * @param {string} ord : Une chaÃ®ne contenant les ordonnÃ©es sÃ©parÃ©es par des virgules\n * @param{Integer} xdeb : abscisse de dÃ©but (en fait l'abscisse actuelle du crayon)\n * @param{Integer} ydeb : ordonÃ©e de dÃ©but (en fait l'ordonnÃ©e actuelle du crayon)\n * @param {string} couleur : La couleur\n * @param {string} epaisseur : L'Ã©paisseur de trait\n * @param {string} opacite : L'opacitÃ© du trait\n * @param {string} styleTrait : tiret pour avoir des pointillÃ©s\n */\nfunction LigneContinue (doc, id, xdeb, ydeb, abs, ord, couleur, epaisseur, opacite, styleTrait) {\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, opacite, styleTrait)\n  this.xdeb = xdeb\n  this.ydeb = ydeb\n  this.abs = abs.split(',')\n  this.ord = ord.split(',')\n  this.objet = 'trait'\n}\nLigneContinue.prototype = new ObjetLigne()\n\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nLigneContinue.prototype.creeg = function () {\n  let p, points, i\n  p = document.createElementNS(kernel.svgsn, 'polyline')\n  points = this.xdeb + ' ' + this.ydeb\n  for (i = 0; i < this.abs.length; i++) {\n    points += ' ' + this.abs[i] + ' ' + this.ord[i]\n  }\n  p.setAttribute('points', points)\n  p.setAttribute('style', this.style + 'fill:none;')\n  p.setAttribute('visibility', 'hidden')\n  // p.setAttribute(\"id\",this.id);\n  this.g = p\n}\n/** @inheritDoc */\nLigneContinue.prototype.creationAnimee = function () {\n  return true\n}\n/**\n * Fonction lanÃ§ant l'animation de visualisation de la ligne continue\n * Utilise un timer et une fonction de callBack\n */\nLigneContinue.prototype.lanceAnimation = function () {\n  this.sauveabs = this.abs\n  this.sauveord = this.ord\n  this.abs = []\n  this.ord = []\n  this.ind = -1 // L'indice dans le tableau des coordonnÃ©es\n  const t = this\n  this.timer = setInterval(function () { t.actionPourAnimation() }, 25)\n}\n/**\n * Fonction de callBack appelÃ©e par un timer pour l'animation du tracÃ©\n */\nLigneContinue.prototype.actionPourAnimation = function () {\n  this.ind++\n  const cray = this.doc.crayon\n  if (this.ind >= this.sauveabs.length) {\n    this.abs = this.sauveabs\n    this.ord = this.sauveord\n    this.updateg()\n    clearInterval(this.timer)\n    this.finAction()\n    this.doc.actionSuivante()\n  } else {\n    const x = this.sauveabs[this.ind]\n    const y = this.sauveord[this.ind]\n    this.abs.push(x)\n    this.ord.push(y)\n    this.updateg()\n    cray.setPosition(parseFloat(x), parseFloat(y), cray.angle)\n    this.updateg()\n  }\n}\n/**\n * extends iep.objetBase.prototype.finAction\n */\nLigneContinue.prototype.finAction = function () {\n  const len = this.abs.length\n  this.doc.crayon.translate(parseFloat(this.abs[len - 1]), parseFloat(this.ord[len - 1]))\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nmodule.exports = MarqueSegment\n/**\n * Objet reprÃ©sentant une marque de segment\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : Le document propriÃ©taire\n * @param {string} id : L'id de l'objet\n * @param {string} x : L'abscisse\n * @param {string} y : L'ordonnÃ©e\n * @param {string} couleur : La couleur de tracÃ©\n * @param {string} epaisseur : L'Ã©paisseur de tracÃ©\n * @param {string} motif : Donne le motif de la marque\n */\nfunction MarqueSegment (doc, id, x, y, couleur, epaisseur, motif) {\n  this.x = parseFloat(x)\n  this.y = parseFloat(y)\n  this.motif = motif\n  ObjetLigne.call(this, doc, id, couleur, epaisseur, 100)\n  this.objet = 'longueur'\n}\nMarqueSegment.prototype = new ObjetLigne()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nMarqueSegment.prototype.creeg = function () {\n  let g, li, k\n  const demlong = 5\n  const ec = 5 // demi Ã©cart horizontal entre deux traits\n  const dec = ec / 2\n  const diam = 5 // DiamÃ¨tre du rond dans le cas oÃ¹ style == O\n  switch (this.motif) {\n    case '/' :\n      g = document.createElementNS(kernel.svgsn, 'line')\n      g.setAttribute('x1', demlong)\n      g.setAttribute('y1', -demlong)\n      g.setAttribute('x2', -demlong)\n      g.setAttribute('y2', demlong)\n      g.setAttribute('style', this.style)\n      break\n    case '\\\\' :\n      g = document.createElementNS(kernel.svgsn, 'line')\n      g.setAttribute('x1', -demlong)\n      g.setAttribute('y1', -demlong)\n      g.setAttribute('x2', demlong)\n      g.setAttribute('y2', demlong)\n      g.setAttribute('style', this.style)\n      break\n    case '//':\n      g = document.createElementNS(kernel.svgsn, 'g')\n      for (k = -1; k <= 1; k += 2) {\n        li = document.createElementNS(kernel.svgsn, 'line')\n        li.setAttribute('x1', k * dec + demlong)\n        li.setAttribute('y1', -demlong)\n        li.setAttribute('x2', k * dec - demlong)\n        li.setAttribute('y2', demlong)\n        li.setAttribute('style', this.style)\n        g.appendChild(li)\n      }\n      break\n    case '///':\n      g = document.createElementNS(kernel.svgsn, 'g')\n      for (k = -1; k <= 1; k++) {\n        li = document.createElementNS(kernel.svgsn, 'line')\n        li.setAttribute('x1', k * ec + demlong)\n        li.setAttribute('y1', -demlong)\n        li.setAttribute('x2', k * ec - demlong)\n        li.setAttribute('y2', demlong)\n        li.setAttribute('style', this.style)\n        g.appendChild(li)\n      }\n      break\n    case '\\\\\\\\':\n      g = document.createElementNS(kernel.svgsn, 'g')\n      for (k = -1; k <= 1; k += 2) {\n        li = document.createElementNS(kernel.svgsn, 'line')\n        li.setAttribute('x1', k * dec - demlong)\n        li.setAttribute('y1', -demlong)\n        li.setAttribute('x2', k * dec + demlong)\n        li.setAttribute('y2', demlong)\n        li.setAttribute('style', this.style)\n        g.appendChild(li)\n      }\n      break\n    case '\\\\\\\\\\\\':\n      g = document.createElementNS(kernel.svgsn, 'g')\n      for (k = -1; k <= 1; k++) {\n        li = document.createElementNS(kernel.svgsn, 'line')\n        li.setAttribute('x1', k * ec - demlong)\n        li.setAttribute('y1', -demlong)\n        li.setAttribute('x2', k * ec + demlong)\n        li.setAttribute('y2', demlong)\n        li.setAttribute('style', this.style)\n        g.appendChild(li)\n      }\n      break\n    case 'X': // Croix\n      g = document.createElementNS(kernel.svgsn, 'g')\n      li = document.createElementNS(kernel.svgsn, 'line')\n      li.setAttribute('x1', -demlong)\n      li.setAttribute('y1', -demlong)\n      li.setAttribute('x2', demlong)\n      li.setAttribute('y2', demlong)\n      li.setAttribute('style', this.style)\n      g.appendChild(li)\n      li = document.createElementNS(kernel.svgsn, 'line')\n      li.setAttribute('x1', demlong)\n      li.setAttribute('y1', -demlong)\n      li.setAttribute('x2', -demlong)\n      li.setAttribute('y2', demlong)\n      li.setAttribute('style', this.style)\n      g.appendChild(li)\n      break\n    case 'O': // Rond\n      g = document.createElementNS(kernel.svgsn, 'circle')\n      g.setAttribute('cx', 0)\n      g.setAttribute('cy', 0)\n      g.setAttribute('r', diam)\n      g.setAttribute('style', this.style + 'fill:none;')\n      break\n    default :\n      g = document.createElementNS(kernel.svgsn, 'g') // Vide en cas d'erreur\n  }\n  this.g = g\n}\n/** @inheritDoc */\nMarqueSegment.prototype.positionne = function () {\n  this.g.setAttribute('transform', 'translate(' + this.x + ',' + this.y + ')')\n}\n/** @inheritDoc */\nMarqueSegment.prototype.translate = function (x, y) {\n  this.x = x\n  this.y = y\n  this.positionne()\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nmodule.exports = NomPoint\n/**\n * Objet servant Ã  nommer un point\n * @extends iep.objetBase\n * @constructor\n * @param {iepDoc} doc : le document propriÃ©taire\n * @param {string} id : l'id du point auquel le nom est attribuÃ©\n * @param {string} dx : le dÃ©calage en abscisses du nom par rapport au point (haut-gauche de la matrice du nom)\n * @param {string} dy : le dÃ©calage en ordonnÃ©es du nom par rapport au point (haut-gauche de la matrice du nom)\n * @param {string} couleur : la couleur du nom\n */\nfunction NomPoint (doc, id, dx, dy, nom, couleur) {\n  ObjetBase.call(this, doc, id, couleur)\n  this.dx = (dx == null) ? 2 : parseFloat(dx)\n  this.dy = (dy == null) ? 4 : parseFloat(dy)\n  this.nom = kernel.remplaceAccentsHtml(kernel.remplaceBalises(kernel.remplaceCarSpe(nom)))\n  this.taille = 20\n  this.point = this.doc.getElement(this.id, 'point')\n  this.objet = 'point'\n  this.nom = this.nom.replace(/\\*/g, 'Ã—')\n  if (kernel.necessiteLatex(nom)) {\n    this.nom = '$' + this.traiteMaths(this.nom) + '$'\n    this.estLatex = true\n  } else {\n    this.nom = kernel.traiteAccents(this.nom)\n    this.estLatex = false\n  }\n}\nNomPoint.prototype = new ObjetBase()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nNomPoint.prototype.creeg = function () {\n  let indbalise, tspan, ch, ch2, style, txt, ind, indexp, indind, mini, bexp, tailleind, stylespan,\n    y, sp, i, debutLigne, an\n  let dy = 0 // Le baselineshift de chaque tspan\n  const inf = '<' // Equivalent du symbole <\n  const debexp = 'Â£e('\n  const debind = 'Â£i('\n  const g = document.createElementNS(kernel.svgsn, 'g')\n  const hautlig = parseFloat(this.taille) + 2\n  let decblp = 0 // DÃ©calage vers le bas de la ligne prÃ©cÃ©dente\n  const decalage = parseFloat(this.taille) * 0.4 // DÃ©calage vers le bas ou le haut en cas d'indice ou d'exposant\n\n  if (this.nom.length !== 0) {\n    txt = document.createElementNS(kernel.svgsn, 'text')\n    txt.setAttribute('pointer-events', 'none')\n    txt.setAttribute('x', 0)\n    txt.setAttribute('y', 0)\n    style = 'text-anchor:left;font-size:' + this.taille + 'px;' + 'fill:' + this.couleur + ';'\n    txt.setAttribute('style', style)\n    // On remplace les espaces par des espaces insÃ©cables\n    ch2 = this.nom.replace(new RegExp(' ', 'g'), '\\u00A0')\n    // Affecter une longueur ne peut Ãªtre efficace que pour du texte simpel sans balise\n    if ((this.nom.indexOf(inf) === -1) && (this.nom.indexOf(debexp) === -1) && (this.nom.indexOf(debind) === -1) &&\n      (this.nom.indexOf('<br>') === -1)) {\n      txt.appendChild(document.createTextNode(ch2))\n    } else {\n      sp = ch2.split(/<br>/gi)\n      y = -hautlig\n      for (i = 0; i < sp.length; i++) {\n        debutLigne = true\n        ch = sp[i]\n        while (ch.length !== 0) {\n          indbalise = ch.indexOf(inf)\n          indexp = ch.indexOf(debexp)\n          indind = ch.indexOf(debind)\n          if (debutLigne) y += hautlig + decblp\n          if (indexp !== -1) y += decalage\n          if ((indbalise === -1) && (indexp === -1) && (indind === -1)) {\n            tspan = document.createElementNS(kernel.svgsn, 'tspan')\n            tspan.setAttribute('pointer-events', 'none')\n            tspan.setAttribute('dy', dy)\n            if (debutLigne) {\n              tspan.setAttribute('x', 0)\n              tspan.setAttribute('y', y)\n              debutLigne = false\n            }\n            dy = 0 // On est revenu au niveau 0\n            tspan.appendChild(document.createTextNode(ch))\n            txt.appendChild(tspan)\n            break\n          } else {\n            while ((ch.indexOf(inf) !== -1) || (ch.indexOf(debexp) !== -1) ||\n                    (ch.indexOf(debind) !== -1)) {\n              indbalise = ch.indexOf(inf)\n              indexp = ch.indexOf(debexp)\n              indind = ch.indexOf(debind)\n              if (indbalise === -1) {\n                if (indexp === -1) mini = indind\n                else mini = (indind === -1) ? indexp : Math.min(indind, indexp)\n              } else {\n                if (indexp === -1) mini = (indind === -1) ? indbalise : Math.min(indbalise, indind)\n                else {\n                  if (indind === -1) mini = Math.min(indbalise, indexp)\n                  else mini = Math.min(indbalise, indind, indexp)\n                }\n              }\n              if (mini > 0) { // Il y a du texte avant les balises\n                tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                tspan.setAttribute('pointer-events', 'none')\n                tspan.setAttribute('dy', dy)\n                if (debutLigne) {\n                  tspan.setAttribute('x', 0)\n                  tspan.setAttribute('y', y)\n                  debutLigne = false\n                }\n                dy = 0 // On est revenu au niveau 0\n                tspan.appendChild(document.createTextNode(ch.substring(0, mini)))\n                txt.appendChild(tspan)\n                ch = ch.substring(mini)\n              } else {\n                if (indbalise === 0) {\n                  const infoBalise = new kernel.infoBalise(false, false, false, this.couleur, '', this.taille)\n                  ind = kernel.indiceFinBalise(ch)\n                  if (ind === -1) kernel.traiteBalise(ch, infoBalise, txt, debutLigne, y)\n                  else kernel.traiteBalise(ch.substring(0, ind), infoBalise, txt, debutLigne, y)\n                  debutLigne = false\n                  if (ind !== -1) ch = ch.substring(ind); else ch = ''\n                  dy = 0 // On est revenu au niveau 0\n                } else { // mini est Ã©gal Ã  0\n                  bexp = mini === indexp\n                  an = kernel.analyseExposantOuIndice(ch)\n                  tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                  tspan.setAttribute('pointer-events', 'none')\n                  tspan.setAttribute('dy', dy + 'px')\n                  if (debutLigne) {\n                    tspan.setAttribute('x', 0)\n                    tspan.setAttribute('y', y)\n                    debutLigne = false\n                  }\n                  if (an.erreur) tspan.appendChild(document.createTextNode(ch))\n                  else {\n                    tspan.appendChild(document.createTextNode(an.operande))\n                    txt.appendChild(tspan)\n                    tspan = document.createElementNS(kernel.svgsn, 'tspan')\n                    tspan.setAttribute('pointer-events', 'none')\n                    tspan.appendChild(document.createTextNode(an.exposant))\n                    dy = decalage\n                    if (bexp) dy = -dy\n                    else decblp = dy\n                    tspan.setAttribute('dy', dy + 'px')\n                    tailleind = parseFloat(this.taille) * 0.6\n                    stylespan = 'font-size:' + tailleind + 'px;'\n                    tspan.setAttribute('style', stylespan)\n                    txt.appendChild(tspan)\n                    dy = -dy // Car sinon la suite sera dÃ©calÃ©e aussi en hauteur\n                  }\n                  ch = an.texte\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    g.appendChild(txt)\n    this.g = g\n  }\n  g.setAttribute('visibility', 'hidden')\n  // g.setAttribute(\"id\",this.id);\n}\n/**\n * Fonction appelÃ©e par prepare() qui rÃ©cupÃ¨re l'Ã©lement svg graphique reprÃ©sentant\n * la formule dans le div provisoire prÃ©cÃ©demment crÃ©Ã©, dÃ©truit ensuite ce div provisoire\n * Rajoute les Ã©lÃ©ments graphiques correspondant Ã  un cadre si une couleur de fond\n * et un cadre ont Ã©tÃ© demandÃ©s\n */\nNomPoint.prototype.creegLatex = function () {\n  let w, h, ratio\n  try {\n    const g = document.createElementNS(kernel.svgsn, 'g')\n    const c1 = this.div.childNodes[1]\n    if (c1 === undefined) return document.createElementNS(kernel.svgsn, 'g')\n    const c2 = c1.childNodes[0]\n    if (c2 === undefined) return document.createElementNS(kernel.svgsn, 'g')\n    let s = c2.childNodes[0]\n    if (s === undefined) return document.createElementNS(kernel.svgsn, 'g')\n    // Pour gÃ©rer Chrome\n    while (s.tagName === 'SPAN') s = s.childNodes[0]\n    // Le test suivant est du Ã  la compatibilitÃ© avec l'explorer\n    if ((s.clientWidth !== 0) && (s.clientHeight !== 0)) {\n      w = s.clientWidth\n      h = s.clientHeight\n    } else {\n      const b = s.getBBox()\n      ratio = b.height / b.width\n      w = this.div.clientWidth\n      h = w * ratio\n    }\n    const t = this.taille\n    if (h < t) h = t\n    s.setAttribute('x', '0')\n    s.setAttribute('y', String(-this.taille)) // DiffÃ©rent de MathGraph32\n    s.setAttribute('width', w + 'px')\n    s.setAttribute('height', h + 'px')\n    g.appendChild(s.parentNode.removeChild(s))\n    document.body.removeChild(this.div)\n    g.setAttribute('visibility', 'hidden')\n    // g.setAttribute(\"id\",this.id);\n    this.g = g\n  } catch (e) {\n    if (this.div != null) document.body.removeChild(this.div)\n    this.g = document.createElementNS(kernel.svgsn, 'g') // CrÃ©e un g vide en cas de problÃ¨me\n  }\n}\n\n/** @inheritDoc */\nNomPoint.prototype.positionne = function () {\n  // Il arrive que des gens aient mis l'actiond e nommer le point avant la crÃ©atin du point lui-mÃªme d'oÃ¹ le test\n  // suivant :\n  if (this.point === null) this.point = this.doc.getElement(this.id, 'point')\n  const xp = this.point.x\n  const yp = this.point.y\n  this.g.setAttribute('transform', 'translate(' + String(xp + this.dx) + ',' + String(yp + this.dy + this.taille) + ')')\n}\n\n/**\n * Fonction traitant la chaÃ®ne ch pour la transcrire en code LaTeX\n * Renvoie la chaÃ®ne LaTeX correspondante.\n * Si la chaÃ®ne contient des balises <br>, un tableau LaTeX est utilisÃ© pour rendre le contenu\n * @param {string} ch : la chaÃ®ne Ã  traiter\n * @returns {string} la chaÃ®ne LaTeX correpondante une fois ch traduite\n */\nNomPoint.prototype.traiteMaths = function (ch) {\n  return kernel.traiteAccents(kernel.getMathsForName(ch, true)) // True pour mode texte\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst Vect = require('../types/vecteur')\nconst kernel = require('../global/global')\nmodule.exports = ObjetBase\n/**\n * Objet ancÃªtre de tous les objets graphiques\n * Le prototype de chaque descendant de cet objet devra comprendre une fonction creeg qui crÃ©era\n * le svg Ã©lÃ©ment associÃ© et l'affectera Ã  this.g\n * @constructor\n * @param {type} doc : Le document propriÃ©taire de l'objet\n * @param {type} id : Le numÃ©ro de l'objet dans le document\n */\nfunction ObjetBase (doc, id, couleur) {\n  this.doc = doc\n  this.id = id\n  this.couleur = couleur\n  this.zoomfactor = 1 // Pour les images\n  this.visible = false\n  this.objet = 'trait' // Ne sera redÃ©fini que pour les points, textes, les angles et le gabarits\n}\n/**\n * Cette fonction est appelÃ©e lors de la crÃ©ation d'objets.\n * par dÃ©faut elle ne fait rien;\n * Elle sera redÃ©finie pour les objets qui peuvent Ãªtre translatÃ©s : points, marques de segments, textes, images\n */\nObjetBase.prototype.positionne = function () {\n}\n/**\n * Fonction qui rÃ©initialisera la psoition des objets lorsqu'on retrace la figure\n * Ne sera redÃ©finie que pour les objets dont la position peut Ãªtre modifiee par translation, rotation ou zoom\n */\nObjetBase.prototype.initialisePosition = function () {\n}\n/**\n * Fonction translatant l'objet auux coordonnÃ©es (ab)\n * @param {type} a\n * @param {type} b\n */\nObjetBase.prototype.translate = function (a, b) {\n  this.setPosition(a, b, this.angle, this.zoomfactor)\n}\n/**\n * Fonction donnant au membre angle de l'objet la valeur ang\n * @param {type} ang\n */\nObjetBase.prototype.tourne = function (ang) {\n  this.setPosition(this.x, this.y, ang, this.zoomfactor)\n}\n/**\n * Fonction donnant au membre zoom de l'objet la valeur rap\n * @param {type} rap\n */\nObjetBase.prototype.zoom = function (rap) {\n  this.zoomfactor = rap\n  this.setPosition(this.x, this.y, this.angle, rap)\n}\n/**\n * Fonction rendant l'objet visible ou invisible suivant la valeur de bvisible\n * Modifie en consequence la valeur de bvisible\n * @param {type} bvisible\n */\nObjetBase.prototype.montre = function (bvisible) {\n  this.visible = bvisible\n  if (this.g) this.g.setAttribute('visibility', bvisible ? 'visible' : 'hidden')\n}\n\n// Les fonctions suivantes ne serviront que pour les points, marques de segment et affichages de texte\n// et d'images\n// Ces objets doivent possÃ©der une fonction setPosition(x,y)\n/**\n * Fonction ne servant que pour les points, marques de segment, affichages de texte et images\n * Lance une aniamtion de translation de l'objet via un timer et une fonction de callBack\n * Ces objets doivent possÃ©der une fonction setPosition(x,y)\n * @param {Float} xfin : abscisse de la position finale de l'objet\n * @param {type} yfin : ordonnÃ©e de la position finale de l'objet\n * @param {type} pix10 : Nombre de pixels pour le dÃ©placement par dixiÃ¨me de seconde\n */\nObjetBase.prototype.lanceAnimationTranslation = function (xfin, yfin, pix10) {\n  // this.g.setAttribute(\"visibility\",\"visible\");\n  this.xfin = xfin\n  this.yfin = yfin\n  this.pix = Math.abs(pix10 / 4) // Dans la version JavaScript on quadruple la frÃ©quence\n  // en divisant le pas par 4\n  // (en fait par deux car la rapiditÃ© semble double de celle annoncÃ©e dans le mode d'emploi)\n  const v = new Vect(this.x, this.y, xfin, yfin)\n  this.dist = v.norme() // La distance entre la position actuelle et la position finale\n  // Cas oÃ¹ l'objet est dÃ©jÃ  Ã  la bonne position\n  if (this.dist === 0) {\n    this.translate(this.xfin, this.yfin)\n    this.doc.actionSuivante()\n    return\n  }\n  this.vect = v.vecteurColineaire(this.pix)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourTranslation() }, 25)\n}\n/**\n * Fonction de callBack appelÃ©e par un timer lors de l'animation de translation\n * On poursuit l'animation tant que la distance entre la position actuelle et la psoition de fin\n * est infÃ©rieure Ã  la distance prÃ©cÃ©dente\n */\nObjetBase.prototype.actionPourTranslation = function () {\n  const x = this.x + this.vect.x\n  const y = this.y + this.vect.y\n  const u = new Vect(x, y, this.xfin, this.yfin)\n  const d = u.norme()\n  if ((d > this.dist) || !this.doc.animationEnCours) {\n    this.translate(this.xfin, this.yfin)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.dist = d\n    this.translate(x, y)\n  }\n}\n/**\n * Fonction ne servant que pour les points, marques de segment, affichages de texte et images\n * Lance une animation de rotation de l'objet via un timer et une fonction de callBack\n * Ces objets doivent possÃ©der une fonction setPosition(x,y)\n * @param {Float} angfin : l'angle de fin de l'objet\n * @param {Float} deg10 : le nombre de degrÃ©s dont on tourne par dixiÃ¨me de seconde\n */\nObjetBase.prototype.lanceAnimationRotation = function (angfin, deg10) {\n  // Il faut choisir le dÃ©placement \"le plus court\"\n  const ang1 = kernel.mesurePrincDeg(this.angle)\n  let ang2 = kernel.mesurePrincDeg(angfin)\n  if (Math.abs(ang2 - ang1) > 180) {\n    if (ang2 > ang1) ang2 = ang2 - 360\n    else ang2 = ang2 + 360\n  }\n  this.anglefin = ang2\n  this.angle = ang1\n\n  this.pasdeg = deg10 * 2 / 3 // Dans la version JavaScript on quadruple la frÃ©quence\n  // en divisant le pas par 4\n  // (en fait on corrige par *2/3 car la rapiditÃ© semble double de celle annoncÃ©e dans le mode d'emploi)\n  this.pasdeg *= (angfin >= this.angle) ? 1 : -1 // 1 pour le sens direct svg;\n  this.distang = Math.abs(angfin - this.angle)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourRotation() }, 25)\n}\n/**\n * Fonction de callBack appelÃ©e par un timer lors de l'animation de rotation\n */\nObjetBase.prototype.actionPourRotation = function () {\n  const ang = parseFloat(this.angle) + parseFloat(this.pasdeg)\n  const dis = Math.abs(ang - this.anglefin)\n  if ((dis > this.distang) || !this.doc.animationEnCours) {\n    this.tourne(this.anglefin)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  } else {\n    this.distang = dis\n    this.tourne(ang)\n  }\n}\n/**\n * Fonction ne servant que pour les affichages de texte et images\n * Lance une aniamtion de zoom de l'objet via un timer et une fonction de callBack\n * @param {Float} zoomfin : la valeur de fin du zoomfactor de l'objet\n * @param {Float} vitesse : pour la vitesse d'animation\n */\nObjetBase.prototype.lanceAnimationZoom = function (zoomfin, vitesse) {\n  this.zoomfin = zoomfin\n  this.vitesse = parseInt(vitesse)\n  this.pas = this.vitesse * 0.05 * (this.zoomfin - this.zoomfactor) // On augmente\n  // par dÃ©faut de 5% de vitesse tous les dixiÃ¨mes de seconde\n  this.senspos = (this.pas >= 0)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourZoom() }, 100)\n}\n/**\n * Fonction de callBack appelÃ©e par un timer lors de l'animation de zoom\n */\nObjetBase.prototype.actionPourZoom = function () {\n  const z = this.zoomfactor + this.pas\n  if (this.doc.animationEnCours && ((this.senspos && (z < this.zoomfin)) || (!this.senspos && (z > this.zoomfin)))) { this.zoom(z) } else {\n    this.zoom(this.zoomfin)\n    clearInterval(this.timer)\n    this.doc.actionSuivante()\n  }\n}\n/**\n * Fonction qui devra Ãªtre appelÃ©e pour remettre Ã  jour le g Ã©lÃ©ment reprÃ©sentant\n * l'objet dans le DOM du svg de la figure\n * AppelÃ© quand on recalcule la figure ou lors des animations\n * Par dÃ©faut on reconstruit le svg Ã©lÃ©ment pour mettre Ã  jour l'objet\n * Pour certains objets (point par exemple) ce sera inutile\n * @retursn {undefined}\n */\nObjetBase.prototype.updateg = function () {\n  const oldg = this.g\n  this.creeg()\n  this.doc.svg.replaceChild(this.g, oldg)\n  this.doc.setElement(this.id, this)\n  this.g.setAttribute('visibility', 'visible')\n}\n/**\n * Fonction qui renverra true lorsque la crÃ©ation de l'objet donne lieu Ã  une animation\n * par exemple pour les segments, droites. Sera donc redÃ©fini dans droiteAncetre\n * Dans ce cas, l'objet devra avoir deux fonctions : lanceAnimation et actionPourAnimation\n * @returns {boolean}\n */\nObjetBase.prototype.creationAnimee = function () {\n  return false\n}\n/**\n * Fonction qui devra Ãªtre redÃ©finie pour les objets crÃ©Ã©s avec une animation\n * appelÃ©e Ã  la fin d'une animation ou lors de la visualisation immÃ©diate de l'objet\n * lors du click sur une icÃ´ne stepNext ou stepPrev\n */\nObjetBase.prototype.finAction = function () {\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst ObjetBase = require('./objetBase')\nmodule.exports = ObjetLigne\n/**\n * Classe ancÃªtre de tous les objets de type ligne\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire de l'objet\n * @param {string} id : l'id de l'objet dans le fichier XML de la figure\n * @param {string} couleur : la couleur de l'objet\n * @param {string} epaisseur : l'Ã©paisseur de trait\n * @param {string} opacite : l'opacitÃ© du trait\n * @param {string} styleTrait : \"tiret\" pour avoir des pointillÃ©s\n */\nfunction ObjetLigne (doc, id, couleur, epaisseur, opacite, styleTrait) {\n  ObjetBase.call(this, doc, id, couleur)\n  this.epaisseur = epaisseur\n  this.opacite = (arguments.length >= 5) ? opacite : '100'\n  this.styleTrait = (arguments.length >= 6) ? styleTrait : 'continu'\n  const op = parseFloat(this.opacite / 100)\n  this.style = 'stroke:' + couleur + ';stroke-width:' + epaisseur +\n          ';stroke-opacity:' + op + ';stroke-linecap:round;'\n  if (this.styleTrait === 'tiret') this.style += 'stroke-dasharray:10 8 10;' // PointillÃ©s\n}\nObjetLigne.prototype = new ObjetBase()\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetLigne = require('./objetLigne')\nconst ObjetBase = require('./objetBase')\nmodule.exports = Point\n/**\n * Classe reprÃ©sentant un objet de type point\n * A noter que point possÃ¨dera deux champs supplÃ©mentaires xcons et ycons\n * qui contiendront les coordonÃ©es du point au cours de la construction des autres objets\n * xcons et ycons seront modifiÃ©s lors d'une action de translation du point\n * pour que les objets l'utilisant comme cible soient correctement initialisÃ©s.\n * @extends iep.objetBase\n * @constructor\n * @param {iepDoc} doc : le document propriÃ©taire\n * @param {string} id : L'id de l'objet\n * @param {string} x : l'abscisse initiale\n * @param {string} y : l'ordonnÃ©e initiale\n * @param {string} couleur\n * @param {string} epaisseur\n */\nfunction Point (doc, id, x, y, couleur, epaisseur) {\n  this.x = parseFloat(x)\n  this.y = parseFloat(y)\n  // Les deux variables suivantes servent Ã  rÃ©tablir la figure dans son Ã©tat initial quand on revien au dÃ©but de la figure\n  this.xinit = this.x\n  this.yinit = this.y\n  //\n  this.xcons = this.x\n  this.ycons = this.y\n  ObjetLigne.call(this, doc, id, couleur, epaisseur)\n  this.style += 'stroke-linecap:round;' // Des bouts de croix arrondis\n  this.nom = null // Un nom peut Ãªtre affectÃ© ultÃ©rieurement par une action nommer\n  this.objet = 'point'\n}\nPoint.prototype = new ObjetLigne()\n/** @inheritDoc */\nPoint.prototype.initialisePosition = function () {\n  this.x = this.xinit\n  this.y = this.yinit\n  this.positionne()\n}\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nPoint.prototype.creeg = function () {\n  let g, li\n  const lon = 5 // Longuueur en pixels d'un demi-trait\n  g = document.createElementNS(kernel.svgsn, 'g')\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', -lon)\n  li.setAttribute('y1', lon)\n  li.setAttribute('x2', lon)\n  li.setAttribute('y2', -lon)\n  li.setAttribute('style', this.style)\n  g.appendChild(li)\n  li = document.createElementNS(kernel.svgsn, 'line')\n  li.setAttribute('x1', -lon)\n  li.setAttribute('y1', -lon)\n  li.setAttribute('x2', lon)\n  li.setAttribute('y2', lon)\n  li.setAttribute('style', this.style)\n  g.appendChild(li)\n  // g.setAttribute(\"id\",this.id);\n  this.g = g\n}\n/** @inheritDoc */\nPoint.prototype.positionne = function () {\n  this.g.setAttribute('transform', 'translate(' + this.x + ',' + this.y + ')')\n}\n/** @inheritDoc */\nPoint.prototype.translate = function (x, y) {\n  this.x = x\n  this.y = y\n  this.positionne()\n  if (this.nom !== null) this.nom.positionne()\n}\n/** @inheritDoc */\nPoint.prototype.updateg = function () {\n  this.setPosition(this.x, this.y)\n}\n// NÃ©cessaire de redÃ©finir montre car il peut y avoir un nom attachÃ© au point\nPoint.prototype.montre = function (bvisible) {\n  ObjetBase.prototype.montre.call(this, bvisible)\n  if (this.nom !== null) if (this.nom.g) this.nom.montre(bvisible)\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nconst Vect = require('../types/vecteur')\nmodule.exports = Polygone\n/**\n * Classe reprÃ©sentant un polygone de la figure\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : le document propriÃ©taire\n * @param {string} id : l'id de l'objet dans le fichier XML de la figure\n * @param {string[]} abs : un tableau contenant les abscisses des sommets\n * @param {string[]} ord : : un tableau contenant les ordonnÃ©es des sommets\n * @param {string} couleur : la couleur du polygone\n * @param {Float} epaisseur : l'Ã©paisseur du tracÃ©\n * @param {string} couleurFond : la couelur de onc de l'intÃ©rieur du polygone\n * @param {string} opacite : l'opacitÃ© du remplissage (de 0 Ã  100)\n */\nfunction Polygone (doc, id, abs, ord, couleur, epaisseur, couleurFond, opacite) {\n  ObjetBase.call(this, doc, id, couleur)\n  this.abs = abs.split(',')\n  this.ord = ord.split(',')\n  this.sauveabs = this.abs\n  this.sauveord = this.ord\n  this.epaisseur = epaisseur\n  this.opacite = (opacite == null) ? '60' : opacite\n  const op = parseFloat(this.opacite / 100)\n  if (couleurFond == null) this.couleurFond = this.couleur; else this.couleurFond = couleurFond\n  this.style = 'stroke:' + couleur + ';stroke-width:' + epaisseur +\n          ';fill:' + this.couleurFond + ';'\n  this.style += 'fill-opacity:' + op + ';'\n  this.objet = 'trait'\n}\nPolygone.prototype = new ObjetBase()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nPolygone.prototype.creeg = function () {\n  let points, i\n  const p = document.createElementNS(kernel.svgsn, 'polygon')\n  points = ''\n  for (i = 0; i < this.abs.length; i++) {\n    points += ' ' + this.abs[i] + ' ' + this.ord[i]\n  }\n  p.setAttribute('points', points)\n  p.setAttribute('style', this.style)\n  p.setAttribute('visibility', 'hidden')\n  // p.setAttribute(\"id\",this.id);\n  this.g = p\n}\n/** @inheritDoc */\nPolygone.prototype.creationAnimee = function () {\n  return true\n}\n/**\n * Fonction lanÃ§ant l'animation de visualisation de la ligne continue\n * Utilise un timer et une fonction de callBack\n * Vitesse est le nombre de pixels Ã  parcourir Ã  chaque dixiÃ¨me de seconde\n * @param {type} vitesse\n */\nPolygone.prototype.lanceAnimation = function (vitesse) {\n  // Dans la version flash, la vitesse n'est pas le nombre de pixels par dixiÃ¨me de seconde\n  // mais le nombre de pixlels par seconde semble le double\n  this.pix = parseFloat(vitesse / 2)\n  this.abs = []\n  this.abs[0] = this.sauveabs[0]\n  this.ord = []\n  this.ord[0] = this.sauveord[0]\n  this.ind = 0 // L'indice du sommet en cours dans le tableau des coordonnÃ©es\n  this.n = 0 // L'indice du pas sur le segment en cours\n  const cray = this.doc.crayon\n  const v = new Vect(parseFloat(this.sauveabs[0]), parseFloat(this.sauveord[0]),\n    parseFloat(this.sauveabs[1]), parseFloat(this.sauveord[1]))\n  this.longcote = v.norme() // Longueur du cÃ´tÃ© en cours\n  this.vect = v.vecteurColineaire(this.pix)\n  cray.setPosition(parseFloat(this.abs[0]), parseFloat(this.ord[0]), cray.angle)\n  const t = this\n  this.timer = setInterval(function () { t.actionPourAnimation() }, 25)\n}\n/**\n * Fonction de callBack appelÃ©e par un timer pour l'animation du tracÃ©\n */\nPolygone.prototype.actionPourAnimation = function () {\n  const cray = this.doc.crayon\n  let ind = this.ind\n  const x = parseFloat(this.abs[ind])\n  const y = parseFloat(this.ord[ind])\n  this.n++\n  if (this.doc.animationEnCours) {\n    if (this.n * this.pix <= this.longcote) {\n      const x1 = x + this.n * this.vect.x\n      const y1 = y + this.n * this.vect.y\n      this.abs[ind + 1] = String(x1)\n      this.ord[ind + 1] = String(y1)\n      cray.translate(x1, y1)\n      this.updateg()\n    } else {\n      this.ind++\n      ind++\n      if (ind === this.sauveabs.length - 1) {\n        clearInterval(this.timer)\n        this.finAction()\n        this.doc.actionSuivante()\n      } else { // On passe au cÃ´tÃ© suivant\n        this.abs[ind] = this.sauveabs[ind]\n        this.ord[ind] = this.sauveord[ind]\n        cray.translate(parseFloat(this.abs[ind]), parseFloat(this.ord[ind]))\n        const v = new Vect(parseFloat(this.sauveabs[ind]), parseFloat(this.sauveord[ind]),\n          parseFloat(this.sauveabs[ind + 1]), parseFloat(this.sauveord[ind + 1]))\n        this.longcote = v.norme() // Longueur du cÃ´tÃ© en cours\n        this.vect = v.vecteurColineaire(this.pix)\n        this.n = 0\n      }\n    }\n  } else {\n    clearInterval(this.timer)\n    this.finAction()\n    this.doc.actionSuivante()\n  }\n}\n/**\n * extends iep.objetBase.prototype.finAction\n */\nPolygone.prototype.finAction = function () {\n  this.abs = this.sauveabs\n  this.ord = this.sauveord\n  const len = this.abs.length\n  this.updateg()\n  this.doc.crayon.translate(parseFloat(this.abs[len - 1]), parseFloat(this.ord[len - 1]))\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nmodule.exports = Quadrillage\n/**\n * Classe reprÃ©sentant un quadrillage de la figure\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : Le document propriÃ©taire\n * @param {string} type : Le type de quadrillage : \"quadrillage\",\"seyes\",\"5x5\",\"10x10\",\"millimetre\"\n * @param {string} hauteur : La hauteur du cadre en cm (1 cm = 30 pixels)\n * @param {string} largeur : La largeur du cadre en cm (1 cm = 30 pixels)\n * @param {string} haut : La position en ordonnÃ©es du cadre dans la fenÃªtre\n * @param {string} gauche : La position en abscisses du cadre dans la fenÃªtre\n * @param {type} couleur : La couleur du quadrillage\n * Attention : Un quadrillage n'a pas d'id et il ne peut y en avoir qu'un dans une figure.\n */\nfunction Quadrillage (doc, type, hauteur, largeur, haut, gauche, couleur) {\n  ObjetBase.call(this, doc, 'quadrillageIEP', couleur) // Le repÃ¨re aura pour Id quadrillageIEP\n  this.hauteur = parseFloat(hauteur)\n  this.largeur = parseFloat(largeur)\n  this.haut = (haut == null) ? 0 : parseFloat(haut)\n  this.gauche = (gauche == null) ? 0 : parseFloat(gauche)\n  this.type = type\n  this.cadre = {}\n  this.cadre.gauche = this.gauche * 30 // 30 px pour 1 cm\n  this.cadre.haut = this.haut * 30\n  this.cadre.droite = this.cadre.gauche + this.largeur * 30\n  this.cadre.bas = this.cadre.haut + this.hauteur * 30\n  this.objet = 'quadrillage'\n}\n\nQuadrillage.prototype = new ObjetBase()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nQuadrillage.prototype.creeg = function () {\n  const gauche = this.cadre.gauche\n  const droite = this.cadre.droite\n  const haut = this.cadre.haut\n  const bas = this.cadre.bas\n  const couleur = this.couleur\n  this.g = document.createElementNS(kernel.svgsn, 'g')\n  // Un seul quadrillage sur une figure.\n  const oldg = this.doc.svg.getElementById('quadrillageIEP')\n  if (oldg != null) this.doc.svg.removeChild(oldg)\n  switch (this.type) {\n    case 'seyes':\n      this.tracer_grille(couleur, 24, 6, gauche, haut, droite, bas, false, 1) // 1 est l'opacitÃ©\n      this.tracer_grille(couleur, 24, 24, gauche, haut, droite, bas, false, 1)\n      break\n    case 'millimetre':\n      this.tracer_grille(couleur, 3, 3, gauche, haut, droite, bas, false, 0.6)\n      this.tracer_grille(couleur, 30, 30, gauche, haut, droite, bas, false, 0.8)\n      this.tracer_grille(couleur, 150, 150, gauche, haut, droite, bas, false, 1)\n      break\n    case '10x10':\n    case '10x':\n      this.tracer_grille(couleur, 30, 30, gauche, haut, droite, bas, false, 1)\n      break\n    case '5x5':\n    case '5x':\n    default:\n      this.tracer_grille(couleur, 15, 15, gauche, haut, droite, bas, false, 1)\n      break\n  }\n}\n/**\n * Fonction reprise Ã  partir du code de la version Flash\n * @param {string} epaisseur\n * @param {string} couleur\n * @param {Float} ecart_x\n * @param {Float} ecart_y\n * @param {Float} debut_x\n * @param {Float} debut_y\n * @param {Float} fin_x\n * @param {Float} fin_y\n * @param {Float} pointille\n * @param {Float} alpha\n */\nQuadrillage.prototype.tracer_grille = function (couleur, ecart_x, ecart_y, debut_x, debut_y, fin_x, fin_y, pointille, alpha) {\n  let li, i\n  const style = 'stroke:' + couleur + ';stroke-width:0.5;' + 'stroke-opacity:' + alpha + ';'\n  if (pointille) this.style += 'stroke-dasharray:2 2;' // PointillÃ©s\n  let nb = Math.ceil(Math.abs(fin_x - debut_x) / ecart_x)\n  for (i = 0; i < nb; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', debut_x + i * ecart_x)\n    li.setAttribute('y1', debut_y)\n    li.setAttribute('x2', debut_x + i * ecart_x)\n    li.setAttribute('y2', fin_y)\n    li.setAttribute('style', style)\n    this.g.appendChild(li)\n  }\n  nb = Math.ceil(Math.abs(fin_y - debut_y) / ecart_y)\n  for (i = 0; i < nb; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', debut_x)\n    li.setAttribute('y1', debut_y + i * ecart_y)\n    li.setAttribute('x2', fin_x)\n    li.setAttribute('y2', debut_y + i * ecart_y)\n    li.setAttribute('style', style)\n    this.g.appendChild(li)\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nmodule.exports = Repere\n/**\n * Classe reprÃ©sentant un repÃ¨re de la figure\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : le docmument propriÃ©taire\n * @param {string} hauteur : Hauteur du cadre contenant le repÃ¨re, exprimÃ©es en centimÃ¨tres\n * @param {string} largeur : Largeur du cadre contenant le repÃ¨re, exprimÃ©es en centimÃ¨tres\n * @param {string} haut : abscisse de ce cadre relativement au bord haut et au\n * bord gauche de la zone de dessin, en centimÃ¨tres\n * @param {string} gauche : OrdonnÃ©e de ce cadre relativement au bord haut et\n * au bord gauche de la zone de dessin, en centimÃ¨tres\n * @param {string} xgrad : donne les unitÃ©s de graduations : si Xgrad est Ã©gal Ã  5,\n *  le repÃ¨re va Ãªtre graduÃ© de 5 en 5\n * @param {string} ygrad : donne les unitÃ©s de graduations : si Ygrad est Ã©gal Ã  5, le repÃ¨re va Ãªtre graduÃ© de 5 en 5\n * @param {string} xmin : valeur mini des abscisses dans le repÃ¨re\n * @param {string} xmax : valeur maxi des abscisses dans le repÃ¨re\n * @param {string} ymin : valeur mini des ordonnÃ©es dans le repÃ¨re\n * @param {string} ymax : valeur maxi des ordonnÃ©es dans le repÃ¨re\n * @param {string} couleur : Couleur du tracÃ©\n * @param {string} grille : \"invisibleâ€ si on souhaite que le quadrillage soit masquÃ©\n * @param {type} axes : â€œinvisibleâ€ si on souhaite que les axes soient masquÃ©\n * @param {type} etiquettes : â€œinvisibleâ€ si on souhaite que les Ã©tiquettes des axes soient masquÃ©es\n */\nfunction Repere (doc, hauteur, largeur, haut, gauche, xgrad, ygrad, xmin, xmax,\n  ymin, ymax, couleur, grille, axes, etiquettes) {\n  ObjetBase.call(this, doc, 'repereIEP', couleur) // Le repÃ¨re aura pour Id repereIEP\n  this.hauteur = hauteur\n  this.largeur = largeur\n  this.haut = (haut == null) ? 0 : parseFloat(haut)\n  this.gauche = (gauche == null) ? 0 : parseFloat(gauche)\n  this.xgrad = parseFloat(xgrad)\n  this.ygrad = parseFloat(ygrad)\n  this.xmin = parseFloat(xmin)\n  this.xmax = parseFloat(xmax)\n  this.ymin = parseFloat(ymin)\n  this.ymax = parseFloat(ymax)\n  this.grille = (grille == null) ? 'visible' : grille\n  this.axes = (axes == null) ? 'visible' : axes\n  this.etiquettes = (etiquettes == null) ? 'visible' : etiquettes\n  this.cadre = {}\n  this.cadre.gauche = this.gauche * 30 // 30 px pour 1 cm\n  this.cadre.haut = this.haut * 30\n  this.cadre.droite = this.cadre.gauche + this.largeur * 30\n  this.cadre.bas = this.cadre.haut + this.hauteur * 30\n}\nRepere.prototype = new ObjetBase()\n/**\n *\n * @param {type} nbr\n * @returns {Float}\n */\nRepere.prototype.mettre_x_en_pixels = function (nbr) {\n  return kernel.mettre_en_pixels(nbr, this.xmin, this.xmax, this.cadre.gauche, this.cadre.droite)\n}\n/**\n * Fonction utilisÃ©e dans l'objet repere. Repris du code Flash\n */\nRepere.prototype.mettre_y_en_pixels = function (nbr) {\n  return kernel.mettre_en_pixels(nbr, this.ymax, this.ymin, this.cadre.haut, this.cadre.bas)\n}\n/**\n *\n * @param {type} debut_trace_x\n * @param {type} unite_x\n * @param {type} nb_grad_x\n * @param {type} ordo_etiquettes\n * @param {type} haut\n * @param {type} bas\n */\nRepere.prototype.tracer_abscisses = function (debut_trace_x, unite_x, nb_grad_x, ordo_etiquettes, haut, bas) {\n  let li, txt, abscisse, i\n  const tailleEtiquettes = 12 // Taille de la police utilisÃ©e pour les Ã©tiquettes\n  const style = 'stroke:black;stroke-width:0.5;'\n\n  if (this.grille === 'invisible' && this.axes !== 'invisible') {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', this.cadre.gauche)\n    li.setAttribute('y1', ordo_etiquettes)\n    li.setAttribute('x2', this.cadre.droite)\n    li.setAttribute('y2', ordo_etiquettes)\n    this.g.appendChild(li)\n  }\n  for (i = 0; i <= nb_grad_x; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    abscisse = this.mettre_x_en_pixels(debut_trace_x + i * unite_x)\n    if (this.grille === 'invisible') {\n      if (this.axes !== 'invisible') {\n        li.setAttribute('x1', abscisse)\n        li.setAttribute('y1', String(ordo_etiquettes - 5))\n        li.setAttribute('x2', abscisse)\n        li.setAttribute('y2', String(ordo_etiquettes + 5))\n        this.g.appendChild(li)\n      }\n    } else {\n      li.setAttribute('x1', abscisse)\n      li.setAttribute('y1', haut)\n      li.setAttribute('x2', abscisse)\n      li.setAttribute('y2', bas)\n      this.g.appendChild(li)\n    }\n    if (this.etiquettes !== 'invisible' && this.axes !== 'invisible') {\n      txt = document.createElementNS(kernel.svgsn, 'text')\n      txt.setAttribute('x', abscisse + 2)\n      txt.setAttribute('y', ordo_etiquettes + tailleEtiquettes)\n      const stylet = 'text-anchor:left;font-size:' + tailleEtiquettes + 'px;' + 'fill:' + this.couleur + ';'\n      txt.setAttribute('style', stylet)\n      txt.appendChild(document.createTextNode(String(debut_trace_x + i * unite_x)))\n      this.g.appendChild(txt)\n    }\n  }\n}\n/**\n *\n * @param {type} debut_trace_y\n * @param {type} unite_y\n * @param {type} nb_grad_y\n * @param {type} abs_etiquettes\n * @param {type} gauche\n * @param {type} droite\n */\nRepere.prototype.tracer_ordonnees = function (debut_trace_y, unite_y, nb_grad_y, abs_etiquettes, gauche, droite) {\n  let li, txt, ordonnee, i\n  const tailleEtiquettes = 12 // Taille de la police utilisÃ©e pour les Ã©tiquettes\n  const style = 'stroke:black;stroke-width:0.5;'\n  if (this.grille === 'invisible' && this.axes !== 'invisible') {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    li.setAttribute('x1', abs_etiquettes)\n    li.setAttribute('y1', this.cadre.haut)\n    li.setAttribute('x2', abs_etiquettes)\n    li.setAttribute('y2', this.cadre.bas)\n    this.g.appendChild(li)\n  }\n  for (i = 0; i <= nb_grad_y; i++) {\n    li = document.createElementNS(kernel.svgsn, 'line')\n    li.setAttribute('style', style)\n    ordonnee = this.mettre_y_en_pixels(debut_trace_y + i * unite_y)\n    if (this.grille === 'invisible') {\n      if (this.axes !== 'invisible') {\n        li.setAttribute('x1', String(abs_etiquettes - 5))\n        li.setAttribute('y1', ordonnee)\n        li.setAttribute('x2', String(abs_etiquettes + 5))\n        li.setAttribute('y2', ordonnee)\n        this.g.appendChild(li)\n      }\n    } else {\n      li.setAttribute('x1', gauche)\n      li.setAttribute('y1', ordonnee)\n      li.setAttribute('x2', droite)\n      li.setAttribute('y2', ordonnee)\n      this.g.appendChild(li)\n    }\n    if (this.etiquettes !== 'invisible' && this.axes !== 'invisible') {\n      txt = document.createElementNS(kernel.svgsn, 'text')\n      txt.setAttribute('x', abs_etiquettes + 2)\n      txt.setAttribute('y', ordonnee + tailleEtiquettes)\n      const stylet = 'text-anchor:left;font-size:' + tailleEtiquettes + 'px;' + 'fill:' + this.couleur + ';'\n      txt.setAttribute('style', stylet)\n      txt.appendChild(document.createTextNode(String(debut_trace_y + i * unite_y)))\n      this.g.appendChild(txt)\n    }\n  }\n}\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nRepere.prototype.creeg = function () {\n  const width = this.cadre.droite - this.cadre.gauche\n  const height = this.cadre.bas - this.cadre.haut\n  this.g = document.createElementNS(kernel.svgsn, 'g')\n  const defs = document.createElementNS(kernel.svgsn, 'defs')\n  const clip = document.createElementNS(kernel.svgsn, 'clipPath')\n  clip.setAttribute('id', 'clipRepere')\n  const rect = document.createElementNS(kernel.svgsn, 'rect')\n  rect.setAttribute('style', style)\n  rect.setAttribute('x', this.cadre.gauche)\n  rect.setAttribute('y', this.cadre.haut)\n  rect.setAttribute('width', width)\n  rect.setAttribute('height', height)\n  clip.appendChild(rect)\n  defs.appendChild(clip)\n  this.g.appendChild(defs)\n  this.g.setAttribute('style', 'clip-path:url(#clipRepere)')\n\n  // Si besoin, on trace des graduations pour les abscisses\n  if ((this.xmax - this.xmin) > this.xgrad) {\n    // nombre de graduations qui appraitront\n    const nb_grad_x = Math.floor((this.xmax - this.xmin) / this.xgrad)\n    /*\n     determination de l'ordonnÃ©e des Ã©tiquettes pour les abscisses\n     */\n    let ordo_etiquettes\n    if (this.ymax * this.ymin < 0) {\n      ordo_etiquettes = this.mettre_y_en_pixels(0)\n    } else if (this.ymax < 0) {\n      ordo_etiquettes = this.cadre.haut\n    } else {\n      ordo_etiquettes = this.cadre.bas\n    }\n    /*\n     FIN ETIQUETTES\n     */\n\n    /*\n     DETERMINATION ABSCISSES\n     */\n    const debut_trace_x = kernel.determiner_graduations(this.xmin, this.xmax, this.xgrad)\n    this.tracer_abscisses(debut_trace_x, this.xgrad, nb_grad_x, ordo_etiquettes, this.cadre.haut, this.cadre.bas)\n    /*\n     FIN ABSCISSES\n     */\n  }\n  if ((this.ymax - this.ymin) > this.ygrad) {\n    const nb_grad_y = Math.floor((this.ymax - this.ymin) / this.ygrad)\n    /*\n     determination de l'abscisse des Ã©tiquettes pour les ordonnÃ©es\n     */\n    let abs_etiquettes\n    if (this.xmax * this.xmin < 0) {\n      abs_etiquettes = this.mettre_x_en_pixels(0)\n    } else if (this.xmax < 0) {\n      abs_etiquettes = this.cadre.droite\n    } else {\n      abs_etiquettes = this.cadre.gauche\n    }\n    const debut_trace_y = kernel.determiner_graduations(this.ymin, this.ymax, this.ygrad)\n    this.tracer_ordonnees(debut_trace_y, this.ygrad, nb_grad_y, abs_etiquettes, this.cadre.gauche, this.cadre.droite)\n  }\n  // tracer_les_fonctions();\n  const rect2 = document.createElementNS(kernel.svgsn, 'rect')\n  const style = 'stroke:' + this.couleur + ';stroke-width:1;fill:none;'\n  rect2.setAttribute('style', style)\n  rect2.setAttribute('x', this.cadre.gauche)\n  rect2.setAttribute('y', this.cadre.haut)\n  rect2.setAttribute('width', width)\n  rect2.setAttribute('height', height)\n  this.g.appendChild(rect2)\n  this.g.setAttribute('visibility', 'hidden')\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst DroiteAncetre = require('./droiteAncetre')\nconst Vect = require('../types/vecteur')\nmodule.exports = Segment\n/**\n * Classe reprÃ©sentant un segment qui peut Ãªtre affublÃ© d'une flÃ¨che\n * @extends iep.objetBase\n * @constructor\n * @param {Integer} x1 : Abscisse de l'origine\n * @param {integre} y1 : OrdonnÃ©e de l'origine\n * @param {Integer} x2 : Abscisse de l'extrÃ©mitÃ©\n * @param {interger} y2 : OrdonnÃ©e de l'extrÃ©mitÃ©\n * @param {string} couleur : couleur\n * @param {Integer} epaisseur : Ã©paiseur du trait\n * @param {string} opacite : transparence du trait (de 0 Ã  100)\n * @param {string} styleTrait : Si \"tiret\" pointillÃ©s sinon trait continu\n * @param {boolean} vecteur : Si true on rajoute une flcÃ¨ce\n */\nfunction Segment (doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait, stylefleche) {\n  DroiteAncetre.call(this, doc, id, x1, y1, x2, y2, couleur, epaisseur, opacite, styleTrait)\n  this.stylefleche = stylefleche\n}\nSegment.prototype = new DroiteAncetre()\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n * Si le segment est en fait un vecteur on crÃ©e d'abord le svg Ã©lÃ©ment du segment\n * et on lui rajoute une flÃ¨che\n */\nSegment.prototype.creeg = function () {\n  DroiteAncetre.prototype.creeg.call(this)\n  if (this.stylefleche === 'vecteur') {\n    const longFleche = 12\n    const x1 = this.x1\n    const x2 = this.x2\n    const y1 = this.y1\n    const y2 = this.y2\n    const u0 = new Vect(x2, y2, x1, y1)\n    const u1 = u0.vecteurColineaire(longFleche)\n    const u2 = new Vect(u1.x * kernel.cos30 - u1.y * kernel.sin30,\n      u1.x * kernel.sin30 + u1.y * kernel.cos30)\n    const u3 = new Vect(u1.x * kernel.cos30 + u1.y * kernel.sin30,\n      -u1.x * kernel.sin30 + u1.y * kernel.cos30)\n    const points = String(x2 + u2.x) + ' ' + String(y2 + u2.y) +\n      ',' + x2 + ' ' + y2 + ',' + String(x2 + u3.x) + ' ' + String(y2 + u3.y)\n    const g = document.createElementNS(kernel.svgsn, 'polyline')\n    g.setAttribute('points', points)\n    const style = 'stroke:' + this.couleur + ';stroke-width:' + this.epaisseur +\n          ';stroke-opacity:' + this.opacite + ';fill:none'\n    g.setAttribute('style', style)\n    this.g.appendChild(g)\n  }\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nconst ObjetBase = require('./objetBase')\nmodule.exports = Texte\n/**\n * Classe reprÃ©sentant un texte.\n * L'Ã©criture dans le texte se fait via des actionEcrireTexte\n * @extends iep.objetBase\n * @constructor\n * @param {iep.iepDoc} doc : Le docmument propriÃ©taire\n * @param {string} id : L'id du texte\n * @param {string} x : L'asbsisse d'affichage\n * @param {string} y : L'ordonnÃ©e d'affichage\n */\nfunction Texte (doc, id, x, y) {\n  ObjetBase.call(this, doc, id, 'black')\n  this.x = parseFloat(x)\n  this.y = parseFloat(y)\n  // Il faut mÃ©moriser la position initiale du texte car il peut avoir Ã©tÃ© traslatÃ© ar l'animation\n  // et quand on la relance il doit remprendre sa place initiale\n  this.xinit = this.x\n  this.yinit = this.y\n\n  this.taille = 20\n  this.angle = 0 // PossibilitÃ© de tourner un etxte (pas donnÃ©e avec la version Flash)\n  this.texte = ''\n  this.objet = 'texte'\n}\nTexte.prototype = new ObjetBase()\n\n// Attention : POur un affichage de texte, il faut dÃ©caler vers le bas de la hauteur de la police pour\n// garder la compatibilitÃ© avec le flash\nTexte.prototype.positionne = function () {\n  // var y = this.y + parseFloat(this.taille);\n  // this.g.setAttribute(\"transform\",\"translate(\" + this.x + \",\" + y + \")\");\n  this.setPosition(this.x, this.y, this.angle, this.zoomfactor)\n}\nTexte.prototype.translate = function (x, y) {\n  this.x = x\n  this.y = y\n  this.positionne()\n}\n/** @inheritDoc */\nTexte.prototype.updateg = function (g) {\n  const oldg = this.g\n  this.doc.svg.replaceChild(g, oldg)\n  this.g = g\n  g.setAttribute('visibility', 'visible')\n}\n/**\n * Fonction mettant dans this.g l'Ã©lÃ©ment graphique reprÃ©sentant l'objet dans\n * le DOM du svg de la figure\n */\nTexte.prototype.creeg = function () {\n  this.g = document.createElementNS(kernel.svgsn, 'g')\n}\n/**\n * Fonction mettant le texte aux coordonnÃ©es (x,y) avec un angle angle et\n * un coefficient de zoom zoomfactor et modifiant la spoition du svg element qui\n * le reprÃ©sente dans le DOM du svg.\n * @param {float} x\n * @param {float} y\n * @param {float} angle\n * @param {integer} zoomfactor\n * @returns {undefined}\n */\nTexte.prototype.setPosition = function (x, y, angle, zoomfactor) {\n  this.x = x\n  this.y = y\n  this.angle = angle\n  this.zoomfactor = zoomfactor\n  const y2 = y + parseFloat(this.taille)\n  this.g.setAttribute('transform', 'scale(' + zoomfactor + ') translate(' +\n    String(x / zoomfactor) + ',' + String(y2 / zoomfactor) + ') rotate(' + angle + ')')\n}\n","/*\n * Visualiseur InstrumenPoche en Javascript et SVG\n * @Author Yves Biton (yves.biton@sesamath.net)\n * @License: GNU AGPLv3 https://www.gnu.org/licenses/agpl-3.0.html\n */\nconst kernel = require('../global/global')\nmodule.exports = Vect\n/**\n * Classe vecteur\n * Peut Ãªtre initialisÃ© par les coordonnÃ©es de l'origine et de l'extrÃ©mitÃ© ou\n * par deux coordonnÃ©es\n * @constructor\n * @param {type} x1 : Abscisse de l'origine ou premiÃ¨re coordonnÃ©e si deux paramÃ¨tres\n * @param {type} y1 : OrdonnÃ©e de l'origine ou premiÃ¨re coordonnÃ©e si deux paramÃ¨tres\n * @param {type} x2 : Abscisse de l'extrÃ©mitÃ© si quatre paramÃ¨tres\n * @param {type} y2 : OrdonnÃ©e de l'extrÃ©mitÃ© si quatre paramÃ¨tres\n */\nfunction Vect (x1, y1, x2, y2) {\n  if (arguments.length > 2) {\n    this.x = x2 - x1\n    this.y = y2 - y1\n  } else {\n    this.x = x1\n    this.y = y1\n  }\n}\n/**\n * Fonction renvoyant true si la norme du vecteur est infÃ©rieur oue Ã©gale Ã  10^-9\n * @returns {boolean}\n */\nVect.prototype.presqueNul = function () {\n  return kernel.zero(this.x) && kernel.zero(this.y)\n}\n/**\n * Fonction renvoyant la norme du vecteur\n * @returns {Number}\n */\nVect.prototype.norme = function () {\n  return Math.sqrt(this.x * this.x + this.y * this.y)\n}\n/**\n * Renvoie un vecteur de norme norme, colinÃ©aire Ã  v et de mÃªme sens\n * @param {Float} normeSouhaitee :  la norme du vecteur renvoyÃ©\n * @returns {Vect}\n */\nVect.prototype.vecteurColineaire = function (normeSouhaitee) {\n  const norm = this.norme()\n  return new Vect(this.x / norm * normeSouhaitee, this.y / norm * normeSouhaitee)\n}\n/**\n * Fonction faisiant tourner un vecteur de l'angle ang et renvoyant un nouveua vecteur\n * correspondant Ã  cette transformation\n * @param {type} angle : L'ange de rotation en degrÃ©s\n * @param {type} v\n */\nVect.prototype.tourne = function (angle) {\n  const kc = Math.cos(angle * kernel.convDegRad)\n  const ks = Math.sin(angle * kernel.convDegRad)\n  return new Vect(kc * this.x - ks * this.y, kc * this.y + ks * this.x)\n}\n/**\n * Renvoie la mesure en degrÃ©s de l'angle polaire d'un vecteur non nul\n * Le nombre renvoyÃ© est entre 0 et 380 (exclu)\n * @returns {Number}\n */\nVect.prototype.angle = function () {\n  let angle\n  if ((this.x === 0) && (this.y === 0)) return 0\n  else {\n    if (this.x === 0) {\n      if (this.y > 0) { angle = 3 * Math.PI / 2 } else angle = Math.PI / 2\n    } else {\n      if (this.x >= 0) { angle = Math.atan(-this.y / this.x) } else {\n        angle = Math.PI - Math.atan(this.y / this.x)\n      }\n      if (angle < 0) angle = angle + 2 * Math.PI\n    }\n  }\n  return angle * kernel.convRadDeg\n}\n"],"sourceRoot":""}